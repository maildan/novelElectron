(()=>{var e={};e.id=745,e.ids=[745],e.modules={158:(e,r,t)=>{Promise.resolve().then(t.bind(t,7526))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1416:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var a=t(4068),s=t(6777),l=t(6849);let i={base:"rounded-lg transition-shadow duration-200",variants:{default:"bg-white border border-gray-200",elevated:"bg-white shadow-lg border-0",outlined:"bg-transparent border-2 border-gray-300"},padding:{sm:"p-4",md:"p-6",lg:"p-8"},hover:{default:"hover:shadow-sm",elevated:"hover:shadow-xl",outlined:"hover:border-gray-400"}},n=(0,s.forwardRef)(({variant:e="default",padding:r="md",hoverable:t=!1,className:s,children:n,onClick:o,role:d,"aria-label":c,...u},m)=>{let p=(0,l.cn)(i.base,i.variants[e],i.padding[r],t&&i.hover[e],o&&"cursor-pointer",s);return(0,a.jsx)("div",{ref:m,className:p,onClick:o,role:d,"aria-label":c,tabIndex:o?0:void 0,onKeyDown:o?e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o())}:void 0,...u,children:n})});n.displayName="Card"},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3206:(e,r,t)=>{Promise.resolve().then(t.bind(t,5672))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3304:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(6565).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},3873:e=>{"use strict";e.exports=require("path")},4446:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=t(735),s=t(8064),l=t(9842),i=t.n(l),n=t(1365),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(r,o);let d={children:["",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7526)),"/Users/user/loop/loop/src/renderer/app/analytics/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3614)),"/Users/user/loop/loop/src/renderer/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,4254,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,5143,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,636,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/user/loop/loop/src/renderer/app/analytics/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/analytics/page",pathname:"/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5672:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var a=t(4068),s=t(1330),l=t.n(s),i=t(3304),n=t(4103),o=t(6695),d=t(9211),c=t(2235),u=t(6066),m=t(9216),p=t(1416),g=t(7892),x=t(4760);let h={container:"container mx-auto px-4 py-6 max-w-7xl space-y-6",pageTitle:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-6",kpiGrid:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",chartsGrid:"grid grid-cols-1 lg:grid-cols-3 gap-6",chartCard:"p-6",chartTitle:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",chartPlaceholder:"h-64 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center text-slate-500 dark:text-slate-400",progressGrid:"grid grid-cols-1 md:grid-cols-2 gap-6",progressItem:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",progressLabel:"font-medium text-slate-900 dark:text-slate-100",progressValue:"text-sm text-slate-600 dark:text-slate-400 ml-4",goalCard:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950 dark:to-purple-950",goalTitle:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",goalDescription:"text-slate-600 dark:text-slate-400 mb-4",goalProgress:"space-y-3",goalItem:"flex items-center justify-between",goalLabel:"text-sm font-medium text-slate-700 dark:text-slate-300",goalPercentage:"text-sm text-slate-500 dark:text-slate-400"},b={kpis:{dailyWords:0,totalWords:0,avgWpm:0,activeProjects:0,sessionTime:0,accuracy:0,weeklyGoal:0,improvementRate:0},weeklyData:[0,0,0,0,0,0,0],projectProgress:[],goals:[{label:"일일 목표 (3000자)",current:0,target:3e3},{label:"주간 목표 (20000자)",current:0,target:2e4},{label:"정확도 목표 (95%)",current:0,target:95},{label:"WPM 목표 (90)",current:0,target:90}]};function v(){let[e,r]=l().useState(b),[t,s]=l().useState(!0),[v,y]=l().useState(null),f=async()=>{try{s(!0),y(null);let e=await window.electronAPI.dashboard.getStats(),t=await window.electronAPI.keyboard.getRealtimeStats(),a=await window.electronAPI.keyboard.getStatus(),l=await window.electronAPI.dashboard.getRecentSessions();if(!e.success)throw Error(`Dashboard stats failed: ${e.error}`);if(!t.success)throw Error(`Realtime stats failed: ${t.error}`);if(!a.success)throw Error(`Keyboard status failed: ${a.error}`);if(!l.success)throw Error(`Recent sessions failed: ${l.error}`);let i=j(e.data,[],l.data||[]);t.data&&(i.kpis.avgWpm=t.data.currentWpm||0,i.kpis.accuracy=t.data.accuracy||0,i.kpis.sessionTime=(t.data.sessionTime||0)/3600),a.data?.isActive&&a.data.sessionDuration&&(i.kpis.sessionTime=a.data.sessionDuration/3600),r(i),x.V.info("ANALYTICS","✅ Analytics data loaded successfully",{dailyWords:i.kpis.dailyWords,avgWpm:i.kpis.avgWpm,accuracy:i.kpis.accuracy,sessionsCount:l.data?.length||0})}catch(e){x.V.error("ANALYTICS","❌ Failed to load analytics data",e),y(`데이터 로딩 실패: ${e.message}`),r(b)}finally{s(!1)}},j=(e,r,t)=>{let a=t||[],s=k(a),l=w(r||[]);return{kpis:{dailyWords:e?.todayWords||0,totalWords:e?.monthWords||0,avgWpm:e?.avgWpm||0,activeProjects:e?.activeProjects||0,sessionTime:N(a),accuracy:e?.accuracy||0,weeklyGoal:A(s),improvementRate:P(a)},weeklyData:s,projectProgress:l,goals:[{label:"일일 목표 (3000자)",current:e?.todayWords||0,target:3e3},{label:"주간 목표 (20000자)",current:e?.weekWords||0,target:2e4},{label:"정확도 목표 (95%)",current:e?.accuracy||0,target:95},{label:"WPM 목표 (90)",current:e?.avgWpm||0,target:90}]}},k=e=>{let r=Array(7).fill(0);return e?.length&&e.forEach(e=>{if(e.createdAt){let t=new Date(e.createdAt).getDay();r[t]+=e.keyCount||0}}),r},w=e=>{if(!e?.length)return[];let r=["blue","green","purple","orange","red"];return e.slice(0,5).map((e,t)=>({name:e.title||"제목 없음",progress:e.progress||0,color:r[t%r.length]}))},N=e=>e?.length?e.reduce((e,r)=>r.startTime&&r.endTime?e+(new Date(r.endTime).getTime()-new Date(r.startTime).getTime())/6e4:e,0)/60:0,A=e=>Math.min(e.reduce((e,r)=>e+r,0)/2e4*100,100),P=e=>{if(!e?.length||e.length<2)return 0;let r=e.slice(0,Math.min(10,e.length)),t=e.slice(10,Math.min(20,e.length));if(!t.length)return 0;let a=r.reduce((e,r)=>e+(r.wpm||0),0)/r.length,s=t.reduce((e,r)=>e+(r.wpm||0),0)/t.length;return 0===s?0:(a-s)/s*100},C=e=>new Intl.NumberFormat("ko-KR").format(e),W=(e,r=1)=>e.toFixed(r);return t?(0,a.jsx)("div",{className:h.container,children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"분석 데이터를 불러오는 중..."})]})})}):v?(0,a.jsx)("div",{className:h.container,children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-96 text-center",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-red-600 dark:text-red-400 mb-2",children:"데이터 로딩 실패"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:v}),(0,a.jsx)("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"다시 시도"})]})}):(0,a.jsxs)("div",{className:h.container,children:[(0,a.jsx)("h1",{className:h.pageTitle,children:"분석 및 통계"}),(0,a.jsxs)("div",{className:h.kpiGrid,children:[(0,a.jsx)(m.n,{title:"오늘 작성한 글자",value:C(e.kpis.dailyWords),icon:i.A,color:"blue",change:{value:12.5,type:"increase",period:"어제 대비"}}),(0,a.jsx)(m.n,{title:"총 작성한 글자",value:C(e.kpis.totalWords),icon:n.A,color:"green",change:{value:8.3,type:"increase",period:"이번 주"}}),(0,a.jsx)(m.n,{title:"평균 타자 속도",value:`${W(e.kpis.avgWpm)} WPM`,icon:o.A,color:"purple",change:{value:4.2,type:"increase",period:"지난 주 대비"}}),(0,a.jsx)(m.n,{title:"활성 프로젝트",value:e.kpis.activeProjects,icon:d.A,color:"orange",change:{value:0,type:"neutral",period:"변화 없음"}})]}),(0,a.jsxs)("div",{className:h.chartsGrid,children:[(0,a.jsxs)(p.Z,{className:`${h.chartCard} lg:col-span-2`,children:[(0,a.jsx)("h3",{className:h.chartTitle,children:"주간 작성량 추이"}),(0,a.jsx)("div",{className:h.chartPlaceholder,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.A,{className:"w-12 h-12 mx-auto mb-2"}),(0,a.jsx)("p",{children:"차트 구현 예정"}),(0,a.jsxs)("p",{className:"text-xs mt-1",children:["이번 주 평균: ",C(e.weeklyData.reduce((e,r)=>e+r,0)/7),"자/일"]})]})})]}),(0,a.jsxs)(p.Z,{className:h.chartCard,children:[(0,a.jsx)("h3",{className:h.chartTitle,children:"프로젝트 진행률"}),(0,a.jsx)("div",{className:"space-y-4",children:e.projectProgress.map((e,r)=>(0,a.jsxs)("div",{className:h.progressItem,children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:h.progressLabel,children:e.name}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(g.z,{value:e.progress,color:e.color,size:"sm"})})]}),(0,a.jsxs)("div",{className:h.progressValue,children:[W(e.progress),"%"]})]},r))})]})]}),(0,a.jsxs)("div",{className:h.progressGrid,children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(m.n,{title:"세션 시간",value:`${W(e.kpis.sessionTime)}h`,icon:u.A,color:"blue",change:{value:15.2,type:"increase",period:"어제 대비"}}),(0,a.jsx)(m.n,{title:"정확도",value:`${W(e.kpis.accuracy)}%`,icon:d.A,color:"green",change:{value:2.1,type:"increase",period:"지난 주 대비"}})]}),(0,a.jsxs)(p.Z,{className:h.goalCard,children:[(0,a.jsx)("h3",{className:h.goalTitle,children:"목표 달성률"}),(0,a.jsxs)("p",{className:h.goalDescription,children:["이번 주 전체 목표 달성률: ",W(e.kpis.weeklyGoal),"%"]}),(0,a.jsx)("div",{className:h.goalProgress,children:e.goals.map((e,r)=>{let t=Math.min(e.current/e.target*100,100),s=t>=100;return(0,a.jsxs)("div",{className:h.goalItem,children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:h.goalLabel,children:e.label}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(g.z,{value:t,color:s?"green":"blue",size:"sm"})})]}),(0,a.jsxs)("div",{className:h.goalPercentage,children:[W(t),"%"]})]},r)})})]})]})]})}},6066:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(6565).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},6695:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(6565).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},7526:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(4803).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/user/loop/loop/src/renderer/app/analytics/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/user/loop/loop/src/renderer/app/analytics/page.tsx","default")},7892:(e,r,t)=>{"use strict";t.d(r,{z:()=>i});var a=t(4068),s=t(6849);let l={container:"w-full bg-gray-200 rounded-full overflow-hidden",bar:"h-full transition-all duration-500 ease-out rounded-full",colors:{blue:"bg-blue-600",green:"bg-green-600",purple:"bg-purple-600",orange:"bg-orange-600",red:"bg-red-600"},sizes:{sm:"h-2",md:"h-3",lg:"h-4"},animated:"bg-gradient-to-r bg-[length:200%_100%] animate-shimmer",label:"text-sm font-medium text-gray-700 mb-2"};function i({value:e,color:r="blue",size:t="md",showLabel:i=!1,label:n,animated:o=!1,className:d,"aria-label":c}){let u=Math.max(0,Math.min(100,e)),m=(0,s.cn)(l.container,l.sizes[t],d),p=(0,s.cn)(l.bar,l.colors[r],o&&l.animated),g=n||`${u}%`;return(0,a.jsxs)("div",{className:"w-full",children:[i&&(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:l.label,children:g}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[u,"%"]})]}),(0,a.jsx)("div",{className:m,role:"progressbar","aria-valuenow":u,"aria-valuemin":0,"aria-valuemax":100,"aria-label":c||`Progress: ${u}%`,children:(0,a.jsx)("div",{className:p,style:{width:`${u}%`},"aria-hidden":"true"})})]})}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9211:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(6565).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},9216:(e,r,t)=>{"use strict";t.d(r,{n:()=>n});var a=t(4068),s=t(1416),l=t(6849);let i={container:"p-6 transition-all duration-200",header:"flex items-center justify-between mb-4",iconContainer:"w-10 h-10 rounded-lg flex items-center justify-center",iconColors:{blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",red:"bg-red-100 text-red-600"},value:"text-2xl font-bold text-gray-900 mb-1",label:"text-sm text-gray-600 mb-2",change:"text-sm font-medium flex items-center gap-1",changeColors:{increase:"text-green-600",decrease:"text-red-600",neutral:"text-gray-500"}};function n({title:e,value:r,icon:t,change:n,color:o="blue",className:d,onClick:c}){var u;let m=!!c,p=(0,l.cn)(i.container,m&&"cursor-pointer hover:shadow-md",d),g=e=>"number"==typeof e?e.toLocaleString():e;return(0,a.jsxs)(s.Z,{variant:"default",padding:"sm",className:p,onClick:c,hoverable:m,role:m?"button":void 0,"aria-label":m?`${e} 상세 보기`:void 0,children:[(0,a.jsxs)("div",{className:i.header,children:[(0,a.jsx)("div",{className:(0,l.cn)(i.iconContainer,i.iconColors[o]),children:(0,a.jsx)(t,{className:"w-5 h-5","aria-hidden":"true"})}),n&&(0,a.jsxs)("div",{className:(0,l.cn)(i.change,i.changeColors[n.type]),children:[(0,a.jsx)("span",{children:(u=n.value,`${u>0?"+":""}${u}%`)}),n.period&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",n.period,")"]})]})]}),(0,a.jsx)("div",{className:i.value,"aria-label":`값: ${g(r)}`,children:g(r)}),(0,a.jsx)("div",{className:i.label,children:e})]})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[373,287],()=>t(4446));module.exports=a})();