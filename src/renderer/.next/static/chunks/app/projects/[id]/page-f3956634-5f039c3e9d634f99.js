(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{1604:(e,t,r)=>{"use strict";r.d(t,{J0:()=>s.useState,Kr:()=>s.useMemo,hb:()=>s.useCallback,li:()=>s.useRef,vJ:()=>s.useEffect});var s=r(7620)},2063:(e,t,r)=>{"use strict";r.d(t,{B8:()=>A.A,Cy:()=>n.A,Hs:()=>E.A,MD:()=>u.A,Pk:()=>f.A,SE:()=>o.A,Vw:()=>i.A,X:()=>R.A,ZU:()=>g.A,_:()=>l.A,_B:()=>d.A,fV:()=>c.A,g5:()=>h.A,hc:()=>s.A,yQ:()=>a.A});var s=r(6907),o=r(7884),a=r(2794),n=r(5615),i=r(3848),l=r(2754),c=r(7065),d=r(8312),u=r(4311),h=r(1295),A=r(4616),E=r(8830),f=r(8134),g=r(3436),R=r(3206)},2122:(e,t,r)=>{"use strict";r.d(t,{FW:()=>n.A,Gy:()=>s.A,W7:()=>o.A,We:()=>l.A,X:()=>c.A,eM:()=>i.A,g5:()=>a.A});var s=r(6666),o=r(484),a=r(1295),n=r(2708),i=r(5419),l=r(6043),c=r(3206)},3010:(e,t,r)=>{"use strict";r.d(t,{AX:()=>i.A,Bx:()=>d.A,JG:()=>s.A,QR:()=>o.A,TB:()=>A.A,_H:()=>c.A,bd:()=>h.A,eM:()=>l.A,h1:()=>n.A,ni:()=>a.A,sU:()=>u.A});var s=r(985),o=r(2463),a=r(8789),n=r(2823),i=r(5059),l=r(5419),c=r(2918),d=r(8640),u=r(1717),h=r(5480),A=r(2825)},5168:(e,t,r)=>{"use strict";r.d(t,{X:()=>a.A,m:()=>o.A,o:()=>s.A});var s=r(5837),o=r(2432),a=r(3206)},5350:(e,t,r)=>{"use strict";r.d(t,{FW:()=>l.A,Hs:()=>i.A,T5:()=>a.A,Vn:()=>c.A,c_:()=>s.A,kr:()=>o.A,sU:()=>d.A,vE:()=>n.A,zW:()=>u.A});var s=r(3722),o=r(5980),a=r(7480),n=r(7327),i=r(8830),l=r(2708),c=r(414),d=r(1717),u=r(5677)},5477:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(4568),o=r(7620),a=r(2942),n=r(6034),i=r(7959),l=r(6948),c=r(6580),d=r(9811),u=r(5302),h=r(6293),A=r(1159),E=r(1357),f=r(8856),g=r(5829),R=r(662),T=r(3608),m=r(3699);let x={container:"h-screen flex flex-col bg-white dark:bg-gray-900 transition-colors duration-200",main:"flex flex-1 overflow-hidden",editorContainer:"flex-1 flex flex-col h-full bg-white dark:bg-gray-900 transition-colors duration-200"},p=(0,o.memo)(function(e){var t;let{projectId:r}=e;R.V.info("PROJECT_EDITOR","\uD83D\uDD0D PROJECT EDITOR RENDER STARTED",{projectId:r});let{isLoading:a,error:p,...b}=(0,T.B)(r);R.V.info("PROJECT_EDITOR","\uD83D\uDD0D PROJECT EDITOR STATE",{projectId:r,isLoading:a,hasError:!!p,errorMessage:p,hasTitle:!!b.title,titleLength:(null==(t=b.title)?void 0:t.length)||0});let C=(0,m.F)(),[j,O]=(0,o.useState)("write"),[v,w]=(0,o.useState)(!1),[D,P]=(0,o.useState)(!1),[I,S]=(0,o.useState)(!1),[y,k]=(0,o.useState)(!1),J=(0,o.useRef)(null),[_,N]=(0,o.useState)(!1);(0,o.useCallback)(e=>{e&&(J.current=e),N(!0),R.V.info("PROJECT_EDITOR","Editor ready (fallback mode)")},[]);let V=(0,o.useCallback)(()=>window.history.back(),[]),F=(0,o.useCallback)(()=>w(e=>!e),[]),M=(0,o.useCallback)(()=>{P(e=>!e),R.V.info("PROJECT_EDITOR","AI sidebar ".concat(D?"closed":"opened"))},[D]),G=(0,o.useCallback)(()=>{k(!0),R.V.info("PROJECT_EDITOR","Share dialog opened")},[]),L=(0,o.useCallback)(()=>{S(!0),R.V.info("PROJECT_EDITOR","Delete confirmation dialog opened")},[]),W=(0,o.useCallback)(async()=>{try{R.V.info("PROJECT_EDITOR","Deleting project",{projectId:r});let e=await window.electronAPI.projects.delete(r);if(e.success)R.V.info("PROJECT_EDITOR","Project deleted successfully"),S(!1),window.history.back();else throw Error(e.error||"Failed to delete project")}catch(e){R.V.error("PROJECT_EDITOR","Failed to delete project",e)}},[r]),B=(0,o.useCallback)(async()=>{try{let e=b.content||"",t=b.title||"제목없음",r=new Blob([e],{type:"text/markdown;charset=utf-8"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download="".concat(t.replace(/[^a-zA-Z0-9가-힣\s]/g,"_"),".md"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s),R.V.info("PROJECT_EDITOR","Project exported as markdown",{title:t})}catch(e){R.V.error("PROJECT_EDITOR","Export failed",e)}},[b.content,b.title]),U=(0,o.useCallback)(e=>{R.V.info("PROJECT_EDITOR","View changed:",e),O(e)},[]);(0,o.useCallback)(e=>R.V.info("PROJECT_EDITOR","Toolbar action:",e),[]);let X=(0,o.useCallback)(e=>{let{key:t,ctrlKey:r,metaKey:s,shiftKey:o,altKey:a}=e,n=r||s;if(n&&"s"===t){e.preventDefault(),b.forceSave(),R.V.info("PROJECT_EDITOR","Save shortcut triggered");return}if(n&&"f"===t){e.preventDefault(),C.toggleFocusMode(),R.V.info("PROJECT_EDITOR","Focus mode shortcut triggered");return}if(n&&"b"===t){e.preventDefault(),w(e=>!e),R.V.info("PROJECT_EDITOR","Sidebar shortcut triggered");return}if(n&&"d"===t){e.preventDefault(),C.toggleDarkMode(),R.V.info("PROJECT_EDITOR","Dark mode shortcut triggered");return}if("Escape"===t){if(I||y)return;if(C.isFocusMode){e.preventDefault(),C.toggleFocusMode(),R.V.info("PROJECT_EDITOR","Focus mode disabled by ESC");return}let t=new CustomEvent("global:escape",{detail:{source:"ProjectEditor"}});window.dispatchEvent(t),e.preventDefault(),V(),R.V.info("PROJECT_EDITOR","Back shortcut triggered");return}if("F1"===t){e.preventDefault();let t=new CustomEvent("shortcut:help");window.dispatchEvent(t),R.V.info("PROJECT_EDITOR","Help shortcut triggered");return}},[b.forceSave,C.toggleFocusMode,C.toggleDarkMode,V]);return((0,o.useEffect)(()=>(window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)),[X]),(0,o.useEffect)(()=>{let e=()=>{b.forceSave(),R.V.info("PROJECT_EDITOR","Project save triggered from editor")};return window.addEventListener("project:save",e),()=>window.removeEventListener("project:save",e)},[b.forceSave]),a)?(0,s.jsx)("div",{className:"h-screen flex items-center justify-center bg-white dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"프로젝트를 불러오는 중..."})]})}):p?(R.V.error("PROJECT_EDITOR","❌ PROJECT EDITOR ERROR STATE",{projectId:r,error:p}),(0,s.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center p-8 bg-red-50 rounded-lg border border-red-200 max-w-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"\uD83D\uDEA8 프로젝트 로딩 에러"}),(0,s.jsx)("p",{className:"text-slate-600 mb-4",children:"프로젝트를 불러올 수 없습니다."}),(0,s.jsxs)("div",{className:"text-left bg-gray-100 p-4 rounded text-sm font-mono mb-4",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Project ID:"})," ",r]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Error:"})," ",p]})]}),(0,s.jsx)("button",{onClick:()=>window.location.href="/projects",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"프로젝트 목록으로 돌아가기"})]})})):(0,s.jsxs)(n.z,{children:[(0,s.jsxs)("div",{className:x.container,children:[(0,s.jsx)(d.z,{title:b.title,onTitleChange:b.setTitle,onBack:V,sidebarCollapsed:v,onToggleSidebar:F,showRightSidebar:D,onToggleAISidebar:M,isFocusMode:C.isFocusMode,onToggleFocusMode:C.toggleFocusMode,onSave:b.forceSave,onShare:G,onDownload:B,onDelete:L}),(0,s.jsxs)("div",{className:x.main,children:[!v&&(0,s.jsx)(l.m,{currentView:j,onViewChange:U,structure:b.structure,characters:b.characters,stats:b.writerStats,collapsed:!1}),(0,s.jsxs)("div",{className:x.editorContainer,children:["write"===j&&(0,s.jsx)(A.L,{content:b.content,onChange:b.setContent,isFocusMode:C.isFocusMode}),"structure"===j&&(0,s.jsx)(E.l,{structure:b.structure,onStructureChange:b.setStructure}),"characters"===j&&(0,s.jsx)(f.E,{projectId:r,characters:b.characters,onCharactersChange:b.setCharacters}),"notes"===j&&(0,s.jsx)(g.d,{projectId:r,notes:b.notes||[],onNotesChange:b.setNotes})]}),(0,s.jsx)(c.H,{showRightSidebar:D,toggleRightSidebar:M,writerStats:b.writerStats,setWordGoal:b.setWordGoal,currentText:b.content,projectId:r})]})]}),(0,s.jsx)(i.S,{}),(0,s.jsx)(u.K,{isOpen:I,projectTitle:b.title,onConfirm:W,onCancel:()=>S(!1)}),(0,s.jsx)(h.G,{isOpen:y,projectTitle:b.title,projectId:r,onClose:()=>k(!1)})]})});function b(){let e=(0,a.useParams)(),t=Array.isArray(e.id)?e.id[0]:e.id;return(R.V.info("PROJECT_PAGE","\uD83D\uDD0D PROJECT PAGE ACCESSED",{params:e,projectId:t,paramsType:typeof e,paramsKeys:Object.keys(e||{}),paramsId:null==e?void 0:e.id,paramsIdType:typeof(null==e?void 0:e.id),paramsIdIsArray:Array.isArray(null==e?void 0:e.id),url:window.location.href,pathname:window.location.pathname}),e&&R.V.info("PROJECT_PAGE","\uD83D\uDD0D DETAILED PARAMS ANALYSIS",{"params.id":e.id,"params.id === undefined":void 0===e.id,"params.id === null":null===e.id,'params.id === ""':""===e.id,"Boolean(params.id)":!!e.id,"String(params.id)":String(e.id)}),t)?(R.V.info("PROJECT_PAGE","✅ PROJECT ID FOUND - LOADING PROJECT EDITOR",{projectId:t}),(0,s.jsx)(p,{projectId:t})):(R.V.error("PROJECT_PAGE","❌ MISSING PROJECT ID - SHOWING ERROR INSTEAD OF REDIRECTING",{params:e,url:window.location.href}),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center p-8 bg-red-50 rounded-lg border border-red-200",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"\uD83D\uDEA8 디버깅 정보"}),(0,s.jsx)("p",{className:"text-slate-600 mb-4",children:"프로젝트 ID가 없습니다."}),(0,s.jsxs)("div",{className:"text-left bg-gray-100 p-4 rounded text-sm font-mono",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"URL:"})," ",window.location.href]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Pathname:"})," ",window.location.pathname]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Params:"})," ",JSON.stringify(e,null,2)]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"ProjectId:"})," ",String(t)]})]}),(0,s.jsx)("button",{onClick:()=>window.location.href="/projects",className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"프로젝트 목록으로 이동"})]})}))}},6238:(e,t,r)=>{"use strict";r.d(t,{FW:()=>c.A,Pt:()=>n.A,TB:()=>d.A,Vw:()=>l.A,Xh:()=>s.A,c_:()=>a.A,iU:()=>i.A,yQ:()=>o.A});var s=r(1424),o=r(2794),a=r(3722),n=r(6419),i=r(4376),l=r(3848),c=r(2708),d=r(2825)},6409:(e,t,r)=>{"use strict";r.d(t,{X:()=>o.A,h:()=>s.A});var s=r(6907),o=r(3206)},6543:(e,t,r)=>{"use strict";r.d(t,{FW:()=>l.A,Gy:()=>s.A,W7:()=>a.A,a4:()=>i.A,iU:()=>n.A,jl:()=>o.A,zW:()=>c.A});var s=r(6666),o=r(2608),a=r(484),n=r(4376),i=r(4038),l=r(2708),c=r(5677)},7099:(e,t,r)=>{"use strict";r.d(t,{J0:()=>s.useState,hb:()=>s.useCallback});var s=r(7620)},7378:(e,t,r)=>{"use strict";r.d(t,{B0:()=>o.A,Cy:()=>a.A,Gk:()=>h.A,J2:()=>l.A,N_:()=>c.A,Pk:()=>u.A,QR:()=>n.A,a4:()=>d.A,xf:()=>i.A,yN:()=>s.A,z2:()=>A.A});var s=r(6609),o=r(5448),a=r(5615),n=r(2463),i=r(1149),l=r(9276),c=r(9264),d=r(4038),u=r(8134),h=r(5935),A=r(1326)},7757:(e,t,r)=>{Promise.resolve().then(r.bind(r,5477))},8324:(e,t,r)=>{"use strict";r.d(t,{Jl:()=>s.A,QR:()=>o.A,X:()=>l.A,_H:()=>i.A,f5:()=>a.A,gE:()=>n.A});var s=r(8454),o=r(2463),a=r(7904),n=r(9641),i=r(2918),l=r(3206)},8371:(e,t,r)=>{"use strict";r.d(t,{FW:()=>o.A,W7:()=>s.A,X:()=>n.A,eM:()=>a.A});var s=r(484),o=r(2708),a=r(5419),n=r(3206)},9897:(e,t,r)=>{"use strict";r.d(t,{hb:()=>s.useCallback,li:()=>s.useRef,vJ:()=>s.useEffect});var s=r(7620)}}]);