(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{85:(e,t,r)=>{"use strict";r.d(t,{FW:()=>o.A,W7:()=>s.A,X:()=>c.A,eM:()=>a.A});var s=r(6393),o=r(4101),a=r(5010),c=r(9429)},215:(e,t,r)=>{"use strict";r.d(t,{FW:()=>i.A,Gy:()=>s.A,W7:()=>a.A,a4:()=>n.A,iU:()=>c.A,jl:()=>o.A,zW:()=>l.A});var s=r(2277),o=r(1425),a=r(6393),c=r(7931),n=r(5293),i=r(4101),l=r(8673)},1282:(e,t,r)=>{"use strict";r.d(t,{J0:()=>s.useState,Kr:()=>s.useMemo,hb:()=>s.useCallback,li:()=>s.useRef,vJ:()=>s.useEffect});var s=r(6903)},1768:(e,t,r)=>{"use strict";r.d(t,{AX:()=>n.A,Bx:()=>d.A,JG:()=>s.A,QR:()=>o.A,TB:()=>f.A,_H:()=>l.A,bd:()=>A.A,eM:()=>i.A,h1:()=>c.A,ni:()=>a.A,sU:()=>u.A});var s=r(7812),o=r(8842),a=r(3922),c=r(6122),n=r(6178),i=r(5010),l=r(4329),d=r(1965),u=r(952),A=r(1675),f=r(754)},1858:(e,t,r)=>{"use strict";r.d(t,{B0:()=>o.A,Cy:()=>a.A,Gk:()=>A.A,J2:()=>i.A,N_:()=>l.A,Pk:()=>u.A,QR:()=>c.A,a4:()=>d.A,xf:()=>n.A,yN:()=>s.A,z2:()=>f.A});var s=r(2400),o=r(1787),a=r(6461),c=r(8842),n=r(7818),i=r(6245),l=r(3409),d=r(5293),u=r(1797),A=r(5364),f=r(8309)},3930:(e,t,r)=>{Promise.resolve().then(r.bind(r,4072))},4072:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(8591),o=r(6903),a=r(147),c=r(2517),n=r(2401),i=r(8074),l=r(8534),d=r(9501),u=r(9888),A=r(2312),f=r(6765),h=r(19),g=r(7574),E=r(1791),C=r(848),v=r(4086),b=r(8165);let R={container:"h-screen flex flex-col bg-white dark:bg-gray-900 transition-colors duration-200",main:"flex flex-1 overflow-hidden",editorContainer:"flex-1 flex flex-col h-full bg-white dark:bg-gray-900 transition-colors duration-200"},T=(0,o.memo)(function(e){let{projectId:t}=e,{isLoading:r,error:a,...T}=(0,v.B)(t),p=(0,b.F)(),[x,j]=(0,o.useState)("write"),[m,w]=(0,o.useState)(!1),[O,k]=(0,o.useState)(!1),[D,P]=(0,o.useState)(!1),[_,y]=(0,o.useState)(!1),S=(0,o.useRef)(null),[I,J]=(0,o.useState)(!1);(0,o.useCallback)(e=>{e&&(S.current=e),J(!0),C.V.info("PROJECT_EDITOR","Editor ready (fallback mode)")},[]);let V=(0,o.useCallback)(()=>window.history.back(),[]),F=(0,o.useCallback)(()=>w(e=>!e),[]),M=(0,o.useCallback)(()=>{k(e=>!e),C.V.info("PROJECT_EDITOR","AI sidebar ".concat(O?"closed":"opened"))},[O]),N=(0,o.useCallback)(()=>{y(!0),C.V.info("PROJECT_EDITOR","Share dialog opened")},[]),W=(0,o.useCallback)(()=>{P(!0),C.V.info("PROJECT_EDITOR","Delete confirmation dialog opened")},[]),B=(0,o.useCallback)(async()=>{try{C.V.info("PROJECT_EDITOR","Deleting project",{projectId:t});let e=await window.electronAPI.projects.delete(t);if(e.success)C.V.info("PROJECT_EDITOR","Project deleted successfully"),P(!1),window.history.back();else throw Error(e.error||"Failed to delete project")}catch(e){C.V.error("PROJECT_EDITOR","Failed to delete project",e)}},[t]),L=(0,o.useCallback)(async()=>{try{let e=T.content||"",t=T.title||"제목없음",r=new Blob([e],{type:"text/markdown;charset=utf-8"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download="".concat(t.replace(/[^a-zA-Z0-9가-힣\s]/g,"_"),".md"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s),C.V.info("PROJECT_EDITOR","Project exported as markdown",{title:t})}catch(e){C.V.error("PROJECT_EDITOR","Export failed",e)}},[T.content,T.title]),G=(0,o.useCallback)(e=>{C.V.info("PROJECT_EDITOR","View changed:",e),j(e)},[]);(0,o.useCallback)(e=>C.V.info("PROJECT_EDITOR","Toolbar action:",e),[]);let U=(0,o.useCallback)(e=>{let{key:t,ctrlKey:r,metaKey:s,shiftKey:o,altKey:a}=e,c=r||s;if(c&&"s"===t){e.preventDefault(),T.forceSave(),C.V.info("PROJECT_EDITOR","Save shortcut triggered");return}if(c&&"f"===t){e.preventDefault(),p.toggleFocusMode(),C.V.info("PROJECT_EDITOR","Focus mode shortcut triggered");return}if(c&&"b"===t){e.preventDefault(),w(e=>!e),C.V.info("PROJECT_EDITOR","Sidebar shortcut triggered");return}if(c&&"d"===t){e.preventDefault(),p.toggleDarkMode(),C.V.info("PROJECT_EDITOR","Dark mode shortcut triggered");return}if("Escape"===t){if(D||_)return;if(p.isFocusMode){e.preventDefault(),p.toggleFocusMode(),C.V.info("PROJECT_EDITOR","Focus mode disabled by ESC");return}let t=new CustomEvent("global:escape",{detail:{source:"ProjectEditor"}});window.dispatchEvent(t),e.preventDefault(),V(),C.V.info("PROJECT_EDITOR","Back shortcut triggered");return}if("F1"===t){e.preventDefault();let t=new CustomEvent("shortcut:help");window.dispatchEvent(t),C.V.info("PROJECT_EDITOR","Help shortcut triggered");return}},[T.forceSave,p.toggleFocusMode,p.toggleDarkMode,V]);return((0,o.useEffect)(()=>(window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)),[U]),(0,o.useEffect)(()=>{let e=()=>{T.forceSave(),C.V.info("PROJECT_EDITOR","Project save triggered from editor")};return window.addEventListener("project:save",e),()=>window.removeEventListener("project:save",e)},[T.forceSave]),r)?(0,s.jsx)("div",{className:"h-screen flex items-center justify-center bg-white dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"프로젝트를 불러오는 중..."})]})}):a?(0,s.jsxs)("div",{className:"h-screen flex items-center justify-center text-red-500",children:["오류: ",a]}):(0,s.jsxs)(c.z,{children:[(0,s.jsxs)("div",{className:R.container,children:[(0,s.jsx)(d.z,{title:T.title,onTitleChange:T.setTitle,onBack:V,sidebarCollapsed:m,onToggleSidebar:F,showRightSidebar:O,onToggleAISidebar:M,isFocusMode:p.isFocusMode,onToggleFocusMode:p.toggleFocusMode,onSave:T.forceSave,onShare:N,onDownload:L,onDelete:W}),(0,s.jsxs)("div",{className:R.main,children:[!m&&(0,s.jsx)(i.m,{currentView:x,onViewChange:G,structure:T.structure,characters:T.characters,stats:T.writerStats,collapsed:!1}),(0,s.jsxs)("div",{className:R.editorContainer,children:["write"===x&&(0,s.jsx)(f.L,{content:T.content,onChange:T.setContent,isFocusMode:p.isFocusMode}),"structure"===x&&(0,s.jsx)(h.l,{structure:T.structure,onStructureChange:T.setStructure}),"characters"===x&&(0,s.jsx)(g.E,{projectId:t,characters:T.characters,onCharactersChange:T.setCharacters}),"notes"===x&&(0,s.jsx)(E.d,{projectId:t,notes:T.notes||[],onNotesChange:T.setNotes})]}),(0,s.jsx)(l.H,{showRightSidebar:O,toggleRightSidebar:M,writerStats:T.writerStats,setWordGoal:T.setWordGoal,currentText:T.content,projectId:t})]})]}),(0,s.jsx)(n.S,{}),(0,s.jsx)(u.K,{isOpen:D,projectTitle:T.title,onConfirm:B,onCancel:()=>P(!1)}),(0,s.jsx)(A.G,{isOpen:_,projectTitle:T.title,projectId:t,onClose:()=>y(!1)})]})});function p(){let e=(0,a.useParams)(),t=Array.isArray(e.id)?e.id[0]:e.id;return t?(C.V.debug("PROJECT_PAGE","Loading project page",{projectId:t}),(0,s.jsx)(T,{projectId:t})):(C.V.error("PROJECT_PAGE","Missing project ID in route parameters"),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"오류"}),(0,s.jsx)("p",{className:"text-slate-600",children:"프로젝트 ID가 없습니다."})]})}))}},6192:(e,t,r)=>{"use strict";r.d(t,{Jl:()=>s.A,QR:()=>o.A,X:()=>i.A,_H:()=>n.A,f5:()=>a.A,gE:()=>c.A});var s=r(7545),o=r(8842),a=r(5921),c=r(4044),n=r(4329),i=r(9429)},6196:(e,t,r)=>{"use strict";r.d(t,{X:()=>a.A,m:()=>o.A,o:()=>s.A});var s=r(626),o=r(5947),a=r(9429)},6759:(e,t,r)=>{"use strict";r.d(t,{J0:()=>s.useState,hb:()=>s.useCallback});var s=r(6903)},7206:(e,t,r)=>{"use strict";r.d(t,{FW:()=>i.A,Hs:()=>n.A,T5:()=>a.A,Vn:()=>l.A,c_:()=>s.A,kr:()=>o.A,sU:()=>d.A,vE:()=>c.A,zW:()=>u.A});var s=r(1689),o=r(8477),a=r(7227),c=r(5950),n=r(605),i=r(4101),l=r(9087),d=r(952),u=r(8673)},7209:(e,t,r)=>{"use strict";r.d(t,{hb:()=>s.useCallback,li:()=>s.useRef,vJ:()=>s.useEffect});var s=r(6903)},8118:(e,t,r)=>{"use strict";r.d(t,{FW:()=>c.A,Gy:()=>s.A,W7:()=>o.A,We:()=>i.A,X:()=>l.A,eM:()=>n.A,g5:()=>a.A});var s=r(2277),o=r(6393),a=r(4328),c=r(4101),n=r(5010),i=r(5550),l=r(9429)},9202:(e,t,r)=>{"use strict";r.d(t,{FW:()=>l.A,Pt:()=>c.A,TB:()=>d.A,Vw:()=>i.A,Xh:()=>s.A,c_:()=>a.A,iU:()=>n.A,yQ:()=>o.A});var s=r(9745),o=r(9955),a=r(1689),c=r(5776),n=r(7931),i=r(5909),l=r(4101),d=r(754)},9587:(e,t,r)=>{"use strict";r.d(t,{X:()=>o.A,h:()=>s.A});var s=r(8318),o=r(9429)},9678:(e,t,r)=>{"use strict";r.d(t,{B8:()=>f.A,Cy:()=>c.A,Hs:()=>h.A,MD:()=>u.A,Pk:()=>g.A,SE:()=>o.A,Vw:()=>n.A,X:()=>C.A,ZU:()=>E.A,_:()=>i.A,_B:()=>d.A,fV:()=>l.A,g5:()=>A.A,hc:()=>s.A,yQ:()=>a.A});var s=r(8318),o=r(5933),a=r(9955),c=r(6461),n=r(5909),i=r(5941),l=r(8814),d=r(7191),u=r(1076),A=r(4328),f=r(61),h=r(605),g=r(1797),E=r(7529),C=r(9429)}}]);