(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{1159:(e,t,r)=>{"use strict";r.d(t,{L:()=>n});var a=r(4568);r(7620);var d=r(319);let o={container:"flex-1 flex flex-col h-full bg-white dark:bg-gray-900",editorWrapper:"flex-1 min-h-0 overflow-hidden"};function n(e){let{content:t,onChange:r,isFocusMode:n}=e;return(0,a.jsx)("div",{className:o.container,children:(0,a.jsx)("div",{className:o.editorWrapper,children:(0,a.jsx)(d.n,{content:t,onChange:r,isFocusMode:n})})})}},1357:(e,t,r)=>{"use strict";r.d(t,{l:()=>i});var a=r(4568),d=r(7620),o=r(6238);let n={container:"flex-1 overflow-hidden bg-white dark:bg-gray-900",header:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",title:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",subtitle:"text-gray-600 dark:text-gray-400",content:"flex-1 overflow-y-auto p-6",structureList:"space-y-2",structureItem:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-sm hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200",itemIcon:"w-5 h-5 text-blue-600 dark:text-blue-400",itemContent:"flex-1",itemTitle:"font-medium text-gray-900 dark:text-gray-100",itemType:"text-xs text-gray-500 dark:text-gray-400",itemActions:"flex items-center gap-2",actionButton:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",addMenuContainer:"relative",addButton:"flex items-center gap-2 w-full p-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-400 hover:border-blue-400 hover:text-blue-600 transition-colors",addMenu:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10",addMenuItem:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer first:rounded-t-lg last:rounded-b-lg",editInput:"w-full px-2 py-1 border border-blue-400 rounded text-sm font-medium text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-800"},l={chapter:o.Vw,scene:o.iU,note:o.Xh},s=[{type:"chapter",label:"새 장",icon:o.Vw,description:"스토리의 큰 단위"},{type:"scene",label:"새 장면",icon:o.iU,description:"장 안의 세부 구성"},{type:"note",label:"새 메모",icon:o.Xh,description:"아이디어와 참고사항"}];function i(e){let{structure:t,onStructureChange:r}=e,[i,c]=(0,d.useState)(!1),[u,g]=(0,d.useState)(null),[x,h]=(0,d.useState)(""),b=e=>{var a;let d={chapter:"".concat(t.filter(e=>"chapter"===e.type).length+1,"장"),scene:"새 장면",note:"새 메모"},o={id:Date.now().toString(),projectId:(null==(a=t[0])?void 0:a.projectId)||"",type:e,title:d[e],isActive:!0,createdAt:new Date,updatedAt:new Date};r([...t,o]),c(!1)},m=e=>{g(e.id),h(e.title)},p=e=>{x.trim()&&r(t.map(t=>t.id===e?{...t,title:x.trim(),updatedAt:new Date}:t)),g(null),h("")},y=()=>{g(null),h("")},v=e=>{r(t.filter(t=>t.id!==e))},k=(e,t)=>{"Enter"===e.key?p(t):"Escape"===e.key&&y()};return(0,a.jsxs)("div",{className:n.container,children:[(0,a.jsxs)("div",{className:n.header,children:[(0,a.jsx)("h2",{className:n.title,children:"스토리 구조"}),(0,a.jsx)("p",{className:n.subtitle,children:"장, 장면, 메모를 관리하여 이야기의 흐름을 구성하세요"})]}),(0,a.jsx)("div",{className:n.content,children:(0,a.jsxs)("div",{className:n.structureList,children:[t.map(e=>{let t=l[e.type]||o.iU,r=u===e.id;return(0,a.jsxs)("div",{className:n.structureItem,children:[(0,a.jsx)(t,{className:n.itemIcon}),(0,a.jsx)("div",{className:n.itemContent,children:r?(0,a.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),onKeyDown:t=>k(t,e.id),onBlur:()=>p(e.id),className:n.editInput,autoFocus:!0}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:n.itemTitle,children:e.title}),(0,a.jsx)("div",{className:n.itemType,children:"chapter"===e.type?"장":"scene"===e.type?"장면":"메모"})]})}),(0,a.jsxs)("div",{className:n.itemActions,children:[(0,a.jsx)("button",{onClick:()=>m(e),className:n.actionButton,title:"편집",children:(0,a.jsx)(o.Pt,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>v(e.id),className:n.actionButton,title:"삭제",children:(0,a.jsx)(o.TB,{className:"w-4 h-4"})})]})]},e.id)}),(0,a.jsxs)("div",{className:n.addMenuContainer,children:[(0,a.jsxs)("button",{onClick:()=>c(!i),className:n.addButton,children:[(0,a.jsx)(o.FW,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"새 항목 추가"}),i?(0,a.jsx)(o.yQ,{className:"w-4 h-4"}):(0,a.jsx)(o.c_,{className:"w-4 h-4"})]}),i&&(0,a.jsx)("div",{className:n.addMenu,children:s.map(e=>{let{type:t,label:r,icon:d,description:o}=e;return(0,a.jsxs)("div",{onClick:()=>b(t),className:n.addMenuItem,children:[(0,a.jsx)(d,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:r}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:o})]})]},t)})})]})]})})]})}},5829:(e,t,r)=>{"use strict";r.d(t,{d:()=>c});var a=r(4568),d=r(7620),o=r(2122),n=r(662);let l={container:"flex-1 overflow-hidden bg-white dark:bg-gray-900",header:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",title:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",subtitle:"text-gray-600 dark:text-gray-400",content:"flex-1 overflow-y-auto p-6",typeButtons:"flex gap-2 mb-6 flex-wrap",typeButton:"flex items-center gap-2 px-3 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",typeButtonActive:"bg-blue-600 text-white border-blue-600 hover:bg-blue-700",notesGrid:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",noteCard:"group p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-sm hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200",noteHeader:"flex items-center gap-3 mb-3",noteIcon:"w-5 h-5 text-blue-600 dark:text-blue-400",noteTitle:"font-medium text-gray-900 dark:text-gray-100 flex-1",noteContent:"text-gray-600 dark:text-gray-400 text-sm whitespace-pre-wrap line-clamp-4",noteDate:"text-xs text-gray-500 dark:text-gray-500 mt-3",addButton:"group flex flex-col items-center justify-center gap-2 p-6 bg-white dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200 cursor-pointer min-h-[150px]",addButtonIcon:"w-6 h-6 text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors",addButtonText:"font-medium text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",addButtonSubtext:"text-sm text-gray-500 dark:text-gray-500 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors",editButton:"p-1.5 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",saveButton:"p-1.5 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",cancelButton:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",editInput:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500",editTextarea:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500 resize-none"},s=[],i=[{id:"idea",label:"아이디어",icon:o.g5},{id:"goal",label:"목표",icon:o.We},{id:"reference",label:"참고",icon:o.Gy}];function c(e){var t;let{projectId:r,notes:c,onNotesChange:u}=e,[g,x]=(0,d.useState)(c||s.map(e=>({...e,projectId:r}))),[h,b]=(0,d.useState)("all"),[m,p]=(0,d.useState)(null),[y,v]=(0,d.useState)({}),k=e=>{p(e.id),v(e),n.V.debug("NOTES_VIEW","Edit started",{id:e.id})},j=async()=>{if(m&&y)try{var e,t;if(null==(t=window.electronAPI)||null==(e=t.projects)?void 0:e.upsertNote){let e={...y,id:m,projectId:r,updatedAt:new Date},t=await window.electronAPI.projects.upsertNote(e);if(t.success&&t.data){let e=g.map(e=>e.id===m?t.data:e);x(e),p(null),v({}),u&&u(e),n.V.info("NOTES_VIEW","Note saved to DB",{id:m})}else throw Error(t.error||"Failed to save note")}else{let e=g.map(e=>e.id===m?{...e,...y,updatedAt:new Date}:e);x(e),p(null),v({}),u&&u(e),n.V.info("NOTES_VIEW","Note updated locally",{id:m})}}catch(e){n.V.error("NOTES_VIEW","Failed to save note",e),alert("노트 저장에 실패했습니다.")}},f=()=>{p(null),v({}),n.V.debug("NOTES_VIEW","Edit cancelled")},N=e=>{let t=i.find(t=>t.id===e);return t?t.icon:o.g5},w="all"===h?g:g.filter(e=>e.type===h);return(0,a.jsxs)("div",{className:l.container,children:[(0,a.jsxs)("div",{className:l.header,children:[(0,a.jsx)("h2",{className:l.title,children:"작가 노트"}),(0,a.jsx)("p",{className:l.subtitle,children:"아이디어, 목표, 참고 자료를 체계적으로 정리하세요"})]}),(0,a.jsxs)("div",{className:l.content,children:[(0,a.jsxs)("div",{className:l.typeButtons,children:[(0,a.jsx)("button",{onClick:()=>b("all"),className:"".concat(l.typeButton," ").concat("all"===h?l.typeButtonActive:""),children:"전체"}),i.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>b(e.id),className:"".concat(l.typeButton," ").concat(h===e.id?l.typeButtonActive:""),children:[(0,a.jsx)(t,{size:16}),e.label]},e.id)})]}),(0,a.jsxs)("div",{className:l.notesGrid,children:[w.map(e=>{let t=N(e.type);return(0,a.jsxs)("div",{className:l.noteCard,children:[(0,a.jsxs)("div",{className:l.noteHeader,children:[(0,a.jsx)(t,{className:l.noteIcon}),m===e.id?(0,a.jsx)("input",{type:"text",value:y.title||"",onChange:e=>v(t=>({...t,title:e.target.value})),className:l.editInput,placeholder:"메모 제목"}):(0,a.jsx)("h3",{className:l.noteTitle,children:e.title}),(0,a.jsx)("div",{className:"flex gap-1",children:m===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:j,className:l.saveButton,title:"저장",children:(0,a.jsx)(o.eM,{size:16})}),(0,a.jsx)("button",{onClick:f,className:l.cancelButton,title:"취소",children:(0,a.jsx)(o.X,{size:16})})]}):(0,a.jsx)("button",{onClick:()=>k(e),className:l.editButton,title:"편집",children:(0,a.jsx)(o.W7,{size:16})})})]}),m===e.id?(0,a.jsx)("textarea",{value:y.content||"",onChange:e=>v(t=>({...t,content:e.target.value})),className:l.editTextarea,placeholder:"메모 내용",rows:6}):(0,a.jsx)("p",{className:l.noteContent,children:e.content}),(0,a.jsx)("div",{className:l.noteDate,children:e.updatedAt.toLocaleDateString()})]},e.id)}),(0,a.jsxs)("button",{onClick:()=>{let e={id:Date.now().toString(),projectId:r,title:"새 메모",content:"여기에 메모를 작성하세요...",type:"all"===h?"idea":h,createdAt:new Date,updatedAt:new Date},t=[...g,e];x(t),p(e.id),v(e),u&&u(t),n.V.info("NOTES_VIEW","New note added",{id:e.id})},className:l.addButton,children:[(0,a.jsx)(o.FW,{className:l.addButtonIcon}),(0,a.jsx)("span",{className:l.addButtonText,children:"새 메모 추가"}),(0,a.jsxs)("span",{className:l.addButtonSubtext,children:["all"===h?"아이디어를":(null==(t=i.find(e=>e.id===h))?void 0:t.label)+"를"," 기록하세요"]})]})]})]})]})}},8856:(e,t,r)=>{"use strict";r.d(t,{E:()=>s});var a=r(4568),d=r(7620),o=r(8371),n=r(662);let l={container:"flex-1 overflow-hidden bg-white dark:bg-gray-900",header:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",title:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",subtitle:"text-gray-600 dark:text-gray-400",content:"flex-1 overflow-y-auto p-6",characterGrid:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",characterCard:"group p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-sm hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200",characterHeader:"flex items-start justify-between mb-3",characterInfo:"flex-1",characterName:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-1",characterRole:"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",characterNotes:"text-gray-600 dark:text-gray-400 text-sm mt-2 line-clamp-3",addButton:"group flex flex-col items-center justify-center gap-2 p-6 bg-white dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200 cursor-pointer",addButtonIcon:"w-5 h-5 text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors",addButtonText:"text-sm font-medium text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",editButton:"p-1.5 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",saveButton:"p-1.5 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",cancelButton:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",editInput:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500",editTextarea:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500 resize-none"};function s(e){let{projectId:t,characters:r,onCharactersChange:s}=e,[i,c]=(0,d.useState)(null),[u,g]=(0,d.useState)({}),x=async()=>{try{var e;let a={id:Date.now().toString(),projectId:(null==(e=r[0])?void 0:e.projectId)||t,name:"새 인물",role:"역할 미정",notes:"인물에 대한 설명을 추가하세요.",createdAt:new Date,updatedAt:new Date},d=await window.electronAPI.projects.upsertCharacter(a);if(d.success&&d.data)s([...r,d.data]),c(d.data.id),g(d.data),n.V.info("CHARACTERS_VIEW","New character saved to DB",{id:d.data.id});else throw Error(d.error||"Failed to create character")}catch(e){n.V.error("CHARACTERS_VIEW","Failed to create character",e),alert("캐릭터 생성에 실패했습니다.")}},h=e=>{c(e.id),g(e),n.V.debug("CHARACTERS_VIEW","Edit started",{id:e.id})},b=async()=>{if(i&&u)try{let e={...u,id:i,updatedAt:new Date},t=await window.electronAPI.projects.upsertCharacter(e);if(t.success&&t.data){let e=r.map(e=>e.id===i?t.data:e);s(e),c(null),g({}),n.V.info("CHARACTERS_VIEW","Character saved to DB",{id:i})}else throw Error(t.error||"Failed to save character")}catch(e){n.V.error("CHARACTERS_VIEW","Failed to save character",e),alert("캐릭터 저장에 실패했습니다.")}},m=()=>{c(null),g({}),n.V.debug("CHARACTERS_VIEW","Edit cancelled")};return(0,a.jsxs)("div",{className:l.container,children:[(0,a.jsxs)("div",{className:l.header,children:[(0,a.jsx)("h2",{className:l.title,children:"등장인물"}),(0,a.jsx)("p",{className:l.subtitle,children:"이야기의 등장인물들을 정리하고 관리하세요"})]}),(0,a.jsx)("div",{className:l.content,children:(0,a.jsxs)("div",{className:l.characterGrid,children:[r.map(e=>(0,a.jsx)("div",{className:l.characterCard,children:(0,a.jsxs)("div",{className:l.characterHeader,children:[(0,a.jsx)("div",{className:l.characterInfo,children:i===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",value:u.name||"",onChange:e=>g(t=>({...t,name:e.target.value})),className:l.editInput,placeholder:"인물 이름"}),(0,a.jsx)("input",{type:"text",value:u.role||"",onChange:e=>g(t=>({...t,role:e.target.value})),className:"".concat(l.editInput," mt-2"),placeholder:"역할"}),(0,a.jsx)("textarea",{value:u.notes||"",onChange:e=>g(t=>({...t,notes:e.target.value})),className:"".concat(l.editTextarea," mt-2"),placeholder:"인물 설명",rows:3})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:l.characterName,children:e.name}),(0,a.jsx)("span",{className:l.characterRole,children:e.role}),(0,a.jsx)("p",{className:l.characterNotes,children:e.notes})]})}),(0,a.jsx)("div",{className:"flex gap-1",children:i===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:b,className:l.saveButton,title:"저장",children:(0,a.jsx)(o.eM,{size:16})}),(0,a.jsx)("button",{onClick:m,className:l.cancelButton,title:"취소",children:(0,a.jsx)(o.X,{size:16})})]}):(0,a.jsx)("button",{onClick:()=>h(e),className:l.editButton,title:"편집",children:(0,a.jsx)(o.W7,{size:16})})})]})},e.id)),(0,a.jsxs)("button",{onClick:x,className:l.addButton,children:[(0,a.jsx)(o.FW,{className:l.addButtonIcon}),(0,a.jsx)("span",{className:l.addButtonText,children:"새 인물 추가"})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[91,209,432,979,899,744,322,592,940,605,30,173,641,431,110,555,408,219,27,206,409,76,588,51,358],()=>t(7757)),_N_E=e.O()}]);