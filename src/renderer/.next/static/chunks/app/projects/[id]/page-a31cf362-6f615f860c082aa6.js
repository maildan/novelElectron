(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51],{319:(e,t,a)=>{"use strict";a.d(t,{n:()=>S});var r=a(4568),s=a(7620),n=a(8300),l=a(4087),o=a(7618),i=a(3445),c=a(5356),d=a(7902),u=a(1353),m=a(2082),g=a(9646),h=a(4103),x=a(7706),p=a(2735);let b=[{title:"제목 1",description:"큰 섹션 헤딩",icon:p._,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).setHeading({level:1}).run()}},{title:"제목 2",description:"중간 섹션 헤딩",icon:p.fV,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).setHeading({level:2}).run()}},{title:"제목 3",description:"작은 섹션 헤딩",icon:p._B,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).setHeading({level:3}).run()}},{title:"본문",description:"일반 텍스트로 시작",icon:p.ZU,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).setParagraph().run()}},{title:"불릿 리스트",description:"간단한 불릿 목록",icon:p.B8,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).toggleBulletList().run()}},{title:"번호 리스트",description:"번호가 매겨진 목록",icon:p.Vw,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).toggleOrderedList().run()}},{title:"체크리스트",description:"할 일 목록",icon:p.SE,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).toggleList("taskList","taskItem").run()}},{title:"콜아웃 - 정보",description:"\uD83D\uDCA1 정보 강조",icon:p.g5,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).insertContent({type:"callout",attrs:{type:"info",icon:"\uD83D\uDCA1"},content:[{type:"paragraph",content:[{type:"text",text:"정보를 입력하세요..."}]}]}).run()}},{title:"콜아웃 - 경고",description:"⚠️ 경고 메시지",icon:p.hc,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).insertContent({type:"callout",attrs:{type:"warning",icon:"⚠️"},content:[{type:"paragraph",content:[{type:"text",text:"경고 내용을 입력하세요..."}]}]}).run()}},{title:"콜아웃 - 에러",description:"❌ 에러 메시지",icon:p.X,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).insertContent({type:"callout",attrs:{type:"error",icon:"❌"},content:[{type:"paragraph",content:[{type:"text",text:"에러 내용을 입력하세요..."}]}]}).run()}},{title:"토글",description:"▼ 접을 수 있는 섹션",icon:p.yQ,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).insertContent({type:"toggle",attrs:{open:!1,summary:"토글 제목"},content:[{type:"paragraph",content:[{type:"text",text:"토글 내용을 입력하세요..."}]}]}).run()}},{title:"하이라이트",description:"\uD83D\uDD8D️ 텍스트 강조",icon:p.MD,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).insertContent("하이라이트할 텍스트").setMark("highlight",{color:"yellow"}).run()}},{title:"인용구",description:"인용 텍스트",icon:p.Pk,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).toggleBlockquote().run()}},{title:"코드 블록",description:"코드 스니펫",icon:p.Cy,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).toggleCodeBlock().run()}},{title:"구분선",description:"섹션 구분선",icon:p.Hs,command:e=>{let{editor:t,range:a}=e;t.chain().focus().deleteRange(a).setHorizontalRule().run()}}],f=(0,s.forwardRef)((e,t)=>{let{items:a,command:n}=e,[l,o]=(0,s.useState)(0);(0,s.useImperativeHandle)(t,()=>({onKeyDown:e=>{let{event:t}=e;return"ArrowUp"===t.key?(o((l+a.length-1)%a.length),!0):"ArrowDown"===t.key?(o((l+1)%a.length),!0):"Enter"===t.key&&(i(l),!0)}})),(0,s.useEffect)(()=>o(0),[a]);let i=e=>{let t=a[e];t&&n(t)};return(0,r.jsx)("div",{className:"z-50 w-72 p-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-80 overflow-auto",children:a.length?a.map((e,t)=>(0,r.jsxs)("button",{className:"flex items-center gap-3 w-full px-3 py-2 text-left text-sm rounded-md transition-colors ".concat(t===l?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>i(t),children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center text-gray-500 dark:text-gray-400",children:(0,r.jsx)(e.icon,{size:16})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.title}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]})]},t)):(0,r.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:"검색 결과가 없습니다"})})});f.displayName="CommandMenu";let v=g.YY.create({name:"slashCommand",addOptions:()=>({suggestion:{char:"/",command:e=>{let{editor:t,range:a,props:r}=e;r.command({editor:t,range:a})}}}),addProseMirrorPlugins(){return[(0,h.Ay)({editor:this.editor,...this.options.suggestion})]}}),y={items:e=>{let{query:t}=e;return b.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase()))},render:()=>{let e,t=[];return{onStart:a=>{e=new n.NV(f,{props:a,editor:a.editor}),a.clientRect&&(t=(0,x.Ay)("body",{getReferenceClientRect:a.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(a){if(e.updateProps(a),!a.clientRect)return;let r=Array.isArray(t)?t[0]:void 0;r&&r.setProps({getReferenceClientRect:a.clientRect})},onKeyDown(a){var r;if("Escape"===a.event.key){let e=Array.isArray(t)?t[0]:void 0;return e&&e.hide(),!0}return null==(r=e.ref)?void 0:r.onKeyDown({event:a.event})},onExit(){let a=Array.isArray(t)?t[0]:void 0;a&&a.destroy(),e.destroy()}}}};var T=a(5665),j=a(662),k=a(9066);let w=g.bP.create({name:"taskList",group:"block list",content:"taskItem+",parseHTML:()=>[{tag:'ul[data-type="taskList"]'}],renderHTML(e){let{HTMLAttributes:t}=e;return["ul",(0,g.KV)(t,{"data-type":"taskList",class:"task-list"}),0]}}),A=g.bP.create({name:"taskItem",content:"paragraph block*",defining:!0,addAttributes:()=>({checked:{default:!1,parseHTML:e=>"true"===e.getAttribute("data-checked"),renderHTML:e=>({"data-checked":e.checked})}}),parseHTML:()=>[{tag:'li[data-type="taskItem"]'}],renderHTML(e){let{node:t,HTMLAttributes:a}=e;return["li",(0,g.KV)(a,{"data-type":"taskItem","data-checked":t.attrs.checked,class:"task-item"}),["label",{class:"task-checkbox-wrapper"},["input",{type:"checkbox",checked:t.attrs.checked?"checked":null,class:"task-checkbox"}],["span",{class:"task-content"},0]]]}}),N=g.bP.create({name:"callout",group:"block",content:"block+",addAttributes:()=>({type:{default:"info",renderHTML:e=>({"data-type":e.type})},icon:{default:"\uD83D\uDCA1",renderHTML:e=>({"data-icon":e.icon})}}),parseHTML:()=>[{tag:"div[data-callout]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",{"data-callout":!0,...t},0]}}),C=g.bP.create({name:"toggle",group:"block",content:"block+",addAttributes:()=>({open:{default:!1,renderHTML:e=>({"data-open":e.open})},summary:{default:"토글 제목",renderHTML:e=>({"data-summary":e.summary})}}),parseHTML:()=>[{tag:"details[data-toggle]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["details",{"data-toggle":!0,...t},["summary",{},t["data-summary"]||"토글 제목"],["div",{class:"toggle-content"},0]]}}),E=g.CU.create({name:"highlight",addAttributes:()=>({color:{default:"yellow",parseHTML:e=>e.getAttribute("data-color"),renderHTML:e=>e.color?{"data-color":e.color}:{}}}),parseHTML:()=>[{tag:"mark[data-highlight]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["mark",{"data-highlight":!0,...t},0]}});a(4038);let I={container:"w-full h-full flex flex-col",editor:"flex-1 p-6 prose max-w-none focus:outline-none text-gray-900 dark:text-gray-100",focused:"prose-lg",bubble:"flex flex-nowrap gap-1 p-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-50 overflow-visible whitespace-nowrap",bubbleButton:"px-2 py-1 text-sm bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 rounded transition-colors flex items-center justify-center min-w-[30px]"};function S(e){let{content:t,onChange:a,isFocusMode:g}=e,[h,x]=(0,s.useState)(!1),[p,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=e=>{e.preventDefault(),b(!0)},t=e=>{e.preventDefault(),e.relatedTarget&&e.relatedTarget.closest(".ProseMirror")||b(!1)},a=e=>{e.preventDefault(),b(!1)};return document.addEventListener("dragover",e),document.addEventListener("dragleave",t),document.addEventListener("drop",a),()=>{document.removeEventListener("dragover",e),document.removeEventListener("dragleave",t),document.removeEventListener("drop",a)}},[]),(0,s.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&e.key,(e.ctrlKey||e.metaKey)&&e.key};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);let f=(0,n.hG)({extensions:[l.A.configure({heading:{levels:[1,2,3,4]},bulletList:{HTMLAttributes:{class:"list-disc list-outside ml-6"}},orderedList:{HTMLAttributes:{class:"list-decimal list-outside ml-6"}}}),u.A,m.Ay.configure({HTMLAttributes:{class:"rounded-lg shadow-md max-w-full h-auto my-4"},inline:!1,allowBase64:!0}),o.A.configure({placeholder:e=>{let{node:t}=e;if("heading"===t.type.name)switch(t.attrs.level){case 1:return"제목을 입력하세요...";case 2:return"챕터 제목...";case 3:return"섹션 제목...";default:return"소제목..."}return"callout"===t.type.name?"콜아웃 내용을 입력하세요...":"toggle"===t.type.name?"토글 내용을 입력하세요...":"/ 를 입력하여 명령어를 사용하거나 이야기를 시작해보세요..."},showOnlyWhenEditable:!0,showOnlyCurrent:!1}),i.A.configure({className:"has-focus",mode:"all"}),c.Ay.configure({openDoubleQuote:'"',closeDoubleQuote:'"',openSingleQuote:"'",closeSingleQuote:"'",ellipsis:"...",emDash:"--"}),w,A,N,C,E,v.configure({suggestion:y}),d.A],content:t,editorProps:{attributes:{class:"".concat(I.editor," ").concat(g?I.focused:""),"data-placeholder":"이야기를 시작해보세요..."},handleKeyDown:(e,t)=>{if(" "===t.key){let{state:a}=e,{selection:r}=a,{$from:s}=r,n=s.parent.textContent.slice(0,s.parentOffset),l=e.editor;if(!l)return!1;if("#"===n)return t.preventDefault(),t.stopPropagation(),l.chain().focus().deleteRange({from:s.pos-1,to:s.pos}).setHeading({level:1}).run(),j.V.debug("TIPTAP_EDITOR","✅ Markdown: H1 applied"),!0;if("##"===n)return t.preventDefault(),t.stopPropagation(),l.chain().focus().deleteRange({from:s.pos-2,to:s.pos}).setHeading({level:2}).run(),j.V.debug("TIPTAP_EDITOR","✅ Markdown: H2 applied"),!0;if("###"===n)return t.preventDefault(),t.stopPropagation(),l.chain().focus().deleteRange({from:s.pos-3,to:s.pos}).setHeading({level:3}).run(),j.V.debug("TIPTAP_EDITOR","✅ Markdown: H3 applied"),!0;if("-"===n)return t.preventDefault(),t.stopPropagation(),l.chain().focus().deleteRange({from:s.pos-1,to:s.pos}).toggleBulletList().run(),j.V.debug("TIPTAP_EDITOR","✅ Markdown: Bullet list applied"),!0;if(/^\d+\.$/.test(n))return t.preventDefault(),t.stopPropagation(),l.chain().focus().deleteRange({from:s.pos-n.length,to:s.pos}).toggleOrderedList().run(),j.V.debug("TIPTAP_EDITOR","✅ Markdown: Ordered list applied"),!0}return!1},handlePaste:(e,t)=>{let a=e.editor;if(!a)return!1;let r=t.clipboardData;if(!r)return!1;for(let e of Array.from(r.items))if(0===e.type.indexOf("image")){t.preventDefault();let r=e.getAsFile();if(r){let e=new FileReader;return e.onload=e=>{var t;let r=null==(t=e.target)?void 0:t.result;r&&(a.chain().focus().setImage({src:r}).run(),j.V.info("TIPTAP_EDITOR","Image pasted from clipboard"))},e.readAsDataURL(r),!0}}return!1},handleDrop:(e,t)=>{var a;let r=e.editor;if(!r)return!1;e.dom.classList.remove("drag-over");let s=Array.from((null==(a=t.dataTransfer)?void 0:a.files)||[]).filter(e=>e.type.startsWith("image/"));return s.length>0&&(t.preventDefault(),s.forEach(e=>{let t=new FileReader;t.onload=e=>{var t;let a=null==(t=e.target)?void 0:t.result;a&&(r.chain().focus().setImage({src:a}).run(),j.V.info("TIPTAP_EDITOR","Image dropped into editor"))},t.readAsDataURL(e)}),!0)}},onUpdate:e=>{var t;let{editor:r}=e;a(r.getHTML()),j.V.debug("TIPTAP_EDITOR","Content updated",{wordCount:(null==(t=r.storage.characterCount)?void 0:t.words())||0})},onCreate:e=>{let{editor:t}=e;x(!0),j.V.info("TIPTAP_EDITOR","Editor created successfully")},onFocus:e=>{let{editor:t}=e;j.V.debug("TIPTAP_EDITOR","Editor focused")},onBlur:e=>{let{editor:t}=e;j.V.debug("TIPTAP_EDITOR","Editor blurred")}});return((0,s.useEffect)(()=>{f&&t!==f.getHTML()&&f.commands.setContent(t,!1)},[t,f]),(0,s.useEffect)(()=>{f&&(f.view.dom.className="".concat(I.editor," ").concat(g?I.focused:""))},[g,f]),(0,s.useEffect)(()=>{if(!f)return;let e=(0,k.RW)(f),t=e=>{let{key:t,ctrlKey:a,metaKey:r}=e,s=a||r;if(s&&"c"===t&&!e.shiftKey){let e=f.state.doc.textBetween(f.state.selection.from,f.state.selection.to);e&&navigator.clipboard.writeText(e).then(()=>{j.V.info("TIPTAP_EDITOR","Text copied via keyboard shortcut")}).catch(e=>{j.V.error("TIPTAP_EDITOR","Failed to copy text via shortcut",e)})}s&&"v"===t&&!e.shiftKey&&navigator.clipboard.readText().then(e=>{e&&(f.chain().focus().insertContent(e).run(),j.V.info("TIPTAP_EDITOR","Text pasted via keyboard shortcut"))}).catch(e=>{j.V.error("TIPTAP_EDITOR","Failed to paste text via shortcut",e)})};document.addEventListener("keydown",t);let a=()=>{let e=new CustomEvent("project:save");window.dispatchEvent(e),j.V.info("TIPTAP_EDITOR","Save event triggered from editor")};return window.addEventListener("editor:save",a),j.V.info("TIPTAP_EDITOR","Shortcuts and save event bound",{shortcutCount:k.YV.length}),()=>{e(),document.removeEventListener("keydown",t),window.removeEventListener("editor:save",a),j.V.debug("TIPTAP_EDITOR","Shortcuts and events unbound")}},[f]),(0,s.useEffect)(()=>()=>{f&&(f.destroy(),j.V.debug("TIPTAP_EDITOR","Editor destroyed"))},[f]),(0,s.useEffect)(()=>{let e=e=>{if("Escape"===e.key&&g){let e=new CustomEvent("editor:exitFocus");window.dispatchEvent(e),j.V.info("TIPTAP_EDITOR","ESC pressed - exiting focus mode")}},t=e=>{if(f&&e.detail&&e.detail.callback){let t=f.getText();e.detail.callback(t),j.V.info("TIPTAP_EDITOR","Content copied via header button",{length:t.length})}};return window.addEventListener("keydown",e),window.addEventListener("project:copyContent",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("project:copyContent",t)}},[g,f]),(0,s.useEffect)(()=>{if(!f)return;let e=f.view.dom,t=t=>{t.preventDefault(),t.stopPropagation(),e.classList.add("drag-over"),b(!0)},a=e=>{e.preventDefault(),e.stopPropagation()},r=t=>{t.preventDefault(),t.stopPropagation(),e.contains(t.relatedTarget)||(e.classList.remove("drag-over"),b(!1))},s=t=>{t.preventDefault(),t.stopPropagation(),e.classList.remove("drag-over"),b(!1)};return e.addEventListener("dragenter",t),e.addEventListener("dragover",a),e.addEventListener("dragleave",r),e.addEventListener("drop",s),()=>{e.removeEventListener("dragenter",t),e.removeEventListener("dragover",a),e.removeEventListener("dragleave",r),e.removeEventListener("drop",s)}},[f]),h)?(0,r.jsxs)("div",{className:"".concat(I.container," ").concat(p?"drag-over":""),children:[p&&(0,r.jsx)("div",{className:"absolute inset-0 border-2 border-dashed border-blue-500 bg-blue-50/50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center z-10 pointer-events-none",children:(0,r.jsx)("div",{className:"text-blue-600 dark:text-blue-400 text-lg font-medium",children:"\uD83D\uDCC1 파일을 여기에 놓으세요"})}),f&&(0,r.jsxs)(n.mM,{editor:f,className:I.bubble,shouldShow:e=>{let{editor:t,view:a,state:r,oldState:s,from:n,to:l}=e;return n!==l},children:[(0,r.jsx)("button",{onClick:()=>f.chain().focus().toggleBold().run(),className:"".concat(I.bubbleButton," ").concat(f.isActive("bold")?"bg-blue-200 dark:bg-blue-800":""),title:"볼드 (Ctrl+B)",children:(0,r.jsx)(T.yN,{size:14})}),(0,r.jsx)("button",{onClick:()=>f.chain().focus().toggleItalic().run(),className:"".concat(I.bubbleButton," ").concat(f.isActive("italic")?"bg-blue-200 dark:bg-blue-800":""),title:"이탤릭 (Ctrl+I)",children:(0,r.jsx)(T.J2,{size:14})}),(0,r.jsx)("button",{onClick:()=>f.chain().focus().toggleUnderline().run(),className:"".concat(I.bubbleButton," ").concat(f.isActive("underline")?"bg-blue-200 dark:bg-blue-800":""),title:"언더라인 (Ctrl+U)",children:(0,r.jsx)(T.z2,{size:14})}),(0,r.jsx)("button",{onClick:()=>f.chain().focus().toggleStrike().run(),className:"".concat(I.bubbleButton," ").concat(f.isActive("strike")?"bg-blue-200 dark:bg-blue-800":""),title:"취소선 (Ctrl+Shift+S)",children:(0,r.jsx)(T.Gk,{size:14})}),(0,r.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),(0,r.jsx)("button",{onClick:()=>f.chain().focus().toggleCode().run(),className:"".concat(I.bubbleButton," ").concat(f.isActive("code")?"bg-blue-200 dark:bg-blue-800":""),title:"인라인 코드 (Ctrl+`)",children:(0,r.jsx)(T.Cy,{size:14})}),(0,r.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),(0,r.jsx)("button",{onClick:()=>{},className:"".concat(I.bubbleButton," ").concat(f.isActive("link")?"bg-blue-200 dark:bg-blue-800":""),title:"링크 추가",children:(0,r.jsx)(T.N_,{size:14})}),(0,r.jsx)("button",{onClick:()=>f.chain().focus().toggleBlockquote().run(),className:"".concat(I.bubbleButton," ").concat(f.isActive("blockquote")?"bg-blue-200 dark:bg-blue-800":""),title:"인용구",children:(0,r.jsx)(T.Pk,{size:14})}),(0,r.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),(0,r.jsx)("button",{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){let e=new FileReader;e.onload=e=>{var t;let a=null==(t=e.target)?void 0:t.result;a&&(f.chain().focus().setImage({src:a}).run(),j.V.info("TIPTAP_EDITOR","Image added via file picker"))},e.readAsDataURL(a)}},e.click()},className:I.bubbleButton,title:"이미지 추가",children:(0,r.jsx)(T.xf,{size:14})}),(0,r.jsx)("button",{onClick:()=>{let e=f.state.doc.textBetween(f.state.selection.from,f.state.selection.to);e&&navigator.clipboard.writeText(e).then(()=>{j.V.info("TIPTAP_EDITOR","Text copied to clipboard")}).catch(e=>{j.V.error("TIPTAP_EDITOR","Failed to copy text",e)})},className:I.bubbleButton,title:"선택한 텍스트 복사",children:(0,r.jsx)(T.QR,{size:14})}),(0,r.jsx)("button",{onClick:async()=>{try{let e=await navigator.clipboard.readText();e&&(f.chain().focus().insertContent(e).run(),j.V.info("TIPTAP_EDITOR","Text pasted from clipboard"))}catch(e){j.V.error("TIPTAP_EDITOR","Failed to paste from clipboard",e)}},className:I.bubbleButton,title:"클립보드에서 붙여넣기",children:(0,r.jsx)(T.B0,{size:14})}),(0,r.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),(0,r.jsx)("button",{onClick:()=>{f.chain().focus().setHeading({level:2}).run()},className:I.bubbleButton,title:"헤딩 설정",children:(0,r.jsx)(T.a4,{size:14})})]}),(0,r.jsx)(n.$Z,{editor:f})]}):(0,r.jsx)("div",{className:I.container,children:(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{className:"text-slate-500 text-sm",children:"에디터 준비 중..."})]})})})}},2064:(e,t,a)=>{"use strict";a.d(t,{H0:()=>r,fU:()=>s});let r=(e,t,a)=>{if(!e)return{wordCount:0,charCount:0,paragraphCount:0,readingTime:0,wordGoal:t,progress:0,sessionTime:0,wpm:0,headingCount:0,listItemCount:0};let r=e.split("\n"),s=e.split(/\s+/).filter(e=>e.length>0).length,n=e.length,l=e.split(/\n\s*\n/).filter(e=>e.trim().length>0).length,o=Math.ceil(s/200),i=Math.min(100,Math.round(s/t*100)),c=Math.max(1,(Date.now()-a)/1e3/60),d=Math.round(s/c),u=Math.floor(c);return{wordCount:s,charCount:n,paragraphCount:l,readingTime:o,wordGoal:t,progress:i,sessionTime:u,wpm:d,headingCount:r.filter(e=>e.match(/^#{1,6}\s/)).length,listItemCount:r.filter(e=>e.match(/^[\s]*[-*+]\s/)).length}},s=e=>{if(e<60)return"".concat(e,"분");let t=Math.floor(e/60),a=e%60;return"".concat(t,"시간 ").concat(a?"".concat(a,"분"):"")}},3608:(e,t,a)=>{"use strict";a.d(t,{B:()=>o});var r=a(1604),s=a(662),n=a(2064),l=a(9897);function o(e){let t=(0,r.li)(Date.now()),a=(0,r.Kr)(()=>new Date,[]),o=(0,r.Kr)(()=>[{id:"1",projectId:e,name:"주인공",role:"주요 인물",notes:"용감하고 정의로운 성격",createdAt:a,updatedAt:a},{id:"2",projectId:e,name:"조력자",role:"조력자",notes:"지혜롭고 경험이 많음",createdAt:a,updatedAt:a},{id:"3",projectId:e,name:"적대자",role:"적대자",notes:"야망이 크고 냉혹함",createdAt:a,updatedAt:a}],[e,a]),i=(0,r.Kr)(()=>[{id:"1",projectId:e,title:"첫 번째 메모",content:"이야기의 핵심 아이디어를 여기에 적어보세요.",tags:["아이디어"],color:"#3b82f6",isPinned:!1,createdAt:a,updatedAt:a},{id:"2",projectId:e,title:"설정 노트",content:"세계관, 배경 설정에 대한 내용을 정리합니다.",tags:["설정","세계관"],color:"#10b981",isPinned:!0,createdAt:a,updatedAt:a}],[e,a]),c=(0,r.Kr)(()=>[{id:"1",projectId:e,type:"chapter",title:"1장: 시작",isActive:!0,createdAt:a,updatedAt:a},{id:"2",projectId:e,type:"scene",title:"첫 번째 장면",isActive:!0,createdAt:a,updatedAt:a},{id:"3",projectId:e,type:"scene",title:"두 번째 장면",isActive:!0,createdAt:a,updatedAt:a},{id:"4",projectId:e,type:"chapter",title:"2장: 전개",isActive:!0,createdAt:a,updatedAt:a},{id:"5",projectId:e,type:"scene",title:"세 번째 장면",isActive:!0,createdAt:a,updatedAt:a},{id:"6",projectId:e,type:"note",title:"아이디어 메모",isActive:!0,createdAt:a,updatedAt:a}],[e,a]),[d,u]=(0,r.J0)(!0),[m,g]=(0,r.J0)(null),[h,x]=(0,r.J0)(""),[p,b]=(0,r.J0)(""),[f,v]=(0,r.J0)(null),[y,T]=(0,r.J0)("saved"),j=(0,r.li)(""),k=(0,r.li)(""),w=(0,r.hb)(e=>{j.current=e,x(e)},[]),A=(0,r.hb)(e=>{k.current=e,b(e)},[]),[N,C]=(0,r.J0)([]),[E,I]=(0,r.J0)([]),[S,R]=(0,r.J0)([]),[P,D]=(0,r.J0)({wordCount:0,charCount:0,paragraphCount:0,readingTime:0,wordGoal:1e3,progress:0,sessionTime:0,wpm:0}),V=(0,r.hb)(async()=>{try{u(!0),g(null),s.V.debug("PROJECT_DATA","Loading project",{projectId:e});let t=await window.electronAPI.projects.getById(e);if(t.success&&t.data){x(t.data.title),b(t.data.content),v(new Date(t.data.lastModified)),T("saved");try{let t=await window.electronAPI.projects.getCharacters(e);t.success&&t.data?(C(t.data),s.V.debug("PROJECT_DATA","Characters loaded successfully",{count:t.data.length})):(s.V.warn("PROJECT_DATA","No characters found, using defaults"),C(o))}catch(e){s.V.warn("PROJECT_DATA","Failed to load characters, using defaults",e),C(o)}try{let t=await window.electronAPI.projects.getStructure(e);t.success&&t.data?(I(t.data),s.V.debug("PROJECT_DATA","Structure loaded successfully",{count:t.data.length})):(s.V.warn("PROJECT_DATA","No structure found, using defaults"),I(c))}catch(e){s.V.warn("PROJECT_DATA","Failed to load structure, using defaults",e),I(c)}try{let t=await window.electronAPI.projects.getNotes(e);t.success&&t.data?(R(t.data),s.V.debug("PROJECT_DATA","Notes loaded successfully",{count:t.data.length})):(s.V.warn("PROJECT_DATA","No notes found, using defaults"),R(i))}catch(e){s.V.warn("PROJECT_DATA","Failed to load notes, using defaults",e),R(i)}s.V.info("PROJECT_DATA","Project loaded successfully")}else throw Error(t.error||"Failed to load project")}catch(t){s.V.error("PROJECT_DATA","Error loading project",t),g(t instanceof Error?t.message:"Failed to load project");try{let t=localStorage.getItem("project_backup_".concat(e));if(t){let e=JSON.parse(t);x(e.title||""),b(e.content||""),T("unsaved"),s.V.info("PROJECT_DATA","Loaded from local backup")}}catch(e){s.V.error("PROJECT_DATA","Failed to load backup",e)}}finally{u(!1)}},[e]),_=(0,r.hb)(async()=>{try{let t=j.current,a=k.current;if(!t.trim()&&!a.trim())return;s.V.debug("PROJECT_DATA","Saving project to server",{projectId:e});try{let r={title:t,content:a,lastModified:new Date};localStorage.setItem("project_backup_".concat(e),JSON.stringify(r)),s.V.debug("PROJECT_DATA","Local backup saved")}catch(e){s.V.warn("PROJECT_DATA","Failed to save local backup",e)}let r=await window.electronAPI.projects.update(e,{title:t,content:a,lastModified:new Date});if(r.success){v(new Date),T("saved"),s.V.info("PROJECT_DATA","Project saved successfully to server");try{localStorage.removeItem("project_backup_".concat(e))}catch(e){}}else throw Error(r.error||"Failed to save project")}catch(e){throw s.V.error("PROJECT_DATA","Error saving project",e),T("error"),e}},[e]),{debouncedSave:O,forceSave:L,isLoading:H}=function(e){let{projectId:t,delay:a=5e3,onSave:r,onSaveSuccess:n,onSaveError:o}=e,i=(0,l.li)(null),c=(0,l.li)(!1),d=(0,l.li)(0),u=(0,l.li)(0),m=(0,l.hb)(()=>{u.current=Date.now(),i.current&&clearTimeout(i.current),i.current=setTimeout(async()=>{let e=Date.now()-u.current;if(e<.9*a){s.V.debug("AUTO_SAVE","Still typing, postponing save",{projectId:t,timeSinceLastTyping:e,requiredDelay:a}),m();return}if(c.current)return void s.V.debug("AUTO_SAVE","Save already in progress, skipping",{projectId:t});try{c.current=!0;let a=Date.now();s.V.debug("AUTO_SAVE","\uD83D\uDCBE Starting auto-save (typing stopped)",{projectId:t,timeSinceLastTyping:e}),await r(),d.current=0;let l=Date.now()-a;s.V.info("AUTO_SAVE","✅ Auto-save completed",{projectId:t,duration:"".concat(l,"ms"),timeSinceLastTyping:e}),null==n||n()}catch(a){let e=a instanceof Error?a:Error(String(a));s.V.error("AUTO_SAVE","❌ Auto-save failed",e),d.current<3?(d.current++,s.V.warn("AUTO_SAVE","Retrying save (".concat(d.current,"/").concat(3,")"),{projectId:t}),setTimeout(()=>{m()},1e3*Math.pow(2,d.current))):(s.V.error("AUTO_SAVE","Max retries exceeded",{projectId:t}),null==o||o(e))}finally{c.current=!1,i.current=null}},a)},[t,a,r,n,o]),g=(0,l.hb)(async()=>{if(i.current&&(clearTimeout(i.current),i.current=null),c.current)return void s.V.debug("AUTO_SAVE","Save already in progress, cannot force save",{projectId:t});try{c.current=!0;let e=Date.now();s.V.info("AUTO_SAVE","Starting force save",{projectId:t}),await r(),d.current=0;let a=Date.now()-e;s.V.info("AUTO_SAVE","✅ Force save completed",{projectId:t,duration:"".concat(a,"ms")}),null==n||n()}catch(t){let e=t instanceof Error?t:Error(String(t));s.V.error("AUTO_SAVE","❌ Force save failed",e),null==o||o(e)}finally{c.current=!1}},[t,r,n,o]);return(0,l.vJ)(()=>()=>{i.current&&clearTimeout(i.current)},[]),{debouncedSave:m,forceSave:g,isLoading:c.current}}({projectId:e,delay:3e3,onSave:_,onSaveSuccess:()=>{T("saved"),v(new Date),s.V.info("PROJECT_DATA","✅ 자동 저장 완료",{projectId:e})},onSaveError:t=>{T("error"),s.V.error("PROJECT_DATA","❌ 자동 저장 실패",{error:t.message,projectId:e});try{localStorage.setItem("project_backup_".concat(e),JSON.stringify({title:h,content:p})),s.V.info("PROJECT_DATA","\uD83D\uDCE6 로컬 백업 저장됨",{projectId:e})}catch(e){s.V.error("PROJECT_DATA","❌ 로컬 백업 실패",e)}}}),B=(0,r.hb)(async()=>{await L()},[L]),M=(0,r.Kr)(()=>p?(0,n.H0)(p,P.wordGoal,t.current):P,[p,P.wordGoal,P]),z=(0,r.hb)(()=>{D(M)},[M]),J=(0,r.hb)(e=>{D(t=>({...t,wordGoal:e,progress:Math.min(100,Math.round(t.wordCount/e*100))}))},[]),F=(0,r.li)(V);F.current=V,(0,r.vJ)(()=>{e&&F.current()},[e]);let W=(0,r.li)(O);W.current=O,(0,r.vJ)(()=>{(h.trim()||p.trim())&&(T("unsaved"),W.current())},[h,p]),(0,r.vJ)(()=>{H&&T("saving")},[H]),(0,r.vJ)(()=>{z()},[]);let U=(0,r.hb)(async t=>{try{s.V.debug("PROJECT_DATA","Saving characters",{count:t.length});let a=await window.electronAPI.projects.updateCharacters(e,t);if(a.success)s.V.info("PROJECT_DATA","Characters saved successfully");else throw Error(a.error||"Failed to save characters")}catch(e){throw s.V.error("PROJECT_DATA","Error saving characters",e),e}},[e]),K=(0,r.hb)(async t=>{try{s.V.debug("PROJECT_DATA","Saving notes",{count:t.length});let a=await window.electronAPI.projects.updateNotes(e,t);if(a.success)s.V.info("PROJECT_DATA","Notes saved successfully");else throw Error(a.error||"Failed to save notes")}catch(e){throw s.V.error("PROJECT_DATA","Error saving notes",e),e}},[e]);return(0,r.hb)(async e=>{C(e);try{await U(e)}catch(e){s.V.error("PROJECT_DATA","Failed to save characters automatically",e)}},[U]),(0,r.hb)(async e=>{R(e);try{await K(e)}catch(e){s.V.error("PROJECT_DATA","Failed to save notes automatically",e)}},[K]),{isLoading:d,error:m,title:h,setTitle:w,content:p,setContent:A,lastSaved:f,saveStatus:y,characters:N,setCharacters:C,structure:E,setStructure:I,notes:S,setNotes:R,writerStats:P,loadProject:V,saveProject:B,forceSave:L,updateWriterStats:z,setWordGoal:J}}},3699:(e,t,a)=>{"use strict";a.d(t,{F:()=>l});var r=a(7099),s=a(662),n=a(7117);function l(){let{resolvedTheme:e,toggleTheme:t}=(0,n.D)(),[a,l]=(0,r.J0)(!0),[o,i]=(0,r.J0)(!1),[c,d]=(0,r.J0)(!0),[u,m]=(0,r.J0)(!1),g=(0,r.hb)(()=>{l(e=>!e),s.V.debug("UI_STATE","Left sidebar toggled")},[]),h=(0,r.hb)(()=>{i(e=>!e),s.V.debug("UI_STATE","Right sidebar toggled")},[]);return{showLeftSidebar:a,showRightSidebar:o,showHeader:c,isDarkMode:"dark"===e,isFocusMode:u,toggleLeftSidebar:g,toggleRightSidebar:h,toggleDarkMode:(0,r.hb)(()=>{t(),s.V.debug("UI_STATE","Dark mode toggled via ThemeProvider")},[t]),toggleFocusMode:(0,r.hb)(()=>{m(e=>{let t=!e;return t&&(l(!1),i(!1)),s.V.info("UI_STATE","Focus mode ".concat(t?"enabled":"disabled")),t})},[]),setShowHeader:d}}},4038:()=>{},5302:(e,t,a)=>{"use strict";a.d(t,{K:()=>l});var r=a(4568);a(7620);var s=a(6856);let n={overlay:"fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-50",dialog:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",header:"flex items-center gap-3 p-6 border-b border-slate-200 dark:border-slate-700",icon:"w-8 h-8 text-red-500 flex-shrink-0",headerText:"flex-1",title:"text-lg font-bold text-slate-900 dark:text-slate-100",message:"text-sm text-slate-600 dark:text-slate-400 mt-1",closeButton:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",content:"p-6",description:"text-slate-700 dark:text-slate-300 leading-relaxed mb-4",projectName:"font-semibold text-slate-900 dark:text-slate-100",warning:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 text-sm text-red-800 dark:text-red-200",footer:"flex items-center justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",cancelButton:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",deleteButton:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-medium"};function l(e){let{isOpen:t,projectTitle:a,onConfirm:l,onCancel:o}=e;return t?(0,r.jsx)("div",{className:n.overlay,onClick:e=>{e.target===e.currentTarget&&o()},onKeyDown:e=>{"Escape"===e.key&&o()},tabIndex:-1,children:(0,r.jsxs)("div",{className:n.dialog,children:[(0,r.jsxs)("div",{className:n.header,children:[(0,r.jsx)(s.h,{className:n.icon}),(0,r.jsxs)("div",{className:n.headerText,children:[(0,r.jsx)("h3",{className:n.title,children:"프로젝트 삭제"}),(0,r.jsx)("p",{className:n.message,children:"이 작업은 되돌릴 수 없습니다"})]}),(0,r.jsx)("button",{className:n.closeButton,onClick:o,"aria-label":"닫기",children:(0,r.jsx)(s.X,{size:20})})]}),(0,r.jsxs)("div",{className:n.content,children:[(0,r.jsxs)("p",{className:n.description,children:[(0,r.jsxs)("span",{className:n.projectName,children:["“",a,"”"]})," 프로젝트를 완전히 삭제하시겠습니까?"]}),(0,r.jsxs)("div",{className:n.warning,children:["⚠️ ",(0,r.jsx)("strong",{children:"주의:"})," 삭제된 프로젝트와 모든 데이터(캐릭터, 구조, 메모 등)는 복구할 수 없습니다."]})]}),(0,r.jsxs)("div",{className:n.footer,children:[(0,r.jsx)("button",{className:n.cancelButton,onClick:o,children:"취소"}),(0,r.jsx)("button",{className:n.deleteButton,onClick:l,autoFocus:!0,children:"삭제하기"})]})]})}):null}},6034:(e,t,a)=>{"use strict";a.d(t,{z:()=>d});var r=a(4568),s=a(7620),n=a(662);let l=e=>{e&&(e.setOption("inputStyle","contenteditable"),e.setOption("lineWrapping",!0),e.setOption("styleSelectedText",!1),e.setOption("electricChars",!1),e.setOption("smartIndent",!1),e.setOption("autofocus",!0),e.setOption("workTime",200),e.setOption("workDelay",300),e.setOption("pollInterval",100),n.V.info("MARKDOWN_UTILS","Korean IME optimization applied (cursor-safe version)"))},o=()=>({autofocus:!0,spellChecker:!1,placeholder:"이야기를 시작해보세요...",status:["lines","words","cursor"],toolbar:!1,shortcuts:{toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeading1:"Cmd-Alt-1",toggleHeading2:"Cmd-Alt-2",toggleHeading3:"Cmd-Alt-3",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleUnorderedList:"Cmd-Shift-8",toggleOrderedList:"Cmd-Shift-7",toggleBlockquote:"Cmd-Shift-9",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11",toggleDarkMode:"Cmd-D"},inputStyle:"contenteditable",nativeSpellcheck:!0,previewRender:e=>'<div class="prose dark:prose-invert max-w-none">'.concat(e,"</div>"),renderingConfig:{singleLineBreaks:!1,codeSyntaxHighlighting:!0},autoDownloadFontAwesome:!1,tabSize:2,lineWrapping:!0,styleSelectedText:!1,parsingConfig:{allowAtxHeaderWithoutSpace:!0},lineNumbers:!1,mode:{name:"markdown",highlightFormatting:!1},configureMouse:()=>({addNew:!1}),indentWithTabs:!1,smartIndent:!1,electricChars:!1,rtlMoveVisually:!0,extraKeys:{"Cmd-B":function(e){let t=e.getCursor(),a=e.getSelection();a?e.replaceSelection("**".concat(a,"**")):(e.replaceSelection("****"),e.setCursor({line:t.line,ch:t.ch+2}))},"Cmd-I":function(e){let t=e.getCursor(),a=e.getSelection();a?e.replaceSelection("*".concat(a,"*")):(e.replaceSelection("**"),e.setCursor({line:t.line,ch:t.ch+1}))},"Cmd-K":function(e){let t=e.getCursor(),a=e.getSelection();if(a){e.replaceSelection("[".concat(a,"]()"));let t=e.getCursor();e.setCursor({line:t.line,ch:t.ch-1})}else e.replaceSelection("[링크 텍스트]()"),e.setSelection({line:t.line,ch:t.ch+1},{line:t.line,ch:t.ch+6})},Space:function(e){let t=e.getCursor(),a=e.getLine(t.line).substring(0,t.ch);if(a.match(/^(#{1,6})$/)||a.match(/^([-*])$/)||a.match(/^(\d+\.)$/)||a.match(/^(>)$/))return void e.replaceSelection(" ");e.replaceSelection(" ")}}}),i=()=>({...o(),toolbar:!1,status:!1}),c=(0,s.createContext)(null);function d(e){let{children:t}=e,a=(0,s.useRef)(null),d=(0,s.useCallback)(e=>{if(e&&e.codemirror)try{n.V.debug("EDITOR","Initializing editor for Korean input optimization"),l(e.codemirror),a.current=e,n.V.info("EDITOR","Editor initialized with Korean input optimization")}catch(e){n.V.error("EDITOR","Failed to initialize editor",e)}},[]);return(0,r.jsx)(c.Provider,{value:{editorRef:a,initializeEditor:d,getEditorOptions:o,getFocusModeOptions:i},children:t})}},6293:(e,t,a)=>{"use strict";a.d(t,{G:()=>i});var r=a(4568),s=a(7620),n=a(6583),l=a(662);let o={overlay:"fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-50",dialog:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full mx-4 overflow-hidden",header:"flex items-center gap-3 p-6 border-b border-slate-200 dark:border-slate-700",icon:"w-8 h-8 text-blue-500 flex-shrink-0",headerText:"flex-1",title:"text-lg font-bold text-slate-900 dark:text-slate-100",subtitle:"text-sm text-slate-600 dark:text-slate-400 mt-1",closeButton:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",content:"p-6 space-y-4",section:"space-y-3",sectionTitle:"text-sm font-medium text-slate-900 dark:text-slate-100",optionGrid:"grid grid-cols-2 gap-3",option:"flex items-center gap-3 p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors cursor-pointer",optionIcon:"w-5 h-5 text-slate-600 dark:text-slate-400",optionText:"text-sm text-slate-700 dark:text-slate-300",urlContainer:"flex items-center gap-2",urlInput:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100 font-mono",copyButton:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium flex items-center gap-2",copiedButton:"px-3 py-2 bg-green-600 text-white rounded-lg text-sm font-medium flex items-center gap-2",footer:"p-6 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400"};function i(e){let{isOpen:t,projectTitle:a,projectId:i,onClose:c}=e,[d,u]=(0,s.useState)(!1),m="https://loop-writer.app/shared/".concat(i),g=(0,s.useCallback)(async()=>{try{await navigator.clipboard.writeText(m),u(!0),l.V.info("SHARE_DIALOG","URL copied to clipboard"),setTimeout(()=>u(!1),3e3)}catch(e){l.V.error("SHARE_DIALOG","Failed to copy URL",e)}},[m]),h=(0,s.useCallback)(()=>{l.V.info("SHARE_DIALOG","Export as text requested")},[]);(0,s.useCallback)(()=>{l.V.info("SHARE_DIALOG","Export as PDF requested")},[]);let x=(0,s.useCallback)(()=>{let e=encodeURIComponent("Loop 프로젝트: ".concat(a)),t=encodeURIComponent('안녕하세요,\n\n"'.concat(a,'" 프로젝트를 공유합니다.\n\n').concat(m,"\n\nLoop Writer에서 확인해보세요!")),r="mailto:?subject=".concat(e,"&body=").concat(t);window.open(r,"_blank"),l.V.info("SHARE_DIALOG","Email sharing opened")},[a,m]);return t?(0,r.jsx)("div",{className:o.overlay,onClick:e=>{e.target===e.currentTarget&&c()},onKeyDown:e=>{"Escape"===e.key&&c()},tabIndex:-1,children:(0,r.jsxs)("div",{className:o.dialog,children:[(0,r.jsxs)("div",{className:o.header,children:[(0,r.jsx)(n._H,{className:o.icon}),(0,r.jsxs)("div",{className:o.headerText,children:[(0,r.jsx)("h3",{className:o.title,children:"프로젝트 공유"}),(0,r.jsxs)("p",{className:o.subtitle,children:["“",a,"” 작품 공유하기"]})]}),(0,r.jsx)("button",{className:o.closeButton,onClick:c,"aria-label":"닫기",children:(0,r.jsx)(n.X,{size:20})})]}),(0,r.jsxs)("div",{className:o.content,children:[(0,r.jsxs)("div",{className:o.section,children:[(0,r.jsx)("h4",{className:o.sectionTitle,children:"링크로 공유"}),(0,r.jsxs)("div",{className:o.urlContainer,children:[(0,r.jsx)("input",{type:"text",value:m,readOnly:!0,className:o.urlInput}),(0,r.jsx)("button",{className:d?o.copiedButton:o.copyButton,onClick:g,disabled:d,children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Jl,{size:16}),"복사됨"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.QR,{size:16}),"복사"]})})]})]}),(0,r.jsxs)("div",{className:o.section,children:[(0,r.jsx)("h4",{className:o.sectionTitle,children:"공유 방법"}),(0,r.jsxs)("div",{className:o.optionGrid,children:[(0,r.jsxs)("button",{className:o.option,onClick:x,children:[(0,r.jsx)(n.gE,{className:o.optionIcon}),(0,r.jsx)("span",{className:o.optionText,children:"이메일"})]}),(0,r.jsxs)("button",{className:o.option,onClick:h,children:[(0,r.jsx)(n.f5,{className:o.optionIcon}),(0,r.jsx)("span",{className:o.optionText,children:"텍스트 파일"})]})]})]})]}),(0,r.jsx)("div",{className:o.footer,children:"\uD83D\uDCA1 공유된 프로젝트는 읽기 전용으로 제공됩니다. 원본 편집은 작성자만 가능합니다."})]})}):null}},6580:(e,t,a)=>{"use strict";a.d(t,{H:()=>d});var r=a(4568),s=a(7620),n=a(6740),l=a(1125),o=a(2064),i=a(662);let c={rightSidebar:"w-80 bg-white dark:bg-slate-900 border-l border-slate-200 dark:border-slate-800 flex flex-col transition-all duration-300 ease-in-out",rightSidebarCollapsed:"w-0 overflow-hidden transition-all duration-300 ease-in-out",rightSidebarHeader:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-800",rightSidebarTitle:"text-lg font-semibold text-slate-900 dark:text-slate-100",iconButton:"flex items-center justify-center w-9 h-9 rounded-lg transition-colors hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400",statCard:"bg-slate-50 dark:bg-slate-800 rounded-lg p-3 mb-3",statTitle:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",statValue:"text-lg font-bold text-slate-900 dark:text-slate-100",statSubtext:"text-xs text-slate-500 dark:text-slate-400",tabs:"flex border-b border-slate-200 dark:border-slate-800",tab:"px-4 py-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 cursor-pointer",tabActive:"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 cursor-pointer",chatContainer:"flex flex-col h-full overflow-hidden",chatMessages:"flex-1 overflow-y-auto px-2 py-3 space-y-3 max-h-[calc(100%-60px)]",chatMessage:"p-3 rounded-lg text-sm break-words whitespace-pre-wrap max-w-[90%]",userMessage:"bg-blue-100 dark:bg-blue-900/40 ml-8 mr-2 text-slate-800 dark:text-slate-200",aiMessage:"bg-slate-100 dark:bg-slate-800 ml-2 mr-8 text-slate-800 dark:text-slate-200 overflow-auto",chatInputContainer:"flex p-2 border-t border-slate-200 dark:border-slate-800 mt-auto",chatInput:"flex-1 rounded-l-md px-3 py-2 border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-1 focus:ring-blue-600 dark:focus:ring-blue-500",chatSendButton:"flex items-center justify-center px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-r-md transition-colors disabled:bg-blue-400 disabled:cursor-not-allowed",loadingDots:"flex space-x-1 items-center justify-center py-2",loadingDot:"w-2 h-2 bg-slate-400 rounded-full animate-pulse"};function d(e){let{showRightSidebar:t,toggleRightSidebar:a,writerStats:d,setWordGoal:u,currentText:m="",projectId:g}=e,[h,x]=(0,s.useState)("stats"),[p,b]=(0,s.useState)(null),[f,v]=(0,s.useState)({}),[y,T]=(0,s.useState)([]),[j,k]=(0,s.useState)(""),[w,A]=(0,s.useState)(!1),N=(0,s.useRef)(null),[C]=(0,s.useState)(()=>Date.now()),[E,I]=(0,s.useState)(null),[S,R]=(0,s.useState)(0),P=(0,s.useRef)(null),D=(0,s.useCallback)(async e=>{try{var t,a;let r={role:"user",content:e};if(T(e=>[...e,r]),A(!0),i.V.info("AI_CHAT","AI request started",{preview:e.substring(0,30)+"..."}),null==(a=window.electronAPI)||null==(t=a.ai)?void 0:t.sendMessage){let t=await window.electronAPI.ai.sendMessage(e);if(i.V.info("AI_CHAT","AI response status",{success:t.success}),!t.success)throw Error(t.error||"AI 응답 실패");let a=t.data;i.V.info("AI_CHAT","AI response received",{preview:(null==a?void 0:a.response)?"".concat(a.response.substring(0,30),"..."):"No response"});let r={role:"ai",content:(null==a?void 0:a.response)||"죄송합니다, 응답을 생성하지 못했습니다."};T(e=>[...e,r])}else{let t,a;i.V.warn("AI_CHAT","Electron API not available, using fetch fallback");try{if(!(t=await fetch("https://loop-openai.onrender.com/api/chat",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({message:e})})).ok)throw Error("Primary API 응답 에러: ".concat(t.status," - ").concat(t.statusText));a=await t.json(),i.V.info("AI_CHAT","AI response success (primary)",{preview:a.response?"".concat(a.response.substring(0,30),"..."):"No response"})}catch(r){i.V.warn("AI_CHAT","Primary API failed, trying fallback",r);try{if(!(t=await fetch("http://0.0.0.0:8080/api/chat",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({message:e})})).ok)throw Error("Fallback API 응답 에러: ".concat(t.status," - ").concat(t.statusText));a=await t.json(),i.V.info("AI_CHAT","AI response success (fallback)",{preview:a.response?"".concat(a.response.substring(0,30),"..."):"No response"})}catch(e){throw i.V.error("AI_CHAT","All APIs failed",{primaryError:r,fallbackError:e}),Error("모든 API 엔드포인트에서 응답을 받을 수 없습니다.")}}let r={role:"ai",content:a.response||"죄송합니다, 응답을 생성하지 못했습니다."};T(e=>[...e,r])}}catch(t){i.V.error("AI_CHAT","AI response error",t);let e={role:"ai",content:"죄송합니다. 응답을 생성하는 중 오류가 발생했습니다. 다시 시도해주세요."};T(t=>[...t,e])}finally{A(!1),k(""),setTimeout(()=>{var e;null==(e=N.current)||e.scrollIntoView({behavior:"smooth"})},100)}},[y,g]),V=(0,s.useCallback)(e=>{null==e||e.preventDefault(),j.trim()&&!w&&D(j.trim())},[j,w,D]);(0,s.useEffect)(()=>{if(m){let e=(0,o.H0)(m,d.wordGoal,C);I(e),e.wordCount!==S&&R(e.wordCount)}},[m,d.wordGoal,C,S]),(0,s.useEffect)(()=>(P.current=setInterval(()=>{m&&I((0,o.H0)(m,d.wordGoal,C))},1e3),()=>{P.current&&clearInterval(P.current)}),[m,d.wordGoal,C]);let _=E||d;(0,s.useEffect)(()=>{N.current&&N.current.scrollIntoView({behavior:"smooth"})},[y]);let O=(0,s.useCallback)(async()=>{if(!m||0===m.trim().length)return void i.V.warn("WRITER_STATS","No text to improve");b("improve");try{var e,t;let a,r;i.V.info("WRITER_STATS","Requesting text improvement",{textLength:m.length});let s=JSON.stringify({message:"다음 텍스트의 문장을 더 생생하고 흥미롭게 개선해주세요. 2-3개 예시를 들어 어떻게 개선할 수 있는지 보여주세요:\n\n".concat(m.substring(0,500),"...")}),n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:s};try{if(i.V.info("WRITER_STATS","Trying primary API endpoint"),!(a=await fetch("http://0.0.0.0:8080/api/chat",n)).ok)throw Error("Primary API 응답 에러: ".concat(a.status," - ").concat(a.statusText));r=await a.json(),i.V.info("WRITER_STATS","Primary API success",{responseLength:(null==(e=r.response)?void 0:e.length)||0})}catch(e){i.V.warn("WRITER_STATS","Primary API failed, trying fallback",e);try{if(i.V.info("WRITER_STATS","Trying fallback API endpoint"),!(a=await fetch("https://loop-openai.onrender.com/api/chat",n)).ok)throw Error("Fallback API 응답 에러: ".concat(a.status," - ").concat(a.statusText));r=await a.json(),i.V.info("WRITER_STATS","Fallback API success",{responseLength:(null==(t=r.response)?void 0:t.length)||0})}catch(t){throw i.V.error("WRITER_STATS","Both APIs failed",{primaryError:e,fallbackError:t}),Error("모든 API 엔드포인트에서 응답을 받을 수 없습니다.")}}v(e=>({...e,improve:r.response||"문장 개선에 대한 제안을 생성하지 못했습니다. 다시 시도해주세요."}))}catch(e){i.V.error("WRITER_STATS","Text improvement error",e),v(e=>({...e,improve:"죄송합니다, 문장 개선 중 오류가 발생했습니다. 다시 시도해주세요."}))}finally{b(null)}},[m,g]),L=(0,s.useCallback)(async()=>{if(!g)return void i.V.warn("WRITER_STATS","No project ID for character analysis");b("character");try{var e,t;let a,r;i.V.info("WRITER_STATS","Requesting character analysis",{projectId:g});let s=m||"프로젝트에 대한 캐릭터 분석을 진행합니다.",n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({message:"다음 이야기에 등장하는 캐릭터들을 분석해주세요. 각 캐릭터의 강점, 약점, 동기, 발전 방향 등을 제시해주세요:\n\n".concat(s.substring(0,1e3),"...")})};try{if(i.V.info("WRITER_STATS","Trying primary API endpoint for character analysis"),!(a=await fetch("http://0.0.0.0:8080/api/chat",n)).ok)throw Error("Primary API 응답 에러: ".concat(a.status," - ").concat(a.statusText));r=await a.json(),i.V.info("WRITER_STATS","Primary API success for character analysis",{responseLength:(null==(e=r.response)?void 0:e.length)||0})}catch(e){i.V.warn("WRITER_STATS","Primary API failed for character analysis, trying fallback",e);try{if(i.V.info("WRITER_STATS","Trying fallback API endpoint for character analysis"),!(a=await fetch("https://loop-openai.onrender.com/api/chat",n)).ok)throw Error("Fallback API 응답 에러: ".concat(a.status," - ").concat(a.statusText));r=await a.json(),i.V.info("WRITER_STATS","Fallback API success for character analysis",{responseLength:(null==(t=r.response)?void 0:t.length)||0})}catch(t){throw i.V.error("WRITER_STATS","Both APIs failed for character analysis",{primaryError:e,fallbackError:t}),Error("모든 API 엔드포인트에서 응답을 받을 수 없습니다.")}}v(e=>({...e,character:r.response||"캐릭터 분석을 생성하지 못했습니다. 다시 시도해주세요."}))}catch(e){i.V.error("WRITER_STATS","Character analysis error",e),v(e=>({...e,character:"죄송합니다, 캐릭터 분석 중 오류가 발생했습니다. 다시 시도해주세요."}))}finally{b(null)}},[g,m]),H=(0,s.useCallback)(async()=>{if(!m||0===m.trim().length)return void i.V.warn("WRITER_STATS","No text for plot analysis");b("plot");try{var e,t;let a,r;i.V.info("WRITER_STATS","Requesting plot analysis",{textLength:m.length});let s={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({message:"다음 이야기의 플롯 구조를 3막 구조에 맞춰 분석하고, 흐름과 페이스를 평가한 다음, 개선점을 제시해주세요:\n\n".concat(m.substring(0,1e3),"...")})};try{if(i.V.info("WRITER_STATS","Trying primary API endpoint for plot analysis"),!(a=await fetch("http://0.0.0.0:8080/api/chat",s)).ok)throw Error("Primary API 응답 에러: ".concat(a.status," - ").concat(a.statusText));r=await a.json(),i.V.info("WRITER_STATS","Primary API success for plot analysis",{responseLength:(null==(e=r.response)?void 0:e.length)||0})}catch(e){i.V.warn("WRITER_STATS","Primary API failed for plot analysis, trying fallback",e);try{if(i.V.info("WRITER_STATS","Trying fallback API endpoint for plot analysis"),!(a=await fetch("https://loop-openai.onrender.com/api/chat",s)).ok)throw Error("Fallback API 응답 에러: ".concat(a.status," - ").concat(a.statusText));r=await a.json(),i.V.info("WRITER_STATS","Fallback API success for plot analysis",{responseLength:(null==(t=r.response)?void 0:t.length)||0})}catch(t){throw i.V.error("WRITER_STATS","Both APIs failed for plot analysis",{primaryError:e,fallbackError:t}),Error("모든 API 엔드포인트에서 응답을 받을 수 없습니다.")}}v(e=>({...e,plot:r.response||"플롯 분석을 생성하지 못했습니다. 다시 시도해주세요."}))}catch(e){i.V.error("WRITER_STATS","Plot analysis error",e),v(e=>({...e,plot:"죄송합니다, 플롯 분석 중 오류가 발생했습니다. 다시 시도해주세요."}))}finally{b(null)}},[m]),B=(0,s.useCallback)(async()=>{if(!m||0===m.trim().length)return void i.V.warn("WRITER_STATS","No text for dialogue improvement");b("dialogue");try{var e,t;let a,r;i.V.info("WRITER_STATS","Requesting dialogue improvement",{textLength:m.length});let s={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({message:"다음 이야기에서 대화를 분석하고, 더 자연스럽고 캐릭터를 잘 표현하는 대화 예시를 제안해주세요:\n\n".concat(m.substring(0,800),"...")})};try{if(i.V.info("WRITER_STATS","Trying primary API endpoint for dialogue improvement"),!(a=await fetch("http://0.0.0.0:8080/api/chat",s)).ok)throw Error("Primary API 응답 에러: ".concat(a.status," - ").concat(a.statusText));r=await a.json(),i.V.info("WRITER_STATS","Primary API success for dialogue improvement",{responseLength:(null==(e=r.response)?void 0:e.length)||0})}catch(e){i.V.warn("WRITER_STATS","Primary API failed for dialogue improvement, trying fallback",e);try{if(i.V.info("WRITER_STATS","Trying fallback API endpoint for dialogue improvement"),!(a=await fetch("https://loop-openai.onrender.com/api/chat",s)).ok)throw Error("Fallback API 응답 에러: ".concat(a.status," - ").concat(a.statusText));r=await a.json(),i.V.info("WRITER_STATS","Fallback API success for dialogue improvement",{responseLength:(null==(t=r.response)?void 0:t.length)||0})}catch(t){throw i.V.error("WRITER_STATS","Both APIs failed for dialogue improvement",{primaryError:e,fallbackError:t}),Error("모든 API 엔드포인트에서 응답을 받을 수 없습니다.")}}v(e=>({...e,dialogue:r.response||"대화 개선 제안을 생성하지 못했습니다. 다시 시도해주세요."}))}catch(e){i.V.error("WRITER_STATS","Dialogue improvement error",e),v(e=>({...e,dialogue:"죄송합니다, 대화 분석 중 오류가 발생했습니다. 다시 시도해주세요."}))}finally{b(null)}},[m]);return(0,r.jsxs)("div",{className:t?c.rightSidebar:c.rightSidebarCollapsed,children:[(0,r.jsxs)("div",{className:c.rightSidebarHeader,children:[(0,r.jsx)("h2",{className:c.rightSidebarTitle,children:"stats"===h?"작가 통계":"AI 창작 파트너"}),(0,r.jsx)("button",{className:c.iconButton,onClick:a,children:(0,r.jsx)(l.c_,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:c.tabs,children:[(0,r.jsx)("div",{className:"stats"===h?c.tabActive:c.tab,onClick:()=>x("stats"),children:"통계"}),(0,r.jsx)("div",{className:"ai"===h?c.tabActive:c.tab,onClick:()=>x("ai"),children:"AI"})]}),"stats"===h&&(0,r.jsxs)("div",{className:"p-3 overflow-y-auto",children:[(0,r.jsxs)("div",{className:c.statCard,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("span",{className:c.statTitle,children:"단어 목표"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{className:c.iconButton,onClick:()=>u(Math.max(500,_.wordGoal-500)),children:(0,r.jsx)(l.Hs,{className:"w-3 h-3"})}),(0,r.jsx)("span",{className:"text-xs mx-1",children:_.wordGoal.toLocaleString()}),(0,r.jsx)("button",{className:c.iconButton,onClick:()=>u(_.wordGoal+500),children:(0,r.jsx)(l.FW,{className:"w-3 h-3"})})]})]}),(0,r.jsx)("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2",children:(0,r.jsx)("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(100,_.progress),"%")}})}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400",children:[(0,r.jsxs)("span",{children:[_.wordCount.toLocaleString()," 단어"]}),(0,r.jsxs)("span",{children:[_.progress,"%"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,r.jsxs)("div",{className:c.statCard,children:[(0,r.jsx)("span",{className:c.statTitle,children:"단어 수"}),(0,r.jsx)("div",{className:c.statValue,children:_.wordCount.toLocaleString()}),(0,r.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[_.wordCount>S?"↗":_.wordCount<S?"↘":"→","실시간"]})]}),(0,r.jsxs)("div",{className:c.statCard,children:[(0,r.jsx)("span",{className:c.statTitle,children:"문자 수"}),(0,r.jsx)("div",{className:c.statValue,children:_.charCount.toLocaleString()}),(0,r.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"공백 포함"})]}),(0,r.jsxs)("div",{className:c.statCard,children:[(0,r.jsx)("span",{className:c.statTitle,children:"단락 수"}),(0,r.jsx)("div",{className:c.statValue,children:_.paragraphCount}),(0,r.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"구조 분석"})]}),(0,r.jsxs)("div",{className:c.statCard,children:[(0,r.jsx)("span",{className:c.statTitle,children:"읽기 시간"}),(0,r.jsxs)("div",{className:c.statValue,children:[_.readingTime,"분"]}),(0,r.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"200 WPM 기준"})]})]}),(0,r.jsxs)("div",{className:c.statCard,children:[(0,r.jsx)("span",{className:c.statTitle,children:"현재 세션"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:c.statValue,children:(0,o.fU)(_.sessionTime)}),(0,r.jsx)("div",{className:c.statSubtext,children:"글쓰기 시간"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:c.statValue,children:_.wpm>0?_.wpm:0}),(0,r.jsx)("div",{className:c.statSubtext,children:"WPM"})]})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 mb-1",children:[(0,r.jsx)("span",{children:"타이핑 속도"}),(0,r.jsx)("span",{children:_.wpm<30?"천천히":_.wpm<60?"보통":_.wpm<90?"빠름":"매우 빠름"})]}),(0,r.jsx)("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-1",children:(0,r.jsx)("div",{className:"h-1 rounded-full transition-all duration-300 ".concat(_.wpm<30?"bg-red-400":_.wpm<60?"bg-yellow-400":_.wpm<90?"bg-green-400":"bg-blue-400"),style:{width:"".concat(Math.min(100,_.wpm/120*100),"%")}})})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full mr-2 animate-pulse"}),(0,r.jsx)("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"창작 파트너"})]}),(0,r.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"✨ 함께 써봐요"})]}),0===Object.keys(f).length&&(0,r.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 p-4 rounded-lg mb-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"text-2xl mr-3",children:"\uD83C\uDF1F"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"오늘도 멋진 이야기를 써보시네요!"}),(0,r.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400 leading-relaxed",children:"무엇을 도와드릴까요? 새로운 아이디어가 필요하거나, 막힌 부분을 뚫고 싶으시면 언제든 말씀해주세요."})]})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(n.$,{size:"sm",variant:"outline",className:"w-full justify-start hover:bg-blue-50 dark:hover:bg-blue-900/20 border-blue-200 dark:border-blue-800",onClick:O,disabled:"improve"===p||!m,children:["improve"===p?(0,r.jsx)(l.kr,{className:"w-4 h-4 mr-2 animate-spin text-blue-500"}):(0,r.jsx)(l.sU,{className:"w-4 h-4 mr-2 text-blue-500"}),"✨ 문장을 더 매력적으로 만들어봐요"]}),(0,r.jsxs)(n.$,{size:"sm",variant:"outline",className:"w-full justify-start hover:bg-purple-50 dark:hover:bg-purple-900/20 border-purple-200 dark:border-purple-800",onClick:L,disabled:"character"===p||!g,children:["character"===p?(0,r.jsx)(l.kr,{className:"w-4 h-4 mr-2 animate-spin text-purple-500"}):(0,r.jsx)(l.zW,{className:"w-4 h-4 mr-2 text-purple-500"}),"\uD83D\uDC65 캐릭터들이 잘 살아있는지 볼까요?"]}),(0,r.jsxs)(n.$,{size:"sm",variant:"outline",className:"w-full justify-start hover:bg-green-50 dark:hover:bg-green-900/20 border-green-200 dark:border-green-800",onClick:H,disabled:"plot"===p||!m,children:["plot"===p?(0,r.jsx)(l.kr,{className:"w-4 h-4 mr-2 animate-spin text-green-500"}):(0,r.jsx)(l.T5,{className:"w-4 h-4 mr-2 text-green-500"}),"\uD83D\uDDFA️ 이야기 흐름을 함께 점검해볼까요?"]}),(0,r.jsxs)(n.$,{size:"sm",variant:"outline",className:"w-full justify-start hover:bg-orange-50 dark:hover:bg-orange-900/20 border-orange-200 dark:border-orange-800",onClick:B,disabled:"dialogue"===p||!m,children:["dialogue"===p?(0,r.jsx)(l.kr,{className:"w-4 h-4 mr-2 animate-spin text-orange-500"}):(0,r.jsx)(l.vE,{className:"w-4 h-4 mr-2 text-orange-500"}),"\uD83D\uDCAC 대화가 자연스럽게 들리나요?"]})]}),Object.keys(f).length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"창작 조언"}),(0,r.jsx)("div",{className:"w-1 h-1 bg-slate-400 rounded-full mx-2"}),(0,r.jsx)("div",{className:"text-xs text-slate-500",children:"함께 만든 결과"})]}),(0,r.jsx)("button",{onClick:()=>v({}),className:"text-xs text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:"모두 지우기"})]}),(0,r.jsx)("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:Object.entries(f).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"border p-4 rounded-lg transition-all duration-200 ".concat("improve"===t?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"character"===t?"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800":"plot"===t?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"dialogue"===t?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:["improve"===t&&(0,r.jsx)(l.sU,{className:"w-4 h-4 mr-2 text-blue-500"}),"character"===t&&(0,r.jsx)(l.zW,{className:"w-4 h-4 mr-2 text-purple-500"}),"plot"===t&&(0,r.jsx)(l.T5,{className:"w-4 h-4 mr-2 text-green-500"}),"dialogue"===t&&(0,r.jsx)(l.vE,{className:"w-4 h-4 mr-2 text-orange-500"}),(0,r.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"improve"===t?"✨ 문장 개선 조언":"character"===t?"\uD83D\uDC65 캐릭터 분석":"plot"===t?"\uD83D\uDDFA️ 플롯 점검":"dialogue"===t?"\uD83D\uDCAC 대화 개선":t})]}),(0,r.jsx)("button",{onClick:()=>v(e=>{let a={...e};return delete a[t],a}),className:"text-xs text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:"✕"})]}),(0,r.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400 leading-relaxed whitespace-pre-wrap break-words max-h-80 overflow-y-auto",children:a}),(0,r.jsx)("div",{className:"mt-2 pt-2 border-t border-slate-200 dark:border-slate-600",children:(0,r.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["\uD83D\uDCA1 ",(0,r.jsx)("span",{className:"italic",children:"이 조언이 도움이 되셨나요? 더 구체적인 도움이 필요하시면 언제든 말씀해주세요!"})]})})]},t)})})]})]})]}),"ai"===h&&(0,r.jsxs)("div",{className:"".concat(c.chatContainer," h-full"),children:[(0,r.jsx)("div",{className:c.chatMessages,children:0===y.length?(0,r.jsxs)("div",{className:"text-center py-6 px-3 text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm mx-2",children:[(0,r.jsx)(l.sU,{className:"mx-auto w-8 h-8 mb-2 text-blue-500 opacity-90"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:"AI 창작 파트너에게 질문하세요"}),(0,r.jsxs)("p",{className:"text-xs mt-2 leading-relaxed",children:["작품 구조, 캐릭터, 대화, 문체 등에 대한 도움을 받을 수 있습니다.",(0,r.jsx)("br",{}),"예시: “판타지 소설의 마법 체계를 만들어줘”",(0,r.jsx)("br",{}),"또는 “이 캐릭터를 더 흥미롭게 만드는 방법은?”"]})]}):(0,r.jsxs)(r.Fragment,{children:[y.map((e,t)=>(0,r.jsxs)("div",{className:"".concat(c.chatMessage," ").concat("user"===e.role?c.userMessage:c.aiMessage),children:["ai"===e.role&&(0,r.jsx)(r.Fragment,{children:e.content.replace(/^# (.*)/gm,"**$1**").replace(/^## (.*)/gm,"**$1**").replace(/^### (.*)/gm,"**$1**")}),"user"===e.role&&e.content]},t)),w&&(0,r.jsx)("div",{className:"".concat(c.chatMessage," ").concat(c.aiMessage),children:(0,r.jsxs)("div",{className:c.loadingDots,children:[(0,r.jsx)("span",{className:"".concat(c.loadingDot," animate-pulse")}),(0,r.jsx)("span",{className:"".concat(c.loadingDot," animate-pulse delay-150")}),(0,r.jsx)("span",{className:"".concat(c.loadingDot," animate-pulse delay-300")})]})}),(0,r.jsx)("div",{ref:N})]})}),(0,r.jsxs)("div",{className:c.chatInputContainer,children:[(0,r.jsx)("input",{type:"text",value:j,onChange:e=>k(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&V(),placeholder:"메시지 보내기...",className:c.chatInput,disabled:w}),(0,r.jsx)("button",{className:c.chatSendButton,onClick:()=>V(),disabled:w||!j.trim(),children:(0,r.jsx)(l.Vn,{className:"w-4 h-4"})})]})]})]})}},6948:(e,t,a)=>{"use strict";a.d(t,{m:()=>i});var r=a(4568),s=a(7620),n=a(3930);let l={container:"flex flex-col bg-gray-50 dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 h-full",collapsed:"w-12",expanded:"w-64",scrollArea:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",menuSection:"p-3 space-y-1",menuItem:"flex items-center gap-3 px-3 py-2 text-sm font-medium transition-colors duration-200 cursor-pointer rounded-md",menuItemActive:"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",menuItemInactive:"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",sectionHeader:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2 px-3",structureList:"space-y-1 px-3",structureItem:"flex items-center gap-2 py-1.5 text-sm text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer transition-colors",statsSection:"p-3 border-t border-gray-200 dark:border-gray-700",statItem:"flex justify-between items-center py-1 text-sm",statLabel:"text-gray-600 dark:text-gray-400",statValue:"font-medium text-gray-900 dark:text-gray-100"},o=[{id:"write",label:"글쓰기",icon:n.W7},{id:"structure",label:"구조",icon:n.iU},{id:"characters",label:"인물",icon:n.zW},{id:"notes",label:"메모",icon:n.Gy}];function i(e){let{currentView:t,onViewChange:a,structure:i,characters:c,stats:d,collapsed:u}=e,[m,g]=(0,s.useState)(new Set(["structure"]));return u?(0,r.jsx)("div",{className:"".concat(l.container," ").concat(l.collapsed),children:(0,r.jsx)("div",{className:l.menuSection,children:o.map(e=>(0,r.jsx)("button",{onClick:()=>a(e.id),className:"w-8 h-8 flex items-center justify-center rounded-md transition-colors ".concat(t===e.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),title:e.label,children:(0,r.jsx)(e.icon,{size:16})},e.id))})}):(0,r.jsxs)("div",{className:"".concat(l.container," ").concat(l.expanded),children:[(0,r.jsx)("div",{className:l.menuSection,children:o.map(e=>(0,r.jsxs)("button",{onClick:()=>a(e.id),className:"".concat(l.menuItem," ").concat(t===e.id?l.menuItemActive:l.menuItemInactive),children:[(0,r.jsx)(e.icon,{size:16}),(0,r.jsx)("span",{children:e.label})]},e.id))}),(0,r.jsxs)("div",{className:l.scrollArea,children:["write"===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)("h3",{className:l.sectionHeader,children:"프로젝트 구조"}),(0,r.jsx)("div",{className:l.structureList,children:i.map((e,t)=>(0,r.jsxs)("div",{className:l.structureItem,children:[(0,r.jsx)(n.jl,{size:12,className:"text-blue-500"}),(0,r.jsx)("span",{className:"flex-1",children:"".concat(t+1,"장: ").concat(e.title)}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:e.status})]},e.id))})]}),(0,r.jsxs)("div",{className:l.statsSection,children:[(0,r.jsx)("h3",{className:l.sectionHeader,children:"글쓰기 통계"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:l.statItem,children:[(0,r.jsx)("span",{className:l.statLabel,children:"단어"}),(0,r.jsx)("span",{className:l.statValue,children:d.wordCount})]}),(0,r.jsxs)("div",{className:l.statItem,children:[(0,r.jsx)("span",{className:l.statLabel,children:"문자"}),(0,r.jsx)("span",{className:l.statValue,children:d.charCount})]}),(0,r.jsxs)("div",{className:l.statItem,children:[(0,r.jsx)("span",{className:l.statLabel,children:"진행률"}),(0,r.jsxs)("span",{className:l.statValue,children:[d.progress,"%"]})]})]})]})]}),"structure"===t&&(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:l.sectionHeader,children:"구조 관리"}),(0,r.jsx)("button",{className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:(0,r.jsx)(n.FW,{size:16})})]}),(0,r.jsxs)("div",{className:l.structureList,children:[i.map((e,t)=>(0,r.jsxs)("div",{className:"".concat(l.structureItem," justify-between"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(n.jl,{size:12,className:"text-blue-500"}),(0,r.jsx)("span",{className:"flex-1",children:"".concat(t+1,"장: ").concat(e.title)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-xs text-gray-400",children:e.status}),(0,r.jsx)("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(n.a4,{size:12})})]})]},e.id)),0===i.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)(n.iU,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"구조를 추가해보세요"})]})]})]}),"characters"===t&&(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:l.sectionHeader,children:"인물 관리"}),(0,r.jsx)("button",{className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:(0,r.jsx)(n.FW,{size:16})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[c.map(e=>(0,r.jsxs)("div",{className:"".concat(l.structureItem," justify-between"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white text-xs font-medium",children:e.name.charAt(0)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:e.name}),e.role&&(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.role})]})]}),(0,r.jsx)("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(n.a4,{size:12})})]},e.id)),0===c.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)(n.zW,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"인물을 추가해보세요"})]})]})]}),"notes"===t&&(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:l.sectionHeader,children:"메모 관리"}),(0,r.jsx)("button",{className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:(0,r.jsx)(n.FW,{size:16})})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)(n.Gy,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"메모를 추가해보세요"})]})})]})]})]})}},7959:(e,t,a)=>{"use strict";a.d(t,{S:()=>i});var r=a(4568),s=a(7620),n=a(8627),l=a(9066);let o={trigger:"fixed bottom-4 right-4 z-50 w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center shadow-lg transition-colors cursor-pointer",modal:"fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-50",panel:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden",header:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",title:"text-xl font-bold text-slate-900 dark:text-slate-100",closeButton:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",content:"p-6 overflow-y-auto",helpText:"prose prose-slate dark:prose-invert max-w-none text-sm",footer:"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-between",hideButton:"flex items-center text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"};function i(e){let{className:t="",isWriterStatsOpen:a=!1}=e,[i,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("shortcutHelp.isVisible");null!==e&&u("true"===e)},[]);let m=()=>{c(!1)};return((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&i&&m()},t=()=>{c(e=>!e)};return document.addEventListener("keydown",e),window.addEventListener("shortcut:help",t),()=>{document.removeEventListener("keydown",e),window.removeEventListener("shortcut:help",t)}},[i]),(0,s.useEffect)(()=>{a&&c(!1)},[a]),d)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"".concat(o.trigger," ").concat(t),onClick:()=>{c(e=>!e)},title:"단축키 도움말 (F1)","aria-label":"단축키 도움말",children:(0,r.jsx)(n.m,{size:24})}),i&&(0,r.jsx)("div",{className:o.modal,onClick:e=>{e.target===e.currentTarget&&m()},children:(0,r.jsxs)("div",{className:o.panel,children:[(0,r.jsxs)("div",{className:o.header,children:[(0,r.jsx)("h2",{className:o.title,children:"키보드 단축키"}),(0,r.jsx)("button",{className:o.closeButton,onClick:m,"aria-label":"닫기",children:(0,r.jsx)(n.X,{size:20})})]}),(0,r.jsx)("div",{className:o.content,children:(0,r.jsx)("div",{className:o.helpText,children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,l.ge)().replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/# (.*?)(\n|<br>)/g,'<h1 class="text-xl font-bold mt-4 mb-2">$1</h1>').replace(/## (.*?)(\n|<br>)/g,'<h2 class="text-lg font-bold mt-3 mb-2">$1</h2>').replace(/### (.*?)(\n|<br>)/g,'<h3 class="text-md font-bold mt-2 mb-1">$1</h3>')}})})}),(0,r.jsxs)("div",{className:o.footer,children:[(0,r.jsx)("div",{})," ",(0,r.jsxs)("button",{className:o.hideButton,onClick:()=>{confirm("단축키 가이드를 항상 숨기시겠습니까? 설정 페이지에서 다시 표시할 수 있습니다.")&&(u(!1),c(!1),localStorage.setItem("shortcutHelp.isVisible","false"))},title:"이 가이드를 항상 숨기기","aria-label":"가이드 숨기기",children:[(0,r.jsx)(n.o,{size:16,className:"mr-2"}),"가이드 숨기기"]})]})]})})]}):(0,r.jsx)(r.Fragment,{})}},9066:(e,t,a)=>{"use strict";a.d(t,{RW:()=>o,YV:()=>n,ge:()=>l});var r=a(662);let s=/Mac|iPod|iPhone|iPad/.test(navigator.platform),n=[{key:"b",modifier:!0,action:e=>(e.chain().focus().toggleBold().run(),r.V.debug("EDITOR_SHORTCUTS","Bold toggled"),!0),description:"볼드 토글"},{key:"i",modifier:!0,action:e=>(e.chain().focus().toggleItalic().run(),r.V.debug("EDITOR_SHORTCUTS","Italic toggled"),!0),description:"이탤릭 토글"},{key:"u",modifier:!0,action:e=>(e.chain().focus().toggleUnderline().run(),r.V.debug("EDITOR_SHORTCUTS","Underline toggled"),!0),description:"언더라인 토글"},{key:"s",modifier:!0,shift:!0,action:e=>(e.chain().focus().toggleStrike().run(),r.V.debug("EDITOR_SHORTCUTS","Strikethrough toggled"),!0),description:"취소선 토글"},{key:"k",modifier:!0,action:e=>(r.V.debug("EDITOR_SHORTCUTS","Link shortcut triggered"),!0),description:"링크 생성"},{key:"1",modifier:!0,alt:!0,action:e=>(e.chain().focus().toggleHeading({level:1}).run(),r.V.debug("EDITOR_SHORTCUTS","H1 toggled"),!0),description:"제목 1"},{key:"2",modifier:!0,alt:!0,action:e=>(e.chain().focus().toggleHeading({level:2}).run(),r.V.debug("EDITOR_SHORTCUTS","H2 toggled"),!0),description:"제목 2"},{key:"3",modifier:!0,alt:!0,action:e=>(e.chain().focus().toggleHeading({level:3}).run(),r.V.debug("EDITOR_SHORTCUTS","H3 toggled"),!0),description:"제목 3"},{key:"0",modifier:!0,alt:!0,action:e=>(e.chain().focus().setParagraph().run(),r.V.debug("EDITOR_SHORTCUTS","Paragraph set"),!0),description:"일반 텍스트"},{key:"8",modifier:!0,shift:!0,action:e=>(e.chain().focus().toggleBulletList().run(),r.V.debug("EDITOR_SHORTCUTS","Bullet list toggled"),!0),description:"불릿 리스트"},{key:"7",modifier:!0,shift:!0,action:e=>(e.chain().focus().toggleOrderedList().run(),r.V.debug("EDITOR_SHORTCUTS","Ordered list toggled"),!0),description:"번호 리스트"},{key:"s",modifier:!0,action:e=>{let t=new CustomEvent("editor:save");return window.dispatchEvent(t),r.V.info("EDITOR_SHORTCUTS","Save triggered"),!0},description:"저장"}];function l(){let e=s?"⌘":"Ctrl",t=s?"⌥":"Alt";return"\n\uD83D\uDCDD **텍스트 포맷팅**\n• ".concat(e,"+B: 볼드\n• ").concat(e,"+I: 이탤릭  \n• ").concat(e,"+U: 언더라인\n• ").concat(e,"+Shift+S: 취소선\n• ").concat(e,"+K: 링크\n\n\uD83D\uDCC4 **헤딩**\n• ").concat(e,"+").concat(t,"+1: 제목 1\n• ").concat(e,"+").concat(t,"+2: 제목 2\n• ").concat(e,"+").concat(t,"+3: 제목 3\n• ").concat(e,"+").concat(t,"+0: 일반 텍스트\n\n\uD83D\uDCCB **리스트**\n• ").concat(e,"+Shift+8: 불릿 리스트\n• ").concat(e,"+Shift+7: 번호 리스트\n\n\uD83D\uDCBE **저장**\n• ").concat(e,"+S: 저장\n").trim()}function o(e){return e?(r.V.info("EDITOR_SHORTCUTS","Shortcuts system initialized",{shortcutCount:n.length,platform:s?"macOS":"Windows/Linux"}),()=>{r.V.debug("EDITOR_SHORTCUTS","Shortcuts system cleaned up")}):()=>{}}},9811:(e,t,a)=>{"use strict";a.d(t,{z:()=>i});var r=a(4568),s=a(7620),n=a(1964),l=a(662);let o={header:"flex items-center justify-between px-4 py-3 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",headerLeft:"flex items-center gap-3",headerCenter:"flex-1 max-w-md mx-auto",headerRight:"flex items-center gap-2 relative",backButton:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",titleInput:"border-none bg-transparent focus:outline-none focus:ring-0 text-lg font-medium w-full placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100",iconButton:"flex items-center justify-center w-9 h-9 rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 relative group",iconButtonActive:"flex items-center justify-center w-9 h-9 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 relative group",slidebarOverlay:"fixed inset-0 bg-black/50 z-30"};function i(e){let{title:t,onTitleChange:a,onBack:i,sidebarCollapsed:c,onToggleSidebar:d,showRightSidebar:u=!1,onToggleAISidebar:m,isFocusMode:g,onToggleFocusMode:h,onSave:x,onShare:p,onDownload:b,onDelete:f,isGoogleDocsProject:v=!1,googleDocMeta:y=null,isSyncingWithGoogle:T=!1,onSyncWithGoogle:j,onOpenGoogleDocs:k}=e,[w,A]=(0,s.useState)(null),[N,C]=(0,s.useState)(document.documentElement.classList.contains("dark")),E=async()=>{try{let e=new CustomEvent("project:copyContent",{detail:{callback:async e=>{try{await navigator.clipboard.writeText(e),l.V.info("PROJECT_HEADER","Editor content copied to clipboard",{length:e.length})}catch(e){l.V.error("PROJECT_HEADER","Failed to copy content",e)}}}});window.dispatchEvent(e),l.V.info("PROJECT_HEADER","Copy content event dispatched")}catch(e){l.V.error("PROJECT_HEADER","Failed to copy content",e)}},I=[{icon:n.eM,label:"저장",shortcut:"Cmd+S",onClick:x},{icon:n.QR,label:"복사",shortcut:"Cmd+C",onClick:E},{icon:n._H,label:"공유",shortcut:"Cmd+Shift+S",onClick:p},{icon:n.ni,label:"내보내기",shortcut:"Cmd+E",onClick:b},...v?[{icon:T?n.e9:n.Es,label:T?"동기화 중...":"Google Docs와 동기화",onClick:j||(()=>{}),isActive:T},{icon:n.Gr,label:"Google Docs에서 열기",onClick:k||(()=>{})}]:[],{icon:n.TB,label:"삭제",shortcut:"Cmd+Del",onClick:f}],S=[{icon:n.QR,label:"콘텐츠 복사",shortcut:"Cmd+C",onClick:E},{icon:n.h1,label:"집중모드",shortcut:"ESC로 해제",onClick:()=>{h(),l.V.info("PROJECT_HEADER","Focus mode toggled")}},{icon:N?n.bd:n.AX,label:N?"라이트 모드로 변경":"다크 모드로 변경",onClick:()=>{let e=!N;C(e),e?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")),l.V.info("PROJECT_HEADER","Theme changed to ".concat(e?"dark":"light"))}}];return(0,s.useEffect)(()=>{let e=e=>{w&&(A(null),e.preventDefault(),l.V.info("PROJECT_HEADER","Sidebar closed by ESC key"))};return window.addEventListener("global:escape",e),()=>window.removeEventListener("global:escape",e)},[w]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:o.header,children:[(0,r.jsx)("div",{className:o.headerLeft,children:(0,r.jsxs)("button",{className:o.backButton,onClick:i,children:[(0,r.jsx)(n.JG,{size:16}),(0,r.jsx)("span",{children:"프로젝트 목록"})]})}),(0,r.jsx)("div",{className:o.headerCenter,children:(0,r.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[v&&(0,r.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded-md text-xs font-medium",children:[(0,r.jsx)(n.Es,{size:12}),(0,r.jsx)("span",{children:"Google Docs"})]}),(0,r.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),placeholder:"프로젝트 제목을 입력하세요",className:o.titleInput})]})}),(0,r.jsxs)("div",{className:o.headerRight,children:[I.map((e,t)=>(0,r.jsxs)("button",{className:"".concat(o.iconButton," group relative"),onClick:e.onClick,children:[(0,r.jsx)(e.icon,{size:16}),(0,r.jsxs)("div",{className:"absolute -bottom-16 left-1/2 transform -translate-x-1/2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:[(0,r.jsx)("div",{children:e.label}),e.shortcut&&(0,r.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:e.shortcut})]})]},"action-".concat(t))),(0,r.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),S.map((e,t)=>(0,r.jsxs)("button",{className:"".concat(e.isActive?o.iconButtonActive:o.iconButton," group relative"),onClick:e.onClick,children:[(0,r.jsx)(e.icon,{size:16}),(0,r.jsx)("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:e.label})]},"toolbar-".concat(t))),(0,r.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),m&&(0,r.jsxs)("button",{className:"".concat(u?o.iconButtonActive:o.iconButton," group relative"),onClick:m,children:[(0,r.jsx)(n.sU,{size:16}),(0,r.jsxs)("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 px-3 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-xs rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50 shadow-lg",children:[(0,r.jsx)("div",{children:"✨ 창작 파트너"}),(0,r.jsx)("div",{className:"text-blue-200 text-xs mt-1",children:"함께 써봐요"})]})]}),(0,r.jsxs)("button",{className:"".concat(c?o.iconButton:o.iconButtonActive," group relative"),onClick:d,children:[(0,r.jsx)(n.Bx,{size:16}),(0,r.jsx)("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:"사이드바 토글"})]})]})]}),w&&(0,r.jsx)("div",{className:o.slidebarOverlay,onClick:()=>A(null)})]})}}}]);