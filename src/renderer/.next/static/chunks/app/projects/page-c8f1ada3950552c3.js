(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{2433:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var r=a(4568),s=a(7620),l=a(2942),o=a(2708),i=a(7312),n=a(2455),c=a(7300),d=a(2878),m=a(639),u=a(6419),p=a(6541),x=a(4376),h=a(4038),g=a(2918),b=a(2825),j=a(9324),f=a(8189),v=a(7718),w=a(6439),N=a(4775),C=a(662);let A={container:"group hover:shadow-lg transition-all duration-300 hover:-translate-y-1",header:"flex items-start justify-between p-4 pb-2",title:"text-lg font-semibold text-slate-900 dark:text-slate-100 line-clamp-2 flex-1 mr-2",moreButton:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8 p-0",content:"px-4 pb-2",description:"text-sm text-slate-600 dark:text-slate-400 line-clamp-3 mb-3",metaSection:"flex items-center gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4",metaItem:"flex items-center gap-1",progressSection:"mb-4",progressHeader:"flex items-center justify-between mb-2",progressLabel:"text-sm font-medium text-slate-700 dark:text-slate-300",progressValue:"text-sm text-slate-500 dark:text-slate-400",footer:"px-4 pb-4",actionButtons:"flex items-center gap-2",actionButton:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",statusBadge:"mb-2",icon:"w-4 h-4"};function E(e){let t,{project:a,onView:s,onEdit:l,onShare:o,onDelete:i,onMore:n,showActions:c=!0}=e,E=(e,t)=>{C.V.info("PROJECT_CARD","Action triggered: ".concat(e),{projectId:a.id}),null==t||t(a)},P=(e,t,r)=>{e.stopPropagation(),e.preventDefault(),C.V.info("PROJECT_CARD","Action triggered: ".concat(t),{projectId:a.id}),null==r||r(a)},k=e=>new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"short",day:"numeric"}).format(e),y=[{id:"view",label:"보기",icon:p.A,variant:"ghost",onClick:e=>E("view",s),ariaLabel:"프로젝트 보기"},{id:"edit",label:"편집",icon:u.A,variant:"ghost",onClick:e=>E("edit",l),ariaLabel:"프로젝트 편집"},{id:"share",label:"공유",icon:g.A,variant:"ghost",onClick:e=>E("share",o),ariaLabel:"프로젝트 공유"},{id:"delete",label:"삭제",icon:b.A,variant:"ghost",onClick:e=>E("delete",i),ariaLabel:"프로젝트 삭제"}];return(0,r.jsxs)(j.Z,{className:"".concat(A.container," cursor-pointer"),role:"article","aria-label":"프로젝트: ".concat(a.title),"data-project-id":a.id,onClick:()=>{C.V.info("PROJECT_CARD","\uD83D\uDDB1️ Card clicked",{projectId:a.id,title:a.title,currentPath:window.location.pathname}),null==s||s(a)},children:[(0,r.jsxs)("div",{className:A.header,children:[(0,r.jsx)("h3",{className:A.title,children:a.title}),c&&n&&(0,r.jsx)(N.m_,{content:"더 보기",side:"top",children:(0,r.jsx)(f.$,{variant:"ghost",size:"sm",className:A.moreButton,onClick:e=>{e.stopPropagation(),e.preventDefault(),E("more",n)},"aria-label":"프로젝트 옵션 더 보기",children:(0,r.jsx)(h.A,{className:A.icon})})})]}),(0,r.jsxs)("div",{className:A.content,children:[(0,r.jsx)("div",{className:A.statusBadge,children:(0,r.jsx)(w.E,{variant:(e=>{switch(e){case"completed":return"success";case"active":return"primary";case"paused":return"warning";default:return"default"}})(a.status),size:"sm",children:(e=>{switch(e){case"completed":return"완료";case"active":return"진행중";case"paused":return"일시정지";case"draft":return"초안";default:return"알 수 없음"}})(a.status)})}),(0,r.jsx)("p",{className:A.description,children:a.description}),(0,r.jsxs)("div",{className:A.metaSection,children:[(0,r.jsxs)("div",{className:A.metaItem,children:[(0,r.jsx)(d.A,{className:A.icon,"aria-hidden":"true"}),(0,r.jsx)("span",{children:k(a.createdAt)})]}),a.wordCount&&(0,r.jsxs)("div",{className:A.metaItem,children:[(0,r.jsx)(x.A,{className:A.icon,"aria-hidden":"true"}),(0,r.jsxs)("span",{children:[(t=a.wordCount,new Intl.NumberFormat("ko-KR").format(t)),"자"]})]}),(0,r.jsxs)("div",{className:A.metaItem,children:[(0,r.jsx)(m.A,{className:A.icon,"aria-hidden":"true"}),(0,r.jsx)("span",{children:k(a.updatedAt)})]})]}),(0,r.jsxs)("div",{className:A.progressSection,children:[(0,r.jsxs)("div",{className:A.progressHeader,children:[(0,r.jsx)("span",{className:A.progressLabel,children:"진행률"}),(0,r.jsxs)("span",{className:A.progressValue,children:[Math.round(a.progress),"%"]})]}),(0,r.jsx)(v.z,{value:a.progress,size:"sm",color:a.progress>=100?"green":"blue","aria-label":"프로젝트 진행률 ".concat(Math.round(a.progress),"%")})]})]}),c&&(0,r.jsx)("div",{className:A.footer,children:(0,r.jsx)("div",{className:A.actionButtons,children:y.map(e=>{let t=e.icon;return(0,r.jsx)(N.m_,{content:e.label,side:"top",children:(0,r.jsx)(f.$,{variant:e.variant,size:"sm",className:A.actionButton,onClick:t=>P(t,e.id,e.onClick.bind(null,a)),"aria-label":e.ariaLabel,children:(0,r.jsx)(t,{className:A.icon})})},e.id)})})})]})}var P=a(2745);let k={container:"space-y-6",header:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",title:"text-2xl font-bold text-slate-900 dark:text-slate-100",controls:"flex flex-col gap-3 sm:flex-row sm:items-center",searchContainer:"relative flex-1 max-w-md",searchIcon:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",searchInput:"pl-10",filters:"flex items-center gap-2",filterButton:"h-9",sortButton:"h-9 w-9 p-0",createButton:"flex items-center gap-2 whitespace-nowrap",grid:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",emptyState:"col-span-full text-center py-12",emptyStateIcon:"w-16 h-16 mx-auto text-slate-400 mb-4",emptyStateTitle:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",emptyStateDescription:"text-slate-500 dark:text-slate-400 mb-6",statsBar:"flex items-center gap-4 text-sm text-slate-600 dark:text-slate-400",statsItem:"flex items-center gap-1"};function y(e){let{projects:t,loading:a=!1,onCreateProject:l,onViewProject:d,onEditProject:m,onShareProject:u,onDeleteProject:p,showCreateButton:x=!0,searchPlaceholder:h="프로젝트 검색..."}=e,[g,b]=(0,s.useState)(""),[j,v]=(0,s.useState)("all"),[w,N]=(0,s.useState)("updatedAt"),[A,y]=(0,s.useState)("desc"),R=(0,s.useMemo)(()=>{let e=[...t];if(g.trim()){let t=g.toLowerCase();e=e.filter(e=>{var a,r;return e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||(null==(a=e.author)?void 0:a.toLowerCase().includes(t))||(null==(r=e.genre)?void 0:r.toLowerCase().includes(t))})}return"all"!==j&&(e=e.filter(e=>e.status===j)),e.sort((e,t)=>{let a,r;switch(w){case"title":a=e.title.toLowerCase(),r=t.title.toLowerCase();break;case"createdAt":a=e.createdAt.getTime(),r=t.createdAt.getTime();break;case"updatedAt":a=e.updatedAt.getTime(),r=t.updatedAt.getTime();break;case"progress":a=e.progress,r=t.progress;break;default:return 0}return a<r?"asc"===A?-1:1:a>r?"asc"===A?1:-1:0}),e},[t,g,j,w,A]),T=(0,s.useMemo)(()=>{let e=t.length,a=t.filter(e=>"active"===e.status).length;return{total:e,active:a,completed:t.filter(e=>"completed"===e.status).length,paused:t.filter(e=>"paused"===e.status).length}},[t]),S=e=>{b(e),C.V.debug("PROJECT_GRID","Search query: ".concat(e))},O=e=>{v(e),C.V.debug("PROJECT_GRID","Filter by status: ".concat(e))},G=e=>{w===e?y("asc"===A?"desc":"asc"):(N(e),y("desc")),C.V.debug("PROJECT_GRID","Sort by: ".concat(e," ").concat(A))},_=()=>{C.V.info("PROJECT_GRID","Create project button clicked"),null==l||l()},V=[{value:"all",label:"전체",count:T.total},{value:"active",label:"진행중",count:T.active},{value:"completed",label:"완료",count:T.completed},{value:"paused",label:"일시정지",count:T.paused}];return a?(0,r.jsx)("div",{className:k.container,children:(0,r.jsx)("div",{className:k.emptyState,children:(0,r.jsx)("div",{className:k.emptyStateTitle,children:"로딩 중..."})})}):(0,r.jsxs)("div",{className:k.container,role:"main","aria-label":"프로젝트 목록",children:[(0,r.jsxs)("div",{className:k.header,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:k.title,children:"프로젝트"}),(0,r.jsxs)("div",{className:k.statsBar,children:[(0,r.jsxs)("div",{className:k.statsItem,children:["총 ",T.total,"개"]}),(0,r.jsxs)("div",{className:k.statsItem,children:["진행중 ",T.active,"개"]}),(0,r.jsxs)("div",{className:k.statsItem,children:["완료 ",T.completed,"개"]})]})]}),(0,r.jsxs)("div",{className:k.controls,children:[(0,r.jsxs)("div",{className:k.searchContainer,children:[(0,r.jsx)(i.A,{className:k.searchIcon,"aria-hidden":"true"}),(0,r.jsx)(P.p,{type:"text",placeholder:h,value:g,onChange:e=>S(e.target.value),className:k.searchInput,"aria-label":"프로젝트 검색"})]}),(0,r.jsx)("div",{className:k.filters,children:V.map(e=>(0,r.jsxs)(f.$,{variant:j===e.value?"primary":"outline",size:"sm",className:k.filterButton,onClick:()=>O(e.value),"aria-label":"".concat(e.label," 필터"),"aria-pressed":j===e.value,children:[e.label," (",e.count,")"]},e.value))}),(0,r.jsx)(f.$,{variant:"outline",size:"sm",className:k.sortButton,onClick:()=>G("updatedAt"),"aria-label":"업데이트 순으로 ".concat("asc"===A?"내림차순":"오름차순"," 정렬"),children:"asc"===A?(0,r.jsx)(n.A,{className:"w-4 h-4"}):(0,r.jsx)(c.A,{className:"w-4 h-4"})}),x&&(0,r.jsxs)(f.$,{variant:"primary",onClick:_,className:k.createButton,"aria-label":"새 프로젝트 생성",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),"새 프로젝트"]})]})]}),R.length>0?(0,r.jsx)("div",{className:k.grid,role:"grid","aria-label":"".concat(R.length,"개의 프로젝트"),children:R.map(e=>(0,r.jsx)("div",{role:"gridcell",children:(0,r.jsx)(E,{project:e,onView:d,onEdit:m,onShare:u,onDelete:p})},e.id))}):(0,r.jsxs)("div",{className:k.emptyState,children:[(0,r.jsx)("div",{className:k.emptyStateIcon,children:g||"all"!==j?(0,r.jsx)(i.A,{}):(0,r.jsx)(o.A,{})}),(0,r.jsx)("h3",{className:k.emptyStateTitle,children:g||"all"!==j?"검색 결과가 없습니다":"아직 프로젝트가 없습니다"}),(0,r.jsx)("p",{className:k.emptyStateDescription,children:g||"all"!==j?"다른 검색어나 필터를 시도해보세요.":"새 프로젝트를 만들어서 타이핑 분석을 시작해보세요."}),x&&!g&&"all"===j&&(0,r.jsxs)(f.$,{variant:"primary",onClick:_,className:k.createButton,children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),"첫 번째 프로젝트 만들기"]})]})]})}var R=a(417),T=a(6666),S=a(5615),O=a(9448),G=a(864),_=a(5701),V=a(1295),I=a(952),J=a(6043),D=a(8343),B=a(3206);let L={overlay:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",modal:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl dark:shadow-slate-900/50 w-full max-w-4xl max-h-[90vh] overflow-hidden border border-slate-200 dark:border-slate-700",header:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",title:"text-2xl font-bold text-slate-900 dark:text-slate-100",closeButton:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors p-1 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",content:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] bg-white dark:bg-slate-900",platformSection:"mb-8",sectionTitle:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",platformGrid:"grid grid-cols-1 md:grid-cols-3 gap-4",platformCard:"p-4 border-2 rounded-xl cursor-pointer transition-all hover:border-blue-300 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/20",platformCardSelected:"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-950/20",platformCardDefault:"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",platformIcon:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2",platformTitle:"font-semibold text-slate-900 dark:text-slate-100 mb-1",platformDescription:"text-sm text-slate-600 dark:text-slate-400",formSection:"mb-6",label:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2",inputGroup:"mb-4",genreGrid:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",genreButton:"p-2 text-sm border rounded-lg transition-colors",genreSelected:"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300",genreDefault:"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-slate-300 dark:hover:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-800",footer:"flex items-center justify-between p-6 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",secondaryButton:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",primaryButton:"px-6 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},F=[{id:"loop",name:"Loop Editor",description:"통합 타이핑 분석과 함께하는 전용 에디터",icon:T.A,recommended:!0},{id:"google-docs",name:"Google Docs",description:"실시간 협업과 클라우드 동기화",icon:_.A,external:!0},{id:"import",name:"파일 불러오기",description:"Word, 텍스트 파일에서 프로젝트 생성",icon:D.A,action:"import"}],M=[{id:"novel",name:"소설",icon:T.A},{id:"essay",name:"에세이",icon:O.A},{id:"blog",name:"블로그",icon:I.A},{id:"tech",name:"기술",icon:S.A},{id:"diary",name:"일기",icon:x.A},{id:"poem",name:"시",icon:V.A},{id:"script",name:"대본",icon:x.A},{id:"other",name:"기타",icon:o.A}];function U(e){let{isOpen:t,onClose:a,onCreate:l}=e,[o,i]=(0,s.useState)("loop"),[n,c]=(0,s.useState)(""),[d,m]=(0,s.useState)(""),[u,p]=(0,s.useState)("novel"),[x,h]=(0,s.useState)(1e4),[g,b]=(0,s.useState)(""),[j,v]=(0,s.useState)(!1);if(!t)return null;let N=async()=>{if(!n.trim())return void C.V.warn("PROJECT_CREATOR","Project title is required");v(!0);try{let e={title:n.trim(),description:d.trim()||"새로운 프로젝트입니다.",genre:u,platform:o,content:"loop"===o?k(u):void 0,targetWords:x,deadline:g?new Date(g):void 0};C.V.info("PROJECT_CREATOR","Creating new project",{title:e.title,platform:e.platform,genre:e.genre}),await l(e),c(""),m(""),p("novel"),i("loop"),h(1e4),b(""),a()}catch(e){C.V.error("PROJECT_CREATOR","Failed to create project",e)}finally{v(!1)}},A=async e=>{if(i(e),C.V.debug("PROJECT_CREATOR","Platform selected: ".concat(e)),"google-docs"===e)try{var t,a;C.V.info("PROJECT_CREATOR","Starting Google OAuth authentication"),(null==(a=window.electronAPI)||null==(t=a.oauth)?void 0:t.startGoogleAuth)?(await window.electronAPI.oauth.startGoogleAuth()).success?C.V.info("PROJECT_CREATOR","Google OAuth started successfully"):(C.V.error("PROJECT_CREATOR","Google OAuth failed to start"),alert("Google 인증을 시작할 수 없습니다. 잠시 후 다시 시도해주세요."),i("loop")):(C.V.error("PROJECT_CREATOR","Google OAuth API not available"),alert("Google Docs 연동 기능이 준비되지 않았습니다."),i("loop"))}catch(e){C.V.error("PROJECT_CREATOR","Google OAuth error",e),alert("Google 인증 중 오류가 발생했습니다."),i("loop")}},E=e=>{p(e),C.V.debug("PROJECT_CREATOR","Genre selected: ".concat(e))},k=e=>{var t,a;let r={novel:"제1장: 새로운 시작\n\n여기서부터 당신의 이야기가 시작됩니다.\n\n✍️ 작성 팁:\n- 등장인물을 구체적으로 묘사해보세요\n- 독자가 몰입할 수 있는 장면을 그려보세요\n- 하루에 500단어씩 꾸준히 작성해보세요",essay:"# 제목을 여기에 입력하세요\n\n오늘의 생각을 자유롭게 써보세요.\n\n일상의 작은 순간들이 때로는 가장 의미 있는 글이 됩니다.",blog:"# 블로그 포스트 제목\n\n## 소개\n\n독자들과 공유하고 싶은 이야기를 써보세요.\n\n## 본문\n\n경험, 배움, 생각을 자유롭게 표현해보세요.",tech:"# 기술 문서 제목\n\n## 개요\n\n## 문제 정의\n\n## 해결 방법\n\n## 결론\n\n코드와 설명을 함께 작성해보세요.",diary:"".concat(new Date().toLocaleDateString("ko-KR")," 일기\n\n오늘 있었던 일들을 기록해보세요.\n\n소중한 순간들을 글로 남겨보세요."),other:"새로운 프로젝트가 시작되었습니다.\n\n자유롭게 내용을 작성해보세요."},s="새로운 프로젝트가 시작되었습니다.\n\n자유롭게 내용을 작성해보세요.";return e&&null!=(a=null!=(t=r[e])?t:r.other)?a:s};return(0,r.jsx)("div",{className:L.overlay,onClick:a,children:(0,r.jsxs)("div",{className:L.modal,onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:L.header,children:[(0,r.jsx)("h2",{className:L.title,children:"새 프로젝트 만들기"}),(0,r.jsx)("button",{onClick:a,className:L.closeButton,"aria-label":"닫기",children:(0,r.jsx)(B.A,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{className:L.content,children:[(0,r.jsxs)("div",{className:L.platformSection,children:[(0,r.jsx)("h3",{className:L.sectionTitle,children:"작성 플랫폼 선택"}),(0,r.jsx)("div",{className:L.platformGrid,children:F.map(e=>{let t=e.icon;return(0,r.jsxs)("div",{className:"".concat(L.platformCard," ").concat(o===e.id?L.platformCardSelected:L.platformCardDefault),onClick:()=>A(e.id),children:[(0,r.jsx)(t,{className:L.platformIcon}),(0,r.jsxs)("div",{className:L.platformTitle,children:[e.name,e.recommended&&(0,r.jsx)(w.E,{className:"ml-2 text-xs bg-blue-100 text-blue-700",children:"추천"}),e.external&&(0,r.jsx)(G.A,{className:"inline w-4 h-4 ml-1"})]}),(0,r.jsx)("p",{className:L.platformDescription,children:e.description})]},e.id)})})]}),(0,r.jsxs)("div",{className:L.formSection,children:[(0,r.jsx)("h3",{className:L.sectionTitle,children:"프로젝트 정보"}),(0,r.jsxs)("div",{className:L.inputGroup,children:[(0,r.jsx)("label",{className:L.label,htmlFor:"project-title",children:"프로젝트 제목 *"}),(0,r.jsx)(P.p,{id:"project-title",type:"text",placeholder:"예: 나의 첫 번째 소설",value:n,onChange:e=>c(e.target.value),maxLength:100})]}),(0,r.jsxs)("div",{className:L.inputGroup,children:[(0,r.jsx)("label",{className:L.label,htmlFor:"project-description",children:"프로젝트 설명"}),(0,r.jsx)(R.T,{id:"project-description",placeholder:"프로젝트에 대한 간단한 설명을 입력하세요...",value:d,onChange:e=>m(e.target.value),rows:3,maxLength:500})]}),(0,r.jsxs)("div",{className:L.inputGroup,children:[(0,r.jsx)("label",{className:L.label,children:"장르"}),(0,r.jsx)("div",{className:L.genreGrid,children:M.map(e=>{let t=e.icon;return(0,r.jsxs)("button",{className:"".concat(L.genreButton," ").concat(u===e.id?L.genreSelected:L.genreDefault),onClick:()=>E(e.id),children:[(0,r.jsx)(t,{className:"w-4 h-4 inline mr-1"}),e.name]},e.id)})})]})]}),(0,r.jsxs)("div",{className:L.formSection,children:[(0,r.jsx)("h3",{className:L.sectionTitle,children:"작성 목표 설정"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:L.inputGroup,children:[(0,r.jsx)("label",{className:L.label,htmlFor:"target-words",children:"목표 단어 수"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(P.p,{id:"target-words",type:"number",placeholder:"10000",value:x,onChange:e=>h(Number(e.target.value)||0),min:"100",max:"1000000",step:"100"}),(0,r.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"단어"})]}),(0,r.jsx)("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"권장: 소설 50,000+ / 에세이 5,000+ / 블로그 1,000+"})]}),(0,r.jsxs)("div",{className:L.inputGroup,children:[(0,r.jsx)("label",{className:L.label,htmlFor:"deadline",children:"완료 목표 날짜 (선택사항)"}),(0,r.jsx)(P.p,{id:"deadline",type:"date",value:g,onChange:e=>b(e.target.value),min:new Date().toISOString().split("T")[0]}),(0,r.jsx)("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"목표 날짜를 설정하면 일일 권장 작성량을 계산해드립니다"})]})]}),x>0&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-blue-700 dark:text-blue-300",children:[(0,r.jsx)(J.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"font-medium",children:"목표 미리보기"})]}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-blue-600 dark:text-blue-400",children:["총 목표: ",x.toLocaleString(),"단어",g&&(()=>{let e=Math.ceil((new Date(g).getTime()-new Date().getTime())/864e5),t=Math.ceil(x/e);return e>0?(0,r.jsxs)("span",{className:"block mt-1",children:["일일 권장: ",t.toLocaleString(),"단어 (약 ",Math.ceil(t/200),"분 소요)"]}):null})()]})]})]})]}),(0,r.jsxs)("div",{className:L.footer,children:[(0,r.jsx)("button",{onClick:a,className:L.secondaryButton,children:"취소"}),(0,r.jsx)(f.$,{onClick:N,disabled:!n.trim()||j,className:L.primaryButton,children:j?"생성 중...":"프로젝트 만들기"})]})]})})}var $=a(6260);let z={container:"container mx-auto px-4 py-6 max-w-7xl",loading:"flex items-center justify-center min-h-96",loadingText:"text-lg text-slate-600 dark:text-slate-400",error:"flex flex-col items-center justify-center min-h-96 text-center",errorTitle:"text-xl font-semibold text-red-600 dark:text-red-400 mb-2",errorMessage:"text-slate-600 dark:text-slate-400 mb-4",retryButton:"mt-4"},K=[];function W(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),[a,o]=(0,s.useState)(K),[i,n]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),[m,u]=(0,s.useState)(!1),p=t=>{let a="/projects/".concat(t);C.V.info("PROJECTS_PAGE","↪️ Navigating to project (soft)",{target:a});try{e.push(a)}catch(e){C.V.warn("PROJECTS_PAGE","router.push threw; will hard-navigate",{target:a}),window.location.assign(a);return}setTimeout(()=>{window.location.pathname.startsWith(a)||(C.V.warn("PROJECTS_PAGE","Soft navigation not applied; hard-navigating",{current:window.location.pathname,target:a}),window.location.assign(a))},50)};(0,s.useEffect)(()=>{if("true"===t.get("create")){C.V.info("PROJECTS_PAGE","\uD83D\uDE80 Auto-opening project creator from URL parameter"),u(!0);let e=new URL(window.location.href);e.searchParams.delete("create"),window.history.replaceState({},"",e.pathname)}},[t]),(0,s.useEffect)(()=>{x()},[]);let x=async()=>{try{if(n(!0),d(null),!(0,$.Ub)()){C.V.warn("PROJECTS_PAGE","\uD83C\uDF10 Browser environment detected"),d("브라우저 환경에서 접근 중입니다. Electron 앱에서 실행해주세요.\n\n실행 방법: pnpm dev");return}if(!await (0,$.Rd)(3e3))throw Error("ElectronAPI를 로드할 수 없습니다. 잠시 후 다시 시도해주세요.");let e=await window.electronAPI.projects.getAll();if(!e.success)throw Error(e.error||"Projects API failed");let t=h(e.data||[]);o(t),C.V.info("PROJECTS_PAGE","✅ Loaded ".concat(t.length," projects successfully"))}catch(e){d(e instanceof Error?e.message:"프로젝트를 불러오는 중 오류가 발생했습니다."),C.V.error("PROJECTS_PAGE","❌ Failed to load projects",e),o(K)}finally{n(!1)}},h=e=>e.map(e=>({id:e.id||"",title:e.title||"제목 없음",description:e.description||"",status:e.status||"draft",progress:e.progress||0,createdAt:e.createdAt?new Date(e.createdAt):new Date,updatedAt:e.updatedAt?new Date(e.updatedAt):e.lastModified?new Date(e.lastModified):new Date,wordCount:e.wordCount||0,author:e.author||"사용자",genre:e.genre||"기타"})),g=async e=>{try{var t,a,r;if(C.V.info("PROJECTS_PAGE","\uD83D\uDE80 Creating new project",e),"import"===e.platform){C.V.info("PROJECTS_PAGE","\uD83D\uDCC1 Importing file for project creation");let e=await window.electronAPI.projects.importFile();if(e.success&&e.data){C.V.info("PROJECTS_PAGE","✅ Project imported successfully",{projectId:e.data.id}),p(e.data.id);return}throw Error(e.error||"Failed to import project")}if("google-docs"===e.platform){C.V.info("PROJECTS_PAGE","\uD83C\uDF10 Opening Google Docs for external editing"),await (null==(r=window.electronAPI.shell)?void 0:r.openExternal("https://docs.google.com/document/"));return}let s={title:e.title,description:e.description,genre:e.genre,content:e.content||"새 프로젝트를 시작해보세요...\n\n",progress:0,wordCount:0,status:"active",author:"사용자",platform:e.platform,updatedAt:new Date},l=await window.electronAPI.projects.create(s);if(!l.success)throw Error(l.error||"Failed to create project");if(C.V.info("PROJECTS_PAGE","✅ Project created successfully in DB",{id:null==(t=l.data)?void 0:t.id}),await x(),null==(a=l.data)?void 0:a.id){C.V.info("PROJECTS_PAGE","\uD83D\uDE80 Navigating to new project editor",{id:l.data.id}),p(l.data.id);return}}catch(t){let e=t instanceof Error?t.message:"프로젝트 생성 중 오류가 발생했습니다.";C.V.error("PROJECTS_PAGE","❌ Failed to create project",t),alert(e)}};if(i)return(0,r.jsx)("div",{className:z.container,children:(0,r.jsx)("div",{className:z.loading,children:(0,r.jsx)("div",{className:z.loadingText,children:"프로젝트를 불러오는 중..."})})});if(c){let e=c.includes("브라우저 환경");return(0,r.jsx)("div",{className:z.container,children:(0,r.jsxs)("div",{className:z.error,children:[(0,r.jsx)("h2",{className:z.errorTitle,children:e?"\uD83C\uDF10 브라우저 환경 감지":"오류 발생"}),(0,r.jsx)("div",{className:z.errorMessage,children:c.split("\n").map((e,t)=>(0,r.jsx)("p",{children:e},t))}),e?(0,r.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"다음 방법으로 Electron 앱을 실행하세요:"}),(0,r.jsxs)("div",{className:"bg-gray-100 p-3 rounded-md font-mono text-sm",children:[(0,r.jsx)("p",{children:"$ cd /Users/user/loop/loop"}),(0,r.jsx)("p",{children:"$ pnpm dev"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Electron 앱에서는 모든 기능(프로젝트, IPC, 키보드 모니터링 등)을 사용할 수 있습니다."})]}):(0,r.jsx)("button",{onClick:()=>{C.V.info("PROJECTS_PAGE","Retry loading projects"),d(null),n(!0)},className:z.retryButton,type:"button",children:"다시 시도"})]})})}return(0,r.jsxs)("div",{className:z.container,children:[(0,r.jsx)(y,{projects:a,onCreateProject:()=>{C.V.info("PROJECTS_PAGE","Opening project creator"),u(!0)},onViewProject:e=>{C.V.info("PROJECTS_PAGE","\uD83D\uDD0D VIEW PROJECT CLICKED",{projectId:e.id,title:e.title,targetUrl:"/projects/".concat(e.id),currentUrl:window.location.href,pathname:window.location.pathname});try{p(e.id)}catch(t){C.V.error("PROJECTS_PAGE","navigateToProject threw",t),window.location.assign("/projects/".concat(e.id));return}C.V.info("PROJECTS_PAGE","✅ ROUTER PUSH COMPLETED",{projectId:e.id,targetUrl:"/projects/".concat(e.id)})},onEditProject:e=>{C.V.info("PROJECTS_PAGE","✏️ Edit project: ".concat(e.id),{title:e.title}),p(e.id)},onShareProject:e=>{C.V.info("PROJECTS_PAGE","Share project: ".concat(e.id),{title:e.title}),alert("프로젝트 공유: ".concat(e.title))},onDeleteProject:e=>{C.V.info("PROJECTS_PAGE","Delete project requested: ".concat(e.id),{title:e.title}),confirm('정말로 "'.concat(e.title,'" 프로젝트를 삭제하시겠습니까?'))&&(o(t=>t.filter(t=>t.id!==e.id)),C.V.info("PROJECTS_PAGE","Project deleted: ".concat(e.id)))}}),(0,r.jsx)(U,{isOpen:m,onClose:()=>u(!1),onCreate:g})]})}function q(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:z.loading,children:(0,r.jsx)("div",{className:z.loadingText,children:"프로젝트 로딩 중..."})}),children:(0,r.jsx)(W,{})})}},9277:(e,t,a)=>{Promise.resolve().then(a.bind(a,2433))}},e=>{var t=t=>e(e.s=t);e.O(0,[209,432,979,899,744,322,592,940,605,30,173,641,431,110,555,408,219,27,206,409,76,358],()=>t(9277)),_N_E=e.O()}]);