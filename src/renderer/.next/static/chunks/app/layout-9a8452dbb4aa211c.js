(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{5515:(e,t,a)=>{Promise.resolve().then(a.bind(a,7660))},7108:()=>{},7660:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var l=a(4568),s=a(4473),r=a.n(s),n=a(7620),i=a(2942),o=a(368),d=a(5870),c=a(7911),m=a(7337),h=a(731),u=a(4508),x=a(1778),b=a(6740),f=a(4775),g=a(6439),v=a(662);let p={container:"flex flex-col h-full bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-700 transition-all duration-300",collapsed:"w-16",expanded:"w-64",logoSection:"h-auto min-h-[4rem] flex flex-col justify-center border-b border-slate-200 dark:border-slate-700 px-6 py-3",logoCollapsed:"h-auto min-h-[8rem] flex items-center justify-center border-b border-slate-200 dark:border-slate-700 px-3 py-4",logoText:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",logoIcon:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-sm",collapseButton:"h-6 w-6 p-0 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",navSection:"flex-1 py-4",navList:"space-y-1 px-3",navItem:"flex items-center h-10 px-3 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-all duration-150 group cursor-pointer",navItemActive:"flex items-center h-10 px-3 bg-blue-50 dark:bg-blue-950 text-blue-600 dark:text-blue-400 rounded-lg font-medium",navItemCollapsed:"flex items-center justify-center h-10 w-10 mx-auto text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-all duration-150 cursor-pointer",navItemActiveCollapsed:"flex items-center justify-center h-10 w-10 mx-auto bg-blue-50 dark:bg-blue-950 text-blue-600 dark:text-blue-400 rounded-lg",icon:"w-5 h-5 group-hover:scale-110 transition-transform duration-150 flex-shrink-0",iconCollapsed:"w-5 h-5",text:"ml-3 font-medium",badge:"ml-auto"},y=[{id:"dashboard",label:"대시보드",icon:h.A,href:"/",ariaLabel:"대시보드로 이동"},{id:"projects",label:"프로젝트",icon:m.A,href:"/projects",ariaLabel:"프로젝트 관리로 이동"},{id:"analytics",label:"통계",icon:o.A,href:"/analytics",ariaLabel:"분석 및 통계로 이동"},{id:"ai",label:"Loop AI",icon:x.A,href:"/ai",badge:2,ariaLabel:"AI 도구로 이동"},{id:"settings",label:"설정",icon:u.A,href:"/settings",ariaLabel:"설정으로 이동"}];function j(e){let{activeRoute:t="/",onNavigate:a,collapsed:s,onToggleCollapse:r}=e,[i,o]=(0,n.useState)(!1),m=void 0!==s,h=m?s:i,[u,x]=(0,n.useState)({isAuthenticated:!1}),[j,N]=(0,n.useState)(navigator.onLine);(0,n.useEffect)(()=>{(async()=>{try{var e,t,a,l;if(null==(t=window.electronAPI)||null==(e=t.oauth)?void 0:e.getAuthStatus){let e=await window.electronAPI.oauth.getAuthStatus();(null==e?void 0:e.success)&&(null==(a=e.data)?void 0:a.isAuthenticated)&&(x({isAuthenticated:!0,userEmail:e.data.userEmail,userName:(null==(l=e.data.userEmail)?void 0:l.split("@")[0])||"Google 사용자",userPicture:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.data.userEmail||"User"),"&background=4f46e5&color=fff&size=32")}),v.V.info("APP_SIDEBAR","Google user info loaded",{userEmail:e.data.userEmail}))}}catch(e){v.V.error("APP_SIDEBAR","Failed to load Google user info",e)}})()},[]),(0,n.useEffect)(()=>{let e=()=>N(!0),t=()=>N(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);let k=()=>{m?null==r||r():o(!h),v.V.info("SIDEBAR","Sidebar ".concat(h?"expanded":"collapsed"))},w=e=>{v.V.info("SIDEBAR","Navigation to ".concat(e.label),{href:e.href}),null==a||a(e.href)},A=(e,t)=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),w(t))};return(0,l.jsxs)("aside",{className:"".concat(p.container," ").concat(h?p.collapsed:p.expanded),"aria-label":"사이드바 네비게이션",role:"navigation",children:[(0,l.jsx)("div",{className:h?p.logoCollapsed:p.logoSection,children:h?(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3 py-4",children:[(0,l.jsx)("div",{className:p.logoIcon,children:"L"}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-1 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 p-2 rounded-lg transition-colors mt-2",onClick:()=>{v.V.info("SIDEBAR","User profile clicked (collapsed)"),null==a||a("/settings")},role:"button",tabIndex:0,"aria-label":"사용자 프로필",children:[u.isAuthenticated&&u.userPicture?(0,l.jsx)("img",{src:u.userPicture,alt:u.userName||"User",className:"w-7 h-7 rounded-full object-cover"}):(0,l.jsx)("div",{className:"w-7 h-7 bg-blue-600 rounded-full flex items-center justify-center text-white font-medium text-xs",children:"U"}),(0,l.jsx)("div",{className:j?"w-1.5 h-1.5 bg-green-500 rounded-full":"w-1.5 h-1.5 bg-gray-400 rounded-full"})]}),(0,l.jsx)(b.$,{variant:"ghost",size:"sm",className:p.collapseButton,onClick:k,"aria-label":"사이드바 확장",children:(0,l.jsx)(c.A,{className:"w-3 h-3"})})]}):(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,l.jsx)("h1",{className:p.logoText,children:"Loop"}),(0,l.jsx)(b.$,{variant:"ghost",size:"sm",className:p.collapseButton,onClick:k,"aria-label":"사이드바 축소",children:(0,l.jsx)(d.A,{className:"w-3 h-3"})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 p-2 rounded-lg transition-colors",onClick:()=>{v.V.info("SIDEBAR","User profile clicked"),null==a||a("/settings")},role:"button",tabIndex:0,"aria-label":"사용자 프로필",children:[u.isAuthenticated&&u.userPicture?(0,l.jsx)("img",{src:u.userPicture,alt:u.userName||"User",className:"w-8 h-8 rounded-full object-cover"}):(0,l.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-medium text-sm",children:"U"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm",children:u.isAuthenticated?u.userName||u.userEmail:"Loop 사용자"}),(0,l.jsxs)("div",{className:"flex items-center gap-1 mt-0.5",children:[(0,l.jsx)("div",{className:j?"w-1.5 h-1.5 bg-green-500 rounded-full":"w-1.5 h-1.5 bg-gray-400 rounded-full"}),(0,l.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:j?"온라인":"오프라인"})]}),u.isAuthenticated&&u.userEmail&&(0,l.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:u.userEmail})]})]})]})}),(0,l.jsx)("nav",{className:p.navSection,"aria-label":"메인 메뉴",children:(0,l.jsx)("div",{className:p.navList,children:y.map(e=>{let a=t===e.href,s=e.icon,r=(0,l.jsxs)("div",{className:h?a?p.navItemActiveCollapsed:p.navItemCollapsed:a?p.navItemActive:p.navItem,role:"button",tabIndex:0,onClick:()=>w(e),onKeyDown:t=>A(t,e),"aria-label":e.ariaLabel||e.label,"aria-current":a?"page":void 0,children:[(0,l.jsx)(s,{className:h?p.iconCollapsed:p.icon}),!h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:p.text,children:e.label}),e.badge&&e.badge>0&&(0,l.jsx)(g.E,{variant:"danger",size:"sm",className:p.badge,children:e.badge>9?"9+":e.badge})]})]});return(0,l.jsx)("div",{children:h?(0,l.jsx)(f.m_,{content:e.label,side:"right",children:(0,l.jsx)("div",{children:r})}):r},e.id)})})})]})}var N=a(5440),k=a(7832),w=a(7510),A=a(8237),E=a(5803),S=a(3199),I=a(1455);let L={container:"h-16 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200/50 dark:border-slate-700/50 flex items-center justify-between px-6 z-80 supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-slate-900/60",leftSection:"flex items-center space-x-4",menuButton:"lg:hidden",searchContainer:"relative hidden md:block w-96",rightSection:"flex items-center space-x-3",notificationButton:"relative"};function D(e){let{onMenuToggle:t,user:a,notificationCount:s=0,onSearch:r,onNotificationClick:n,onUserClick:i}=e,[o,d]=(0,S.J0)(""),{state:c}=(0,I.Mc)(),{isMonitoring:m}=c;return(0,l.jsxs)("header",{className:L.container,role:"banner",children:[(0,l.jsxs)("div",{className:L.leftSection,children:[t&&(0,l.jsx)(b.$,{variant:"ghost",size:"sm",className:L.menuButton,onClick:()=>{v.V.info("HEADER","Menu toggle clicked"),null==t||t()},"aria-label":"메뉴 토글",children:(0,l.jsx)(w.A,{className:"w-5 h-5"})}),(0,l.jsx)("div",{className:L.searchContainer,children:(0,l.jsx)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&(v.V.info("HEADER","Search performed",{query:o}),null==r||r(o.trim()))},children:(0,l.jsx)(A.D,{placeholder:"프로젝트, 파일 검색...",value:o,onChange:e=>{d(e.target.value)},"aria-label":"검색어 입력"})})})]}),(0,l.jsxs)("div",{className:L.rightSection,children:[(0,l.jsx)(E.K,{fallback:null,children:m&&(0,l.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-sm",children:[(0,l.jsx)(N.A,{className:"w-4 h-4 animate-pulse"}),(0,l.jsx)("span",{className:"font-medium",children:"모니터링 중"})]})}),(0,l.jsxs)("div",{className:L.notificationButton,children:[(0,l.jsx)(b.$,{variant:"ghost",size:"sm",onClick:()=>{v.V.info("HEADER","Notifications clicked",{count:s}),null==n||n()},"aria-label":"알림 ".concat(s,"개"),children:(0,l.jsx)(k.A,{className:"w-5 h-5"})}),s>0&&(0,l.jsx)(g.E,{variant:"danger",size:"sm",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 text-xs",children:s>9?"9+":s})]})]})]})}var T=a(7117);a(7108),"undefined"==typeof globalThis&&(globalThis.global=globalThis);let C={html:"h-full",body:"h-full bg-slate-50 dark:bg-slate-900 antialiased",container:"h-screen flex",sidebar:"flex-shrink-0",main:"flex-1 flex flex-col overflow-hidden",header:"flex-shrink-0",content:"flex-1 overflow-auto"};function P(e){let{children:t}=e,[a,s]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!1),c=(0,i.usePathname)();return(0,n.useLayoutEffect)(()=>{try{let e=localStorage.getItem("sidebar-collapsed");"true"===e&&s(!0),v.V.debug("LAYOUT","Sidebar state restored immediately",{collapsed:"true"===e})}catch(e){v.V.error("LAYOUT","Failed to restore sidebar state",e)}d(!0)},[]),(0,l.jsxs)("html",{lang:"ko",className:"".concat(r().className," ").concat(C.html),suppressHydrationWarning:!0,children:[(0,l.jsxs)("head",{children:[(0,l.jsx)("meta",{charSet:"utf-8"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,l.jsx)("meta",{name:"description",content:"Loop - AI 기반 타이핑 분석 도구"}),(0,l.jsx)("title",{children:"Loop"}),(0,l.jsx)("script",{dangerouslySetInnerHTML:{__html:"\n              (function() {\n                try {\n                  // \uD83D\uDD25 하이드레이션 에러 완전 방지: 서버와 클라이언트 완전 동기화\n                  \n                  var html = document.documentElement;\n                  var savedTheme = 'system'; // \uD83D\uDD25 서버 기본값과 동일\n                  \n                  // 1. localStorage에서 저장된 테마 확인 (안전하게)\n                  try {\n                    var stored = localStorage.getItem('loop-theme');\n                    if (stored && ['light', 'dark', 'system'].includes(stored)) {\n                      savedTheme = stored;\n                    }\n                  } catch (e) {\n                    // localStorage 접근 실패 시 기본값 유지\n                  }\n                  \n                  // 2. system 테마인 경우 실제 시스템 테마 감지\n                  var resolvedTheme = savedTheme;\n                  if (savedTheme === 'system') {\n                    try {\n                      resolvedTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n                    } catch (e) {\n                      resolvedTheme = 'light'; // 폴백\n                    }\n                  }\n                  \n                  // 3. 기존 클래스 완전 제거 (하이드레이션 에러 방지)\n                  html.classList.remove('light', 'dark', 'system');\n                  \n                  // 4. 해결된 테마만 적용\n                  html.classList.add(resolvedTheme);\n                  \n                  // 5. 일관된 속성 설정\n                  html.setAttribute('data-theme', resolvedTheme);\n                  html.style.setProperty('color-scheme', resolvedTheme);\n                  html.style.visibility = 'visible'; // 깜빡임 방지\n                  \n                  // 6. CSS 커스텀 속성도 즉시 적용\n                  if (resolvedTheme === 'dark') {\n                    html.style.setProperty('--bg-primary', '#0f1419');\n                    html.style.setProperty('--text-primary', '#e5e7eb');\n                  } else {\n                    html.style.setProperty('--bg-primary', '#fefcf7');\n                    html.style.setProperty('--text-primary', '#1a1a1a');\n                  }\n                  \n                  // 7. body가 존재하면 안전하게 업데이트\n                  var body = document.body;\n                  if (body) {\n                    // body 클래스는 고정값으로 설정 (하이드레이션 안전)\n                    body.className = 'h-full bg-slate-50 dark:bg-slate-900 antialiased';\n                    body.style.visibility = 'visible';\n                  }\n                  \n                } catch (error) {\n                  // \uD83D\uDD25 완전 폴백: 모든 에러 상황에 대비\n                  try {\n                    var html = document.documentElement;\n                    html.classList.remove('light', 'dark', 'system');\n                    html.classList.add('light');\n                    html.setAttribute('data-theme', 'light');\n                    html.style.setProperty('color-scheme', 'light');\n                    html.style.visibility = 'visible';\n                    if (document.body) {\n                      document.body.className = 'h-full bg-slate-50 dark:bg-slate-900 antialiased';\n                      document.body.style.visibility = 'visible';\n                    }\n                  } catch (finalError) {\n                    // 마지막 안전장치\n                    console.warn('Theme script critical error:', finalError);\n                  }\n                }\n              })();\n            "}})]}),(0,l.jsx)("body",{className:C.body,suppressHydrationWarning:!0,children:(0,l.jsx)(T.N,{defaultTheme:"system",children:(0,l.jsx)(I.Au,{children:(0,l.jsxs)("div",{className:C.container,children:[(0,l.jsx)("aside",{className:C.sidebar,children:(0,l.jsx)(j,{activeRoute:c,onNavigate:e=>{window.location.href=e},collapsed:a,onToggleCollapse:()=>{let e=!a;s(e);try{localStorage.setItem("sidebar-collapsed",e.toString()),v.V.debug("LAYOUT","Sidebar state saved",{collapsed:e})}catch(e){v.V.error("LAYOUT","Failed to save sidebar state",e)}}})}),(0,l.jsxs)("main",{className:C.main,children:[(0,l.jsx)("header",{className:C.header,children:(0,l.jsx)(D,{})}),(0,l.jsx)("div",{className:C.content,children:t})]})]})})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[591,209,432,979,899,744,322,592,940,605,30,173,641,431,110,555,408,219,27,206,409,76,358],()=>t(5515)),_N_E=e.O()}]);