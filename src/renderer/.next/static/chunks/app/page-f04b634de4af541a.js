(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5145:(e,t,a)=>{Promise.resolve().then(a.bind(a,7727))},7727:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var s=a(1659),l=a(9531),r=a(5303),i=a(2107),c=a(8587),n=a(1274),o=a(7955),d=a(6737),m=a(5827),x=a(2427),h=a(4246),u=a(2204),p=a(5252),j=a(3362),g=a(9361);a(6149),a(9241),a(1904),a(817);var b=a(6640),f=a(8220);a(6651),a(7327);var v=a(2381),N=a(7897),w=a(3869),A=a(2792);let k={container:"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950 dark:to-purple-950 border-dashed border-2 border-blue-200 dark:border-blue-800",content:"text-center py-8 px-6",title:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",description:"text-slate-600 dark:text-slate-400 mb-6 max-w-md mx-auto",actionGrid:"grid grid-cols-2 gap-3 max-w-sm mx-auto",actionButton:"h-auto py-3 px-4 flex-col gap-2 text-sm hover:scale-105 transition-transform duration-200",icon:"w-5 h-5",emptyState:"text-slate-500 dark:text-slate-400 text-sm"};function y(e){let{title:t="첫 번째 Loop 프로젝트를 시작해보세요",description:a="새 프로젝트를 만들거나 기존 프로젝트를 가져와서 타이핑 분석을 시작할 수 있습니다.",onCreateProject:l,onImportProject:r,onOpenSample:i,onViewDocs:c,showActions:n=!0}=e,d=(e,t)=>{A.V.info("QUICK_START","Quick action triggered: ".concat(e)),null==t||t()},m=[{id:"create",label:"새 프로젝트",icon:w.A,variant:"primary",onClick:()=>d("create",l),ariaLabel:"새 프로젝트 만들기"},{id:"import",label:"프로젝트 가져오기",icon:N.A,variant:"secondary",onClick:()=>d("import",r),ariaLabel:"기존 프로젝트 가져오기"},{id:"sample",label:"샘플 열기",icon:o.A,variant:"outline",onClick:()=>d("sample",i),ariaLabel:"샘플 프로젝트 열기"},{id:"docs",label:"사용법 보기",icon:v.A,variant:"outline",onClick:()=>d("docs",c),ariaLabel:"사용 가이드 보기"}];return(0,s.jsx)(j.Z,{className:k.container,role:"region","aria-label":"빠른 시작",children:(0,s.jsxs)("div",{className:k.content,children:[(0,s.jsx)("h3",{className:k.title,children:t}),(0,s.jsx)("p",{className:k.description,children:a}),n?(0,s.jsx)("div",{className:k.actionGrid,children:m.map(e=>{let t=e.icon;return(0,s.jsxs)(p.$,{variant:e.variant,className:k.actionButton,onClick:e.onClick,"aria-label":e.ariaLabel,children:[(0,s.jsx)(t,{className:k.icon,"aria-hidden":"true"}),e.label]},e.id)})}):(0,s.jsx)("p",{className:k.emptyState,children:"아직 프로젝트가 없습니다."})]})})}var S=a(4394),D=a(5460),O=a(7129);let I={container:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-lg shadow-lg",header:"flex items-center justify-between mb-4",status:"flex items-center gap-2",pulse:"w-2 h-2 bg-green-400 rounded-full animate-pulse",title:"text-lg font-semibold",time:"font-mono text-lg",stats:"grid grid-cols-3 gap-6 text-center mb-6",statValue:"text-2xl font-bold",statLabel:"text-blue-200 text-sm",controls:"flex items-center gap-3",button:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",startButton:"bg-green-600 hover:bg-green-700 text-white",stopButton:"bg-red-600 hover:bg-red-700 text-white",aiButton:"bg-purple-600 hover:bg-purple-700 text-white"};function R(e){let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))}let C=(0,l.memo)(function(e){let{className:t}=e,{state:a,startMonitoring:r,stopMonitoring:i,toggleAI:c}=(0,O.Mc)(),{isMonitoring:n,isAIOpen:o,sessionData:d,startTime:m}=a,h=l.useMemo(()=>m&&n?Math.floor((Date.now()-m.getTime())/1e3):0,[m,n]),u=(0,l.useCallback)(async()=>{try{A.V.info("MONITORING_CONTROL","Starting monitoring..."),await r()}catch(e){A.V.error("MONITORING_CONTROL","Failed to start monitoring",e)}},[r]),j=(0,l.useCallback)(async()=>{try{A.V.info("MONITORING_CONTROL","Stopping monitoring..."),await i()}catch(e){A.V.error("MONITORING_CONTROL","Failed to stop monitoring",e)}},[i]),g=(0,l.useCallback)(()=>{A.V.info("MONITORING_CONTROL","Toggling AI panel..."),c()},[c]);return(0,s.jsxs)("div",{className:"".concat(I.container," ").concat(t||""),children:[(0,s.jsxs)("div",{className:I.header,children:[(0,s.jsxs)("div",{className:I.status,children:[n&&(0,s.jsx)("div",{className:I.pulse}),(0,s.jsx)("span",{className:I.title,children:n?"모니터링 중":"모니터링 대기"})]}),(0,s.jsx)("div",{className:I.time,children:R(h)})]}),(0,s.jsxs)("div",{className:I.stats,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:I.statValue,children:d.wpm}),(0,s.jsx)("div",{className:I.statLabel,children:"WPM"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:I.statValue,children:d.words}),(0,s.jsx)("div",{className:I.statLabel,children:"단어"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:I.statValue,children:R(d.time)}),(0,s.jsx)("div",{className:I.statLabel,children:"시간"})]})]}),(0,s.jsxs)("div",{className:I.controls,children:[n?(0,s.jsxs)(p.$,{onClick:j,className:"".concat(I.button," ").concat(I.stopButton),disabled:!1,children:[(0,s.jsx)(D.A,{className:"w-4 h-4"}),"모니터링 중지"]}):(0,s.jsxs)(p.$,{onClick:u,className:"".concat(I.button," ").concat(I.startButton),disabled:!1,children:[(0,s.jsx)(x.A,{className:"w-4 h-4"}),"모니터링 시작"]}),(0,s.jsxs)(p.$,{onClick:g,className:"".concat(I.button," ").concat(I.aiButton),disabled:!1,children:[(0,s.jsx)(S.A,{className:"w-4 h-4"}),o?"AI 닫기":"AI 열기"]})]})]})}),V={base:"animate-pulse bg-slate-200 dark:bg-slate-700 rounded",shimmer:"relative overflow-hidden before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_2s_infinite] before:bg-gradient-to-r before:from-transparent before:via-white/20 before:to-transparent"},T=(0,l.memo)(function(e){let{className:t="",width:a,height:l,variant:r="rectangle",shimmer:i=!0}=e,c="".concat(V.base," ").concat(i?V.shimmer:""),n={};return a&&(n.width="number"==typeof a?"".concat(a,"px"):a),l&&(n.height="number"==typeof l?"".concat(l,"px"):l),(0,s.jsx)("div",{className:"".concat(c," ").concat({rectangle:"",circle:"rounded-full",text:"h-4"}[r]," ").concat(t),style:n,"aria-hidden":"true"})}),B=(0,l.memo)(()=>(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(T,{className:"h-4 w-20"}),(0,s.jsx)(T,{className:"h-5 w-5 rounded"})]}),(0,s.jsx)(T,{className:"h-8 w-16 mb-2"}),(0,s.jsx)(T,{className:"h-3 w-24"})]}));B.displayName="KpiCardSkeleton";let M=(0,l.memo)(()=>(0,s.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)(T,{className:"h-5 w-32"}),(0,s.jsx)(T,{className:"h-4 w-12"})]}),(0,s.jsx)(T,{className:"h-2 w-full mb-2"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(T,{className:"h-3 w-16"}),(0,s.jsx)(T,{className:"h-3 w-20"})]})]}));M.displayName="ProjectCardSkeleton";let P=(0,l.memo)(()=>(0,s.jsxs)("div",{className:"flex items-center p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[(0,s.jsx)(T,{className:"h-4 w-4 mr-3"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(T,{className:"h-4 w-32 mb-1"}),(0,s.jsx)(T,{className:"h-3 w-20"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)(T,{className:"h-3 w-16 mb-1"}),(0,s.jsx)(T,{className:"h-3 w-12"})]})]}));P.displayName="FileItemSkeleton";let L=(0,l.memo)(function(e){let{showKpi:t=!0,showProjects:a=!0,showRecentFiles:l=!0}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[t&&(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,t)=>(0,s.jsx)(B,{},t))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a&&(0,s.jsxs)("div",{children:[(0,s.jsx)(T,{className:"h-6 w-32 mb-4"}),(0,s.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,t)=>(0,s.jsx)(M,{},t))})]}),l&&(0,s.jsxs)("div",{children:[(0,s.jsx)(T,{className:"h-6 w-32 mb-4"}),(0,s.jsx)("div",{className:"space-y-2",children:Array.from({length:3}).map((e,t)=>(0,s.jsx)(P,{},t))})]})]})]})});var F=a(5119);let H={container:"flex-1 flex flex-col bg-slate-50 dark:bg-slate-950",header:"bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 p-6",headerContent:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",headerTitle:"text-2xl font-bold text-slate-900 dark:text-slate-100",headerSubtitle:"text-slate-600 dark:text-slate-400 mt-1",headerActions:"flex items-center gap-3",content:"flex-1 overflow-y-auto p-6 space-y-6",mainGrid:"grid grid-cols-1 lg:grid-cols-2 gap-6",projectList:"space-y-4",projectItem:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-4 rounded-lg",projectHeader:"flex items-center justify-between mb-3",projectTitle:"font-semibold text-slate-900 dark:text-slate-100",projectProgress:"mb-2",projectStats:"flex justify-between items-center",progressText:"text-sm font-medium text-slate-700 dark:text-slate-300",progressGoal:"text-xs text-slate-500 dark:text-slate-400",recentFiles:"space-y-2",fileItem:"flex items-center p-3 bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg cursor-pointer transition-colors",fileIcon:"w-4 h-4 text-slate-600 dark:text-slate-400 mr-3 flex-shrink-0",fileInfo:"flex-1 min-w-0",fileName:"font-medium text-slate-900 dark:text-slate-100 text-sm truncate",fileProject:"text-xs text-slate-500 dark:text-slate-400",fileMeta:"text-right flex-shrink-0",fileTime:"text-xs font-medium text-slate-700 dark:text-slate-300",fileStatus:"text-xs text-green-600 dark:text-green-400"};function G(){let e=(0,r.useRouter)(),{state:t,startMonitoring:a,stopMonitoring:v,toggleAI:N,updateSessionData:w}=(0,O.Mc)(),{isMonitoring:k,isAIOpen:S,sessionData:D}=t,[I,R]=(0,l.useState)({wpm:0,words:0,time:0}),[V,T]=(0,l.useState)([]),[B,M]=(0,l.useState)([]),[P,G]=(0,l.useState)({kpi:!0,projects:!0,recentFiles:!0}),[_,K]=(0,l.useState)(!0),[$,E]=(0,l.useState)([{title:"오늘 작성",value:"0",icon:n.A,color:"blue",change:{value:0,type:"neutral",period:"%"}},{title:"이번 주",value:"0",icon:i.A,color:"green",change:{value:0,type:"neutral",period:"%"}},{title:"평균 속도",value:"0 WPM",icon:u.A,color:"purple",change:{value:0,type:"neutral",period:"%"}},{title:"활성 프로젝트",value:"0",icon:d.A,color:"orange",change:{value:0,type:"neutral",period:"개"}}]),W=(0,l.useCallback)(async()=>{try{let[e,t,a]=await Promise.allSettled([window.electronAPI.dashboard.getStats(),window.electronAPI.projects.getAll(),window.electronAPI.dashboard.getRecentSessions()]);if("fulfilled"===e.status&&e.value.success){let t=e.value.data;Z(t),G(e=>({...e,kpi:!1})),A.V.debug("DASHBOARD","✅ Dashboard stats loaded",t)}if("fulfilled"===t.status&&t.value.success){let e=t.value.data||[];T(e.map(e=>({id:e.id||"",title:e.title||"제목 없음",status:e.status||"draft",progress:e.progress||0,goal:e.dueDate?new Date(e.dueDate).toLocaleDateString():"목표 미설정"}))),G(e=>({...e,projects:!1})),A.V.debug("DASHBOARD","✅ Projects loaded",{count:e.length})}if("fulfilled"===a.status&&a.value.success){let e=a.value.data||[];M(e.slice(0,3).map((e,t)=>({id:e.id||"session-".concat(t),name:"session-".concat(new Date(e.startTime).toLocaleDateString(),".md"),project:e.windowTitle||"알 수 없는 앱",time:q(e.endTime||e.startTime),status:"완료"}))),G(e=>({...e,recentFiles:!1})),A.V.debug("DASHBOARD","✅ Recent sessions loaded",{count:e.length})}}catch(e){A.V.error("DASHBOARD","❌ Failed to load dashboard data",e)}},[]);l.useEffect(()=>{W();let e=setInterval(W,3e4);return()=>clearInterval(e)},[W]);let z=e=>e>0?"increase":e<0?"decrease":"neutral",Z=e=>{E([{title:"오늘 작성",value:((null==e?void 0:e.todayWords)||0).toLocaleString(),icon:n.A,color:"blue",change:{value:Math.max(0,(null==e?void 0:e.dailyGrowth)||0),type:z((null==e?void 0:e.dailyGrowth)||0),period:"%"}},{title:"이번 주",value:((null==e?void 0:e.weekWords)||0).toLocaleString(),icon:i.A,color:"green",change:{value:Math.max(0,(null==e?void 0:e.weeklyGrowth)||0),type:z((null==e?void 0:e.weeklyGrowth)||0),period:"%"}},{title:"평균 속도",value:"".concat(Math.round((null==e?void 0:e.avgWpm)||0)," WPM"),icon:u.A,color:"purple",change:{value:Math.max(0,(null==e?void 0:e.wpmImprovement)||0),type:z((null==e?void 0:e.wpmImprovement)||0),period:"%"}},{title:"활성 프로젝트",value:((null==e?void 0:e.activeProjects)||0).toString(),icon:d.A,color:"orange",change:{value:Math.max(0,(null==e?void 0:e.projectGrowth)||0),type:z((null==e?void 0:e.projectGrowth)||0),period:"개"}}])},q=e=>{let t=new Date(e),a=Math.floor((new Date().getTime()-t.getTime())/6e4);if(a<1)return"방금 전";if(a<60)return"".concat(a,"분 전");let s=Math.floor(a/60);if(s<24)return"".concat(s,"시간 전");let l=Math.floor(s/24);return"".concat(l,"일 전")},Q=async()=>{try{A.V.info("DASHBOARD","Monitoring ".concat(k?"stop":"start"," requested")),k?await v():await a()}catch(e){A.V.error("DASHBOARD","Error toggling monitoring",e)}};return(0,s.jsxs)("div",{className:H.container,children:[(0,s.jsx)("div",{className:H.header,children:(0,s.jsxs)("div",{className:H.headerContent,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:H.headerTitle,children:"대시보드"}),(0,s.jsx)("p",{className:H.headerSubtitle,children:"오늘의 창작을 시작하세요"})]}),(0,s.jsxs)("div",{className:H.headerActions,children:[(0,s.jsx)(F.K,{fallback:(0,s.jsxs)(p.$,{variant:"outline",className:"gap-2",children:[(0,s.jsx)(h.A,{className:"w-4 h-4"}),"Loop AI"]}),children:(0,s.jsxs)(p.$,{onClick:()=>{A.V.info("DASHBOARD","AI Panel ".concat(S?"closed":"opened")),N()},variant:S?"primary":"outline",className:"gap-2","aria-pressed":S,children:[(0,s.jsx)(h.A,{className:"w-4 h-4"}),"Loop AI"]})}),(0,s.jsx)(F.K,{fallback:(0,s.jsxs)(p.$,{variant:"primary",className:"gap-2 min-w-[120px]",size:"md",children:[(0,s.jsx)(x.A,{className:"w-4 h-4"}),"타이핑 시작"]}),children:(0,s.jsx)(p.$,{onClick:Q,variant:k?"destructive":"primary",className:"gap-2 min-w-[120px] transition-all duration-200 ".concat(k?"animate-pulse bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl"),size:"md",children:k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.A,{className:"w-4 h-4"}),"모니터링 중지"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.A,{className:"w-4 h-4"}),"타이핑 시작"]})})})]})]})}),(0,s.jsxs)("div",{className:H.content,children:[(0,s.jsx)(C,{}),P.kpi?(0,s.jsx)(L,{showKpi:!0,showProjects:!1,showRecentFiles:!1}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:$.map((e,t)=>(0,s.jsx)(f.n,{...e},t))}),(0,s.jsx)(y,{onCreateProject:async()=>{try{A.V.info("DASHBOARD","\uD83D\uDE80 Creating new project from dashboard"),e.push("/projects?create=true")}catch(e){A.V.error("DASHBOARD","Failed to navigate to project creation",e)}},onImportProject:async()=>{try{A.V.info("DASHBOARD","Importing project from quick start"),(await window.electronAPI.projects.importFile()).success&&A.V.info("DASHBOARD","Project import initiated")}catch(e){A.V.error("DASHBOARD","Failed to import project",e)}},onOpenSample:async()=>{try{A.V.info("DASHBOARD","Opening sample project"),(await window.electronAPI.projects.createSample()).success&&(A.V.info("DASHBOARD","Sample project opened"),W())}catch(e){A.V.error("DASHBOARD","Failed to open sample project",e)}},onViewDocs:()=>{A.V.info("DASHBOARD","View documentation")}}),(0,s.jsxs)("div",{className:H.mainGrid,children:[(0,s.jsxs)(j.Z,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(h.A,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,s.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"활성 프로젝트"})]}),P.projects?(0,s.jsx)(L,{showKpi:!1,showProjects:!0,showRecentFiles:!1}):(0,s.jsx)("div",{className:H.projectList,children:0===V.length?(0,s.jsxs)("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[(0,s.jsx)(h.A,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,s.jsx)("p",{children:"아직 프로젝트가 없습니다"}),(0,s.jsx)("p",{className:"text-sm",children:"새 프로젝트를 만들어보세요!"})]}):V.map(e=>(0,s.jsxs)("div",{className:"".concat(H.projectItem," ").concat("active"===e.status?"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800":""),children:[(0,s.jsxs)("div",{className:H.projectHeader,children:[(0,s.jsx)("h4",{className:H.projectTitle,children:e.title}),(0,s.jsx)(g.E,{variant:"active"===e.status?"primary":"default",size:"sm",children:"active"===e.status?"진행중":"초안"})]}),(0,s.jsx)("div",{className:H.projectProgress,children:(0,s.jsx)(b.z,{value:e.progress,color:"active"===e.status?"blue":"purple",size:"md"})}),(0,s.jsxs)("div",{className:H.projectStats,children:[(0,s.jsxs)("span",{className:H.progressText,children:[e.progress,"% 완료"]}),(0,s.jsxs)("span",{className:H.progressGoal,children:["목표: ",e.goal]})]})]},e.id))})]}),(0,s.jsxs)(j.Z,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(c.A,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),(0,s.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"최근 파일"})]}),P.recentFiles?(0,s.jsx)(L,{showKpi:!1,showProjects:!1,showRecentFiles:!0}):(0,s.jsx)("div",{className:H.recentFiles,children:0===B.length?(0,s.jsxs)("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[(0,s.jsx)(c.A,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,s.jsx)("p",{children:"최근 작업한 파일이 없습니다"}),(0,s.jsx)("p",{className:"text-sm",children:"작업을 시작해보세요!"})]}):B.map(e=>(0,s.jsxs)("div",{className:H.fileItem,role:"button",tabIndex:0,onClick:()=>A.V.info("DASHBOARD","File clicked",{file:e.name}),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),A.V.info("DASHBOARD","File selected",{file:e.name}))},children:[(0,s.jsx)(o.A,{className:H.fileIcon}),(0,s.jsxs)("div",{className:H.fileInfo,children:[(0,s.jsx)("div",{className:H.fileName,children:e.name}),(0,s.jsx)("div",{className:H.fileProject,children:e.project})]}),(0,s.jsxs)("div",{className:H.fileMeta,children:[(0,s.jsx)("div",{className:H.fileTime,children:e.time}),(0,s.jsx)("div",{className:H.fileStatus,children:e.status})]})]},e.id))})]})]})]})]})}function _(){return(0,s.jsx)("div",{className:"min-h-screen bg-slate-50",children:(0,s.jsx)(G,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[209,149,795,805,813,192,350,615,70,313,809,952,101,464,478,742,816,621,391,76,358],()=>t(5145)),_N_E=e.O()}]);