/* 🔥 노션 스타일 마크다운 에디터 CSS */

/* 🔥 CSS 변수 정의 (라이트/다크 모드) */
:root {
  --editor-bg: #ffffff;
  --editor-text: #374151;
  --editor-border: #e5e7eb;
  --toolbar-bg: #ffffff;
  --toolbar-border: #e5e7eb;
  --button-hover: #f3f4f6;
}

:root.dark {
  --editor-bg: #1f2937;
  --editor-text: #f9fafb;
  --editor-border: #374151;
  --toolbar-bg: #111827;
  --toolbar-border: #374151;
  --button-hover: #374151;
}

/* 기본 에디터 스타일링 */
.easymde-container {
  border: none !important;
  background: var(--editor-bg) !important;
  color: var(--editor-text) !important;
}

.CodeMirror {
  background: var(--editor-bg) !important;
  color: var(--editor-text) !important;
  border: 1px solid var(--editor-border) !important;
}

.CodeMirror-cursor {
  border-left: 1px solid var(--editor-text) !important;
}

.CodeMirror-selected {
  background: rgba(59, 130, 246, 0.1) !important;
}

.editor-toolbar {
  display: none !important; /* 기본 툴바 숨기기 */
}

/* 🔥 기가차드 추가: 포커스 모드 스타일링 */
.focus-mode-editor {
  padding: 3rem 4rem !important;
  max-width: 800px !important;
  margin: 0 auto !important;
  background: white !important;
}

.focus-mode-editor .CodeMirror {
  font-size: 18px !important;
  line-height: 1.8 !important;
  padding: 2rem !important;
}

.normal-mode-editor {
  padding: 1rem !important;
}

.normal-mode-editor .CodeMirror {
  font-size: 16px !important;
  line-height: 1.6 !important;
  padding: 1rem !important;
}

/* 🔥 마크다운 구문 완전 숨기기 (기가차드 최종 개선) */
.CodeMirror .cm-formatting,
.CodeMirror .cm-formatting-header,
.CodeMirror .cm-formatting-header-1,
.CodeMirror .cm-formatting-header-2,
.CodeMirror .cm-formatting-header-3,
.CodeMirror .cm-formatting-header-4,
.CodeMirror .cm-formatting-header-5,
.CodeMirror .cm-formatting-header-6,
.CodeMirror .cm-formatting-strong,
.CodeMirror .cm-formatting-em,
.CodeMirror .cm-formatting-link,
.CodeMirror .cm-formatting-link-string,
.CodeMirror .cm-formatting-list,
.CodeMirror .cm-formatting-quote {
  display: none !important; /* 🔥 완전 숨기기 */
  visibility: hidden !important;
  opacity: 0 !important;
  font-size: 0 !important;
  width: 0 !important;
  height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  position: absolute !important;
  left: -99999px !important;
  pointer-events: none !important;
  color: transparent !important; /* 🔥 추가: 색상 투명화 */
  background: transparent !important; /* 🔥 추가: 배경 투명화 */
  text-shadow: none !important; /* 🔥 추가: 그림자 제거 */
  border: none !important;
}

/* 🔥 CodeMirror 헤딩 색상 문제 해결 */
.CodeMirror .cm-header,
.CodeMirror .cm-header-1,
.CodeMirror .cm-header-2,
.CodeMirror .cm-header-3,
.CodeMirror .cm-header-4,
.CodeMirror .cm-header-5,
.CodeMirror .cm-header-6 {
  color: inherit !important; /* 🔥 기본 텍스트 색상 사용 */
  background: transparent !important;
}

/* 🔥 마크다운 토큰 색상 완전 제거 */
.CodeMirror .cm-strong,
.CodeMirror .cm-em,
.CodeMirror .cm-link,
.CodeMirror .cm-url,
.CodeMirror .cm-quote {
  color: inherit !important; /* 🔥 모든 마크다운 요소를 기본 색상으로 */
  background: transparent !important;
}

/* 🔥 헤딩 포매팅 다음의 스페이스도 완전 제거 */
.CodeMirror .cm-formatting-header + .cm-formatting-space,
.CodeMirror .cm-formatting-header-1 + .cm-formatting-space,
.CodeMirror .cm-formatting-header-2 + .cm-formatting-space,
.CodeMirror .cm-formatting-header-3 + .cm-formatting-space,
.CodeMirror .cm-formatting-header-4 + .cm-formatting-space,
.CodeMirror .cm-formatting-header-5 + .cm-formatting-space,
.CodeMirror .cm-formatting-header-6 + .cm-formatting-space {
  position: fixed !important; /* 🔥 fixed로 변경 */
  left: -99999px !important;
  top: -99999px !important;
  width: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
  opacity: 0 !important;
  font-size: 0 !important;
  line-height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  display: none !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

/* 마크다운 링크 포매팅 완전 숨기기 */
.CodeMirror .cm-formatting-link,
.CodeMirror .cm-formatting-link-string {
  position: absolute !important;
  left: -9999px !important;
  top: -9999px !important;
  width: 0 !important;
  opacity: 0 !important;
  font-size: 0 !important;
  display: none !important;
}

/* 마크다운 리스트 포매팅 완전 숨기기 */
.CodeMirror .cm-formatting-list {
  position: absolute !important;
  left: -9999px !important;
  top: -9999px !important;
  width: 0 !important;
  opacity: 0 !important;
  font-size: 0 !important;
  display: none !important;
}

/* 마크다운 굵게/기울임 포매팅 완전 숨기기 */
.CodeMirror .cm-formatting-strong,
.CodeMirror .cm-formatting-em {
  position: absolute !important;
  left: -9999px !important;
  top: -9999px !important;
  width: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
  opacity: 0 !important;
  font-size: 0 !important;
  line-height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  display: none !important;
}

/* 🔥 헤딩 스타일 (노션 스타일) */
.CodeMirror .cm-header-1 {
  font-size: 2em !important;
  font-weight: 700 !important;
  color: #1f2937 !important;
  line-height: 1.2 !important;
}

.CodeMirror .cm-header-2 {
  font-size: 1.5em !important;
  font-weight: 600 !important;
  color: #374151 !important;
  line-height: 1.3 !important;
}

.CodeMirror .cm-header-3 {
  font-size: 1.25em !important;
  font-weight: 600 !important;
  color: #4b5563 !important;
  line-height: 1.4 !important;
}

/* 🔥 텍스트 포매팅 스타일 */
.CodeMirror .cm-strong {
  font-weight: 700 !important;
  color: #111827 !important;
}

.CodeMirror .cm-em {
  font-style: italic !important;
  color: #374151 !important;
}

/* 🔥 리스트 스타일 개선 */
.CodeMirror .cm-variable-2 {
  color: #6b7280 !important;
}

/* 🔥 인용구 스타일 */
.CodeMirror .cm-quote {
  color: #6b7280 !important;
  font-style: italic !important;
  border-left: 4px solid #e5e7eb !important;
  padding-left: 12px !important;
  margin-left: 4px !important;
}

/* 🔥 코드 블록 스타일 */
.CodeMirror .cm-comment {
  background-color: #f9fafb !important;
  color: #ef4444 !important;
  font-family: 'JetBrains Mono', 'SF Mono', Consolas, monospace !important;
  font-size: 0.9em !important;
  padding: 2px 4px !important;
  border-radius: 4px !important;
}

/* 🔥 추가 마크다운 포매팅 클래스들 완전 숨기기 */
.CodeMirror .cm-formatting-code,
.CodeMirror .cm-formatting-code-block,
.CodeMirror .cm-formatting-quote,
.CodeMirror .cm-formatting-task,
.CodeMirror .cm-formatting-escape,
.CodeMirror .cm-formatting-image,
.CodeMirror .cm-formatting-reference {
  position: absolute !important;
  left: -9999px !important;
  top: -9999px !important;
  width: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
  opacity: 0 !important;
  font-size: 0 !important;
  line-height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  display: none !important;
}

/* 🔥 에디터 전체 스타일링 */
.CodeMirror {
  border: none !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif !important;
  font-size: 16px !important;
  line-height: 1.6 !important;
  color: #1f2937 !important;
  background: white !important;
  padding: 20px !important;
}

.CodeMirror-focused .CodeMirror-cursor {
  border-left: 2px solid #3b82f6 !important;
}

.CodeMirror-lines {
  padding: 0 !important;
}

.CodeMirror-line {
  padding: 4px 0 !important;
}

/* 🔥 선택 영역 스타일 */
.CodeMirror-selected {
  background: #dbeafe !important;
}

/* 🔥 플레이스홀더 스타일 */
.CodeMirror-placeholder {
  color: #9ca3af !important;
  font-style: italic !important;
}

/* 🔥 스크롤바 스타일링 (macOS 스타일) */
.CodeMirror-scrollbar-filler,
.CodeMirror-gutter-filler {
  background-color: transparent !important;
}

.CodeMirror-vscrollbar,
.CodeMirror-hscrollbar {
  outline: none !important;
}

.CodeMirror-vscrollbar::-webkit-scrollbar,
.CodeMirror-hscrollbar::-webkit-scrollbar {
  width: 8px !important;
  height: 8px !important;
}

.CodeMirror-vscrollbar::-webkit-scrollbar-track,
.CodeMirror-hscrollbar::-webkit-scrollbar-track {
  background: transparent !important;
}

.CodeMirror-vscrollbar::-webkit-scrollbar-thumb,
.CodeMirror-hscrollbar::-webkit-scrollbar-thumb {
  background: #d1d5db !important;
  border-radius: 4px !important;
}

.CodeMirror-vscrollbar::-webkit-scrollbar-thumb:hover,
.CodeMirror-hscrollbar::-webkit-scrollbar-thumb:hover {
  background: #9ca3af !important;
}

/* 🔥 교차검증: 절대 위치로 화면 밖으로 이동 (백업 방법) */
.CodeMirror .cm-formatting::before,
.CodeMirror .cm-formatting-header::before,
.CodeMirror .cm-formatting-header-1::before,
.CodeMirror .cm-formatting-header-2::before,
.CodeMirror .cm-formatting-header-3::before {
  content: '';
  position: absolute;
  left: -9999px !important;
  top: -9999px !important;
}

/* 🔥 한글 입력 최적화 */
.CodeMirror-composing {
  border-bottom: 2px solid #3b82f6 !important;
  background-color: #eff6ff !important;
}

/* 🔥 미리보기 모드 스타일링 */
.editor-preview,
.editor-preview-side {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif !important;
  font-size: 16px !important;
  line-height: 1.6 !important;
  color: #1f2937 !important;
  background: white !important;
  padding: 20px !important;
}

.editor-preview h1,
.editor-preview-side h1 {
  font-size: 2em !important;
  font-weight: 700 !important;
  color: #1f2937 !important;
  margin-bottom: 16px !important;
}

.editor-preview h2,
.editor-preview-side h2 {
  font-size: 1.5em !important;
  font-weight: 600 !important;
  color: #374151 !important;
  margin-bottom: 12px !important;
}

.editor-preview h3,
.editor-preview-side h3 {
  font-size: 1.25em !important;
  font-weight: 600 !important;
  color: #4b5563 !important;
  margin-bottom: 8px !important;
}

.editor-preview p,
.editor-preview-side p {
  margin-bottom: 16px !important;
}

.editor-preview ul,
.editor-preview ol,
.editor-preview-side ul,
.editor-preview-side ol {
  margin-bottom: 16px !important;
  padding-left: 24px !important;
}

.editor-preview blockquote,
.editor-preview-side blockquote {
  border-left: 4px solid #e5e7eb !important;
  padding-left: 16px !important;
  margin: 16px 0 !important;
  color: #6b7280 !important;
  font-style: italic !important;
}

.editor-preview code,
.editor-preview-side code {
  background-color: #f3f4f6 !important;
  color: #ef4444 !important;
  font-family: 'JetBrains Mono', 'SF Mono', Consolas, monospace !important;
  font-size: 0.9em !important;
  padding: 2px 6px !important;
  border-radius: 4px !important;
}

.editor-preview pre,
.editor-preview-side pre {
  background-color: #f9fafb !important;
  border: 1px solid #e5e7eb !important;
  border-radius: 8px !important;
  padding: 16px !important;
  margin: 16px 0 !important;
  overflow-x: auto !important;
}

.editor-preview pre code,
.editor-preview-side pre code {
  background: none !important;
  color: #1f2937 !important;
  padding: 0 !important;
}
