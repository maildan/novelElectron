(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{4758:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Z});var l=a(4568),r=a(7620),s=a(2942),o=a(4529),n=a(5173),i=a(7432),c=a(1457),d=a(3991),u=a(9513),m=a(1164),x=a(5685),h=a(5958),p=a(3425),g=a(1690),b=a(2187),v=a(8262),f=a(9324),j=a(6740),w=a(7718),N=a(6439),C=a(4775),k=a(662);let A={container:"group hover:shadow-lg transition-all duration-300 hover:-translate-y-1",header:"flex items-start justify-between p-4 pb-2",title:"text-lg font-semibold text-slate-900 dark:text-slate-100 line-clamp-2 flex-1 mr-2",moreButton:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8 p-0",content:"px-4 pb-2",description:"text-sm text-slate-600 dark:text-slate-400 line-clamp-3 mb-3",metaSection:"flex items-center gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4",metaItem:"flex items-center gap-1",progressSection:"mb-4",progressHeader:"flex items-center justify-between mb-2",progressLabel:"text-sm font-medium text-slate-700 dark:text-slate-300",progressValue:"text-sm text-slate-500 dark:text-slate-400",footer:"px-4 pb-4",actionButtons:"flex items-center gap-2",actionButton:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",statusBadge:"mb-2",icon:"w-4 h-4"};function E(e){let t,{project:a,onView:r,onEdit:s,onShare:o,onDelete:n,onMore:i,showActions:c=!0}=e,E=(e,t)=>{k.V.info("PROJECT_CARD","Action triggered: ".concat(e),{projectId:a.id}),null==t||t(a)},R=(e,t,l)=>{e.stopPropagation(),e.preventDefault(),k.V.info("PROJECT_CARD","Action triggered: ".concat(t),{projectId:a.id}),null==l||l(a)},P=!1,T=null;try{var y;let e=null==(y=a.description)?void 0:y.match(RegExp("\\[Google Docs 연동 정보: (\\{.*\\})\\]$","s"));if(e&&e[1]){let t=JSON.parse(e[1]);t&&t.isGoogleDocsProject&&(P=!0,T=t)}}catch(e){k.V.debug("PROJECT_CARD","Google Docs 메타데이터 파싱 실패",{err:e,projectId:a.id})}let D=(null==T?void 0:T.originalDescription)?T.originalDescription:a.description,O=e=>{if(e)try{var t,a;(null==(a=window.electronAPI)||null==(t=a.shell)?void 0:t.openExternal)?window.electronAPI.shell.openExternal(e):window.open(e,"_blank","noopener")}catch(e){k.V.error("PROJECT_CARD","외부 링크 열기 실패",e)}},S=e=>{e.stopPropagation(),e.preventDefault(),E("more",i)},G=e=>new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"short",day:"numeric"}).format(e),_=[{id:"view",label:"보기",icon:h.A,variant:"ghost",onClick:e=>E("view",r),ariaLabel:"프로젝트 보기"},{id:"edit",label:"편집",icon:m.A,variant:"ghost",onClick:e=>E("edit",s),ariaLabel:"프로젝트 편집"},{id:"share",label:"공유",icon:b.A,variant:"ghost",onClick:e=>E("share",o),ariaLabel:"프로젝트 공유"},{id:"delete",label:"삭제",icon:v.A,variant:"ghost",onClick:e=>E("delete",n),ariaLabel:"프로젝트 삭제"}];return(0,l.jsxs)(f.Z,{className:"".concat(A.container," cursor-pointer ").concat(P?"ring-2 ring-yellow-400 dark:ring-yellow-600":""),role:"article","aria-label":"프로젝트: ".concat(a.title),onClick:()=>{k.V.info("PROJECT_CARD","Card clicked",{projectId:a.id}),null==r||r(a)},children:[(0,l.jsxs)("div",{className:A.header,children:[(0,l.jsxs)("h3",{className:A.title,children:[a.title,P&&(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),O((null==T?void 0:T.googleDocUrl)||void 0)},title:"Google Docs 원본 열기",className:"ml-2 inline-flex items-center text-yellow-600 dark:text-yellow-400","aria-label":"Open Google Docs",children:(0,l.jsx)(x.A,{className:A.icon})})]}),c&&i&&(0,l.jsx)(C.m_,{content:"더 보기",side:"bottom",sideOffset:4,children:(0,l.jsx)(j.$,{variant:"ghost",size:"sm",className:A.moreButton,onClick:e=>{e.stopPropagation(),e.preventDefault(),S(e)},"aria-label":"프로젝트 옵션 더 보기",children:(0,l.jsx)(g.A,{className:A.icon})})})]}),(0,l.jsxs)("div",{className:A.content,children:[(0,l.jsxs)("div",{className:A.statusBadge,children:[(0,l.jsx)(N.E,{variant:P?"warning":(e=>{switch(e){case"completed":return"success";case"active":return"primary";case"paused":return"warning";default:return"default"}})(a.status),size:"sm",children:P?"Google Docs":(e=>{switch(e){case"completed":return"완료";case"active":return"진행중";case"paused":return"일시정지";case"draft":return"초안";default:return"알 수 없음"}})(a.status)}),P&&(null==T?void 0:T.googleDocUrl)&&(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),O(null==T?void 0:T.googleDocUrl)},className:"ml-2 text-xs text-blue-600 dark:text-blue-400 underline",children:"원본 열기"})]}),(0,l.jsx)("p",{className:A.description,children:D}),(0,l.jsxs)("div",{className:A.metaSection,children:[(0,l.jsxs)("div",{className:A.metaItem,children:[(0,l.jsx)(d.A,{className:A.icon,"aria-hidden":"true"}),(0,l.jsx)("span",{children:G(a.createdAt)})]}),a.wordCount&&(0,l.jsxs)("div",{className:A.metaItem,children:[(0,l.jsx)(p.A,{className:A.icon,"aria-hidden":"true"}),(0,l.jsxs)("span",{children:[(t=a.wordCount,new Intl.NumberFormat("ko-KR").format(t)),"자"]})]}),(0,l.jsxs)("div",{className:A.metaItem,children:[(0,l.jsx)(u.A,{className:A.icon,"aria-hidden":"true"}),(0,l.jsx)("span",{children:G(a.updatedAt)})]})]}),(0,l.jsxs)("div",{className:A.progressSection,children:[(0,l.jsxs)("div",{className:A.progressHeader,children:[(0,l.jsx)("span",{className:A.progressLabel,children:"진행률"}),(0,l.jsxs)("span",{className:A.progressValue,children:[Math.round(a.progress),"%"]})]}),(0,l.jsx)(w.z,{value:a.progress,size:"sm",color:a.progress>=100?"green":"blue","aria-label":"프로젝트 진행률 ".concat(Math.round(a.progress),"%")})]})]}),c&&(0,l.jsx)("div",{className:A.footer,onClick:e=>{e.stopPropagation()},children:(0,l.jsx)("div",{className:A.actionButtons,onClick:e=>{e.stopPropagation()},children:_.map(e=>{let t=e.icon;return(0,l.jsx)(C.m_,{content:e.label,side:"bottom",sideOffset:4,children:(0,l.jsx)(j.$,{variant:e.variant,size:"sm",className:A.actionButton,onClick:t=>{var l;return R(t,e.id,null==(l=e.onClick)?void 0:l.bind(null,a))},"aria-label":e.ariaLabel,children:(0,l.jsx)(t,{className:A.icon})})},e.id)})})})]})}var R=a(8237);let P={container:"space-y-6",header:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",title:"text-2xl font-bold text-slate-900 dark:text-slate-100",controls:"flex flex-col gap-3 md:flex-row md:items-center md:flex-wrap",searchContainer:"relative w-full md:flex-1 md:min-w-[260px] md:max-w-md",searchIcon:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",searchInput:"pl-10",filters:"flex items-center gap-2 flex-wrap",filterButton:"h-9",sortButton:"h-9 w-9 p-0",createButton:"flex items-center gap-2 whitespace-nowrap",grid:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",emptyState:"col-span-full text-center py-12",emptyStateIcon:"w-16 h-16 mx-auto text-slate-400 mb-4",emptyStateTitle:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",emptyStateDescription:"text-slate-500 dark:text-slate-400 mb-6",statsBar:"flex items-center gap-4 flex-wrap text-sm text-slate-600 dark:text-slate-400",statsItem:"flex items-center gap-1 whitespace-nowrap"};function T(e){let{projects:t,loading:a=!1,onCreateProject:s,onViewProject:d,onEditProject:u,onShareProject:m,onDeleteProject:x,showCreateButton:h=!0,searchPlaceholder:p="프로젝트 검색..."}=e,[g,b]=(0,r.useState)(""),[v,f]=(0,r.useState)("all"),[w,N]=(0,r.useState)("updatedAt"),[C,A]=(0,r.useState)("desc"),T=(0,r.useMemo)(()=>{let e=[...t];if(g.trim()){let t=g.toLowerCase();e=e.filter(e=>{var a,l;return e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||(null==(a=e.author)?void 0:a.toLowerCase().includes(t))||(null==(l=e.genre)?void 0:l.toLowerCase().includes(t))})}return"all"!==v&&(e=e.filter(e=>e.status===v)),e.sort((e,t)=>{let a,l;switch(w){case"title":a=e.title.toLowerCase(),l=t.title.toLowerCase();break;case"createdAt":a=e.createdAt.getTime(),l=t.createdAt.getTime();break;case"updatedAt":a=e.updatedAt.getTime(),l=t.updatedAt.getTime();break;case"progress":a=e.progress,l=t.progress;break;default:return 0}return a<l?"asc"===C?-1:1:a>l?"asc"===C?1:-1:0}),e},[t,g,v,w,C]),y=(0,r.useMemo)(()=>{let e=t.length,a=t.filter(e=>"active"===e.status).length;return{total:e,active:a,completed:t.filter(e=>"completed"===e.status).length,paused:t.filter(e=>"paused"===e.status).length}},[t]),D=e=>{b(e),k.V.debug("PROJECT_GRID","Search query: ".concat(e))},O=e=>{f(e),k.V.debug("PROJECT_GRID","Filter by status: ".concat(e))},S=e=>{w===e?A("asc"===C?"desc":"asc"):(N(e),A("desc")),k.V.debug("PROJECT_GRID","Sort by: ".concat(e," ").concat(C))},G=()=>{k.V.info("PROJECT_GRID","Create project button clicked"),null==s||s()},_=[{value:"all",label:"전체",count:y.total},{value:"active",label:"진행중",count:y.active},{value:"completed",label:"완료",count:y.completed},{value:"paused",label:"일시정지",count:y.paused}];return a?(0,l.jsx)("div",{className:P.container,children:(0,l.jsx)("div",{className:P.emptyState,children:(0,l.jsx)("div",{className:P.emptyStateTitle,children:"로딩 중..."})})}):(0,l.jsxs)("div",{className:P.container,role:"main","aria-label":"프로젝트 목록",children:[(0,l.jsxs)("div",{className:P.header,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:P.title,children:"프로젝트"}),(0,l.jsxs)("div",{className:P.statsBar,children:[(0,l.jsxs)("div",{className:P.statsItem,children:["총 ",y.total,"개"]}),(0,l.jsxs)("div",{className:P.statsItem,children:["진행중 ",y.active,"개"]}),(0,l.jsxs)("div",{className:P.statsItem,children:["완료 ",y.completed,"개"]})]})]}),(0,l.jsxs)("div",{className:P.controls,children:[(0,l.jsxs)("div",{className:P.searchContainer,children:[(0,l.jsx)(n.A,{className:P.searchIcon,"aria-hidden":"true"}),(0,l.jsx)(R.p,{type:"text",placeholder:p,value:g,onChange:e=>D(e.target.value),className:P.searchInput,"aria-label":"프로젝트 검색"})]}),(0,l.jsx)("div",{className:P.filters,children:_.map(e=>(0,l.jsxs)(j.$,{variant:v===e.value?"primary":"outline",size:"sm",className:P.filterButton,onClick:()=>O(e.value),"aria-label":"".concat(e.label," 필터"),"aria-pressed":v===e.value,children:[e.label," (",e.count,")"]},e.value))}),(0,l.jsx)(j.$,{variant:"outline",size:"sm",className:P.sortButton,onClick:()=>S("updatedAt"),"aria-label":"업데이트 순으로 ".concat("asc"===C?"내림차순":"오름차순"," 정렬"),children:"asc"===C?(0,l.jsx)(i.A,{className:"w-4 h-4"}):(0,l.jsx)(c.A,{className:"w-4 h-4"})}),h&&(0,l.jsxs)(j.$,{variant:"primary",onClick:G,className:P.createButton,"aria-label":"새 프로젝트 생성",children:[(0,l.jsx)(o.A,{className:"w-4 h-4"}),"새 프로젝트"]})]})]}),T.length>0?(0,l.jsx)("div",{className:P.grid,role:"grid","aria-label":"".concat(T.length,"개의 프로젝트"),children:T.map(e=>(0,l.jsx)("div",{role:"gridcell",children:(0,l.jsx)(E,{project:e,onView:d,onEdit:u,onShare:m,onDelete:x})},e.id))}):(0,l.jsxs)("div",{className:P.emptyState,children:[(0,l.jsx)("div",{className:P.emptyStateIcon,children:g||"all"!==v?(0,l.jsx)(n.A,{}):(0,l.jsx)(o.A,{})}),(0,l.jsx)("h3",{className:P.emptyStateTitle,children:g||"all"!==v?"검색 결과가 없습니다":"아직 프로젝트가 없습니다"}),(0,l.jsx)("p",{className:P.emptyStateDescription,children:g||"all"!==v?"다른 검색어나 필터를 시도해보세요.":"새 프로젝트를 만들어서 타이핑 분석을 시작해보세요."}),h&&!g&&"all"===v&&(0,l.jsxs)(j.$,{variant:"primary",onClick:G,className:P.createButton,children:[(0,l.jsx)(o.A,{className:"w-4 h-4"}),"첫 번째 프로젝트 만들기"]})]})]})}var y=a(417),D=a(3643),O=a(8976),S=a(3809),G=a(8442),_=a(952),V=a(6376),I=a(3052),J=a(1564),L=a(2463);let B={overlay:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",modal:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl dark:shadow-slate-900/50 w-full max-w-4xl max-h-[90vh] overflow-hidden border border-slate-200 dark:border-slate-700",header:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",title:"text-2xl font-bold text-slate-900 dark:text-slate-100",closeButton:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors p-1 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",content:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] bg-white dark:bg-slate-900",platformSection:"mb-8",sectionTitle:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",platformGrid:"grid grid-cols-1 md:grid-cols-3 gap-4",platformCard:"p-4 border-2 rounded-xl cursor-pointer transition-all hover:border-blue-300 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/20",platformCardSelected:"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-950/20",platformCardDefault:"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",platformIcon:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2",platformTitle:"font-semibold text-slate-900 dark:text-slate-100 mb-1",platformDescription:"text-sm text-slate-600 dark:text-slate-400",formSection:"mb-6",label:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2",inputGroup:"mb-4",genreGrid:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",genreButton:"p-2 text-sm border rounded-lg transition-colors",genreSelected:"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300",genreDefault:"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-slate-300 dark:hover:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-800",footer:"flex items-center justify-between p-6 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",secondaryButton:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",primaryButton:"px-6 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},F=[{id:"loop",name:"Loop Editor",description:"통합 타이핑 분석과 함께하는 전용 에디터",icon:D.A,recommended:!0},{id:"google-docs",name:"Google Docs",description:"실시간 협업과 클라우드 동기화",icon:G.A,external:!0},{id:"import",name:"파일 불러오기",description:"Word, 텍스트 파일에서 프로젝트 생성",icon:J.A,action:"import"}],M=[{id:"novel",name:"소설",icon:D.A},{id:"essay",name:"에세이",icon:S.A},{id:"blog",name:"블로그",icon:V.A},{id:"tech",name:"기술",icon:O.A},{id:"diary",name:"일기",icon:p.A},{id:"poem",name:"시",icon:_.A},{id:"script",name:"대본",icon:p.A},{id:"other",name:"기타",icon:o.A}];function U(e){let{isOpen:t,onClose:a,onCreate:s}=e,[o,n]=(0,r.useState)("loop"),[i,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[m,h]=(0,r.useState)("novel"),[g,b]=(0,r.useState)(1e4),[v,f]=(0,r.useState)(""),[w,C]=(0,r.useState)(!1),[A,E]=(0,r.useState)(!1),[P,T]=(0,r.useState)([]),[D,O]=(0,r.useState)(null);if((0,r.useEffect)(()=>{let e=e=>{k.V.info("PROJECT_CREATOR","\uD83D\uDD25 OAuth 성공 이벤트 수신 - Google Docs 목록 새로고침",e),"google-docs"===o&&setTimeout(()=>{G()},1e3)},t=e=>{k.V.info("PROJECT_CREATOR","\uD83D\uDD25 인증 상태 변경 이벤트 수신",e),"google-docs"===o&&setTimeout(()=>{G()},1e3)},a=e=>{k.V.info("PROJECT_CREATOR","\uD83D\uDD25 강제 새로고침 이벤트 수신",e),"google-docs"===o&&setTimeout(()=>{G()},500)},l=e=>{k.V.info("PROJECT_CREATOR","\uD83D\uDD25 지연된 인증 상태 확인 이벤트 수신",e),"google-docs"===o&&G()};if(window.electronAPI)return window.electronAPI.on("oauth-success",e),window.electronAPI.on("auth-status-changed",t),window.electronAPI.on("google-auth-completed",e),window.electronAPI.on("force-auth-status-refresh",a),window.electronAPI.on("delayed-auth-status-check",l),()=>{var r,s,o,n,i;null==(r=window.electronAPI)||r.removeListener("oauth-success",e),null==(s=window.electronAPI)||s.removeListener("auth-status-changed",t),null==(o=window.electronAPI)||o.removeListener("google-auth-completed",e),null==(n=window.electronAPI)||n.removeListener("force-auth-status-refresh",a),null==(i=window.electronAPI)||i.removeListener("delayed-auth-status-check",l)}},[o]),!t)return null;let S=async()=>{try{var e,t,a,l;if(k.V.info("PROJECT_CREATOR","Google Docs 연동 시작"),!window.electronAPI)return void alert("데스크톱 앱에서만 사용 가능합니다");k.V.info("PROJECT_CREATOR","현재 인증 상태 확인 중...");let r=await (null==(t=window.electronAPI)||null==(e=t.oauth)?void 0:e.getAuthStatus());if(k.V.info("PROJECT_CREATOR","인증 상태 결과:",r),r&&r.success&&r.data&&r.data.isAuthenticated){k.V.info("PROJECT_CREATOR","✅ 이미 인증됨 - 문서 목록 표시",{userEmail:r.data.userEmail}),await G();return}k.V.info("PROJECT_CREATOR","❌ 인증 필요 - OAuth 시작");try{let e=localStorage.getItem("preferredGoogleEmail"),t=await (null==(l=window.electronAPI)||null==(a=l.oauth)?void 0:a.startGoogleAuth(e||void 0));if(k.V.info("PROJECT_CREATOR","OAuth 시작 결과:",t),t&&t.success)alert("브라우저에서 Google 계정으로 로그인해주세요.\n로그인 완료 후 자동으로 문서 목록이 표시됩니다.");else throw Error((null==t?void 0:t.error)||"OAuth 시작 실패")}catch(e){k.V.error("PROJECT_CREATOR","OAuth 시작 실패:",e),alert("Google 인증 시작 실패: ".concat(e instanceof Error?e.message:"알 수 없는 오류"))}}catch(e){k.V.error("PROJECT_CREATOR","Google Docs 연동 실패:",e),alert("Google Docs 연동 실패: ".concat(e instanceof Error?e.message:"알 수 없는 오류"))}},G=async()=>{try{var e,t,a,l;k.V.info("PROJECT_CREATOR","Google Docs 목록 조회 시작");let r=await (null==(t=window.electronAPI)||null==(e=t.oauth)?void 0:e.getAuthStatus());if(!r||!r.success||!r.data||!r.data.isAuthenticated){k.V.warn("PROJECT_CREATOR","인증 상태 확인 실패:",r),alert("Google 인증이 만료되었습니다. 다시 로그인해주세요.");return}k.V.info("PROJECT_CREATOR","✅ 인증 확인됨, 문서 목록 조회 중...",{userEmail:r.data.userEmail});let s=await (null==(l=window.electronAPI)||null==(a=l.oauth)?void 0:a.getGoogleDocuments());if(k.V.info("PROJECT_CREATOR","Google Docs 목록 조회 결과:",s),s&&s.success&&s.data){let e=s.data;if(k.V.info("PROJECT_CREATOR","✅ ".concat(e.length,"개 문서 발견")),0===e.length)return void alert("Google Docs에서 문서를 찾을 수 없습니다.\n\nGoogle Drive에 문서를 만들고 다시 시도해주세요.");T(e),E(!0)}else{k.V.error("PROJECT_CREATOR","Google Docs 목록 조회 실패:",s);let e=(null==s?void 0:s.error)||"문서 목록을 가져올 수 없습니다";e.includes("인증")||e.includes("401")?alert("Google 인증이 만료되었습니다. 다시 로그인해주세요."):alert("문서 목록 조회 실패: ".concat(e))}}catch(e){k.V.error("PROJECT_CREATOR","Google Docs 목록 조회 중 예외 발생:",e),alert("문서 목록 조회 실패: ".concat(e instanceof Error?e.message:"알 수 없는 오류"))}},_=async e=>{var t,a,l;let r=(null==e?void 0:e.name)||(null==e?void 0:e.title)||"제목 없음";if(c(r),u("Google Docs에서 가져온 문서: ".concat(r)),n("google-docs"),O(e),E(!1),k.V.info("PROJECT_CREATOR","Google Docs 선택됨:",{id:null==e?void 0:e.id,name:r,webViewLink:null==e?void 0:e.webViewLink}),(null==e?void 0:e.id)&&(null==(a=window.electronAPI)||null==(t=a.oauth)?void 0:t.importGoogleDoc))try{k.V.info("PROJECT_CREATOR","Google Docs 내용 가져오는 중...",{documentId:e.id});let t=await window.electronAPI.oauth.importGoogleDoc(e.id);t.success&&(null==(l=t.data)?void 0:l.content)?(k.V.info("PROJECT_CREATOR","Google Docs 내용 가져오기 성공",{contentLength:t.data.content.length}),O({...e,content:t.data.content})):k.V.warn("PROJECT_CREATOR","Google Docs 내용 가져오기 실패",t.error)}catch(e){k.V.error("PROJECT_CREATOR","Google Docs 내용 가져오기 중 오류",e)}},V=async()=>{let e=i||"",t=d||"";if(!e.trim())return void k.V.warn("PROJECT_CREATOR","Project title is required");C(!0);try{var l;let r={title:e.trim(),description:t.trim()||"새로운 프로젝트입니다.",genre:m,platform:o,content:"google-docs"===o&&(null==D?void 0:D.content)?D.content:"loop"===o?z(m):void 0,targetWords:g,deadline:v?new Date(v):void 0,googleDocId:"google-docs"===o&&D?D.id:void 0,googleDocUrl:"google-docs"===o&&D?D.webViewLink:void 0};k.V.info("PROJECT_CREATOR","Creating new project",{title:r.title,platform:r.platform,genre:r.genre,googleDocId:r.googleDocId,googleDocUrl:r.googleDocUrl,hasContent:!!r.content,contentLength:(null==(l=r.content)?void 0:l.length)||0}),await s(r),c(""),u(""),h("novel"),n("loop"),b(1e4),f(""),O(null),a()}catch(e){k.V.error("PROJECT_CREATOR","Failed to create project",e)}finally{C(!1)}},J=async e=>{n(e),k.V.debug("PROJECT_CREATOR","Platform selected: ".concat(e)),"google-docs"===e&&await S()},U=e=>{h(e),k.V.debug("PROJECT_CREATOR","Genre selected: ".concat(e))},z=e=>{var t,a;let l={novel:"제1장: 새로운 시작\n\n여기서부터 당신의 이야기가 시작됩니다.\n\n✍️ 작성 팁:\n- 등장인물을 구체적으로 묘사해보세요\n- 독자가 몰입할 수 있는 장면을 그려보세요\n- 하루에 500단어씩 꾸준히 작성해보세요",essay:"# 제목을 여기에 입력하세요\n\n오늘의 생각을 자유롭게 써보세요.\n\n일상의 작은 순간들이 때로는 가장 의미 있는 글이 됩니다.",blog:"# 블로그 포스트 제목\n\n## 소개\n\n독자들과 공유하고 싶은 이야기를 써보세요.\n\n## 본문\n\n경험, 배움, 생각을 자유롭게 표현해보세요.",tech:"# 기술 문서 제목\n\n## 개요\n\n## 문제 정의\n\n## 해결 방법\n\n## 결론\n\n코드와 설명을 함께 작성해보세요.",diary:"".concat(new Date().toLocaleDateString("ko-KR")," 일기\n\n오늘 있었던 일들을 기록해보세요.\n\n소중한 순간들을 글로 남겨보세요."),other:"새로운 프로젝트가 시작되었습니다.\n\n자유롭게 내용을 작성해보세요."},r="새로운 프로젝트가 시작되었습니다.\n\n자유롭게 내용을 작성해보세요.";return e&&null!=(a=null!=(t=l[e])?t:l.other)?a:r};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:B.overlay,onClick:a,children:(0,l.jsxs)("div",{className:B.modal,onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:B.header,children:[(0,l.jsx)("h2",{className:B.title,children:"새 프로젝트 만들기"}),(0,l.jsx)("button",{onClick:a,className:B.closeButton,"aria-label":"닫기",children:(0,l.jsx)(L.A,{className:"w-6 h-6"})})]}),(0,l.jsxs)("div",{className:B.content,children:[(0,l.jsxs)("div",{className:B.platformSection,children:[(0,l.jsx)("h3",{className:B.sectionTitle,children:"작성 플랫폼 선택"}),(0,l.jsx)("div",{className:B.platformGrid,children:F.map(e=>{let t=e.icon;return(0,l.jsxs)("div",{className:"".concat(B.platformCard," ").concat(o===e.id?B.platformCardSelected:B.platformCardDefault),onClick:()=>J(e.id),children:[(0,l.jsx)(t,{className:B.platformIcon}),(0,l.jsxs)("div",{className:B.platformTitle,children:[e.name,e.recommended&&(0,l.jsx)(N.E,{className:"ml-2 text-xs bg-blue-100 text-blue-700",children:"추천"}),e.external&&(0,l.jsx)(x.A,{className:"inline w-4 h-4 ml-1"})]}),(0,l.jsx)("p",{className:B.platformDescription,children:e.description})]},e.id)})})]}),(0,l.jsxs)("div",{className:B.formSection,children:[(0,l.jsx)("h3",{className:B.sectionTitle,children:"프로젝트 정보"}),(0,l.jsxs)("div",{className:B.inputGroup,children:[(0,l.jsx)("label",{className:B.label,htmlFor:"project-title",children:"프로젝트 제목 *"}),(0,l.jsx)(R.p,{id:"project-title",type:"text",placeholder:"예: 나의 첫 번째 소설",value:i,onChange:e=>c(e.target.value||""),maxLength:100})]}),(0,l.jsxs)("div",{className:B.inputGroup,children:[(0,l.jsx)("label",{className:B.label,htmlFor:"project-description",children:"프로젝트 설명"}),(0,l.jsx)(y.T,{id:"project-description",placeholder:"프로젝트에 대한 간단한 설명을 입력하세요...",value:d,onChange:e=>u(e.target.value||""),rows:3,maxLength:500})]}),(0,l.jsxs)("div",{className:B.inputGroup,children:[(0,l.jsx)("label",{className:B.label,children:"장르"}),(0,l.jsx)("div",{className:B.genreGrid,children:M.map(e=>{let t=e.icon;return(0,l.jsxs)("button",{className:"".concat(B.genreButton," ").concat(m===e.id?B.genreSelected:B.genreDefault),onClick:()=>U(e.id),children:[(0,l.jsx)(t,{className:"w-4 h-4 inline mr-1"}),e.name]},e.id)})})]})]}),(0,l.jsxs)("div",{className:B.formSection,children:[(0,l.jsx)("h3",{className:B.sectionTitle,children:"작성 목표 설정"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:B.inputGroup,children:[(0,l.jsx)("label",{className:B.label,htmlFor:"target-words",children:"목표 단어 수"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(R.p,{id:"target-words",type:"number",placeholder:"10000",value:g,onChange:e=>b(Number(e.target.value)||0),min:"100",max:"1000000",step:"100"}),(0,l.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"단어"})]}),(0,l.jsx)("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"권장: 소설 50,000+ / 에세이 5,000+ / 블로그 1,000+"})]}),(0,l.jsxs)("div",{className:B.inputGroup,children:[(0,l.jsx)("label",{className:B.label,htmlFor:"deadline",children:"완료 목표 날짜 (선택사항)"}),(0,l.jsx)(R.p,{id:"deadline",type:"date",value:v,onChange:e=>f(e.target.value),min:new Date().toISOString().split("T")[0]}),(0,l.jsx)("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"목표 날짜를 설정하면 일일 권장 작성량을 계산해드립니다"})]})]}),g>0&&(0,l.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-blue-700 dark:text-blue-300",children:[(0,l.jsx)(I.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"font-medium",children:"목표 미리보기"})]}),(0,l.jsxs)("div",{className:"mt-2 text-sm text-blue-600 dark:text-blue-400",children:["총 목표: ",g.toLocaleString(),"단어",v&&(()=>{let e=Math.ceil((new Date(v).getTime()-new Date().getTime())/864e5),t=Math.ceil(g/e);return e>0?(0,l.jsxs)("span",{className:"block mt-1",children:["일일 권장: ",t.toLocaleString(),"단어 (약 ",Math.ceil(t/200),"분 소요)"]}):null})()]})]})]})]}),(0,l.jsxs)("div",{className:B.footer,children:[(0,l.jsx)("button",{onClick:a,className:B.secondaryButton,children:"취소"}),(0,l.jsx)(j.$,{onClick:V,disabled:!(i||"").trim()||w,className:B.primaryButton,children:w?"생성 중...":"프로젝트 만들기"})]})]})}),A&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl w-full max-w-2xl max-h-[80vh] overflow-hidden border border-slate-200 dark:border-slate-700",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Google Docs 선택"}),(0,l.jsx)(j.$,{variant:"outline",size:"sm",onClick:()=>E(!1),className:"p-2",children:(0,l.jsx)(L.A,{className:"w-4 h-4"})})]}),(0,l.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-140px)]",children:[(0,l.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"가져올 Google Docs 문서를 선택하세요:"}),(0,l.jsx)("div",{className:"space-y-3",children:P.map((e,t)=>(0,l.jsx)("div",{onClick:()=>_(e),className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg cursor-pointer hover:border-blue-300 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/20 transition-all",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(p.A,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h4",{className:"font-medium text-slate-900 dark:text-slate-100 truncate",children:e.name}),(0,l.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["수정됨: ",new Date(e.modifiedTime).toLocaleDateString("ko-KR")]}),e.webViewLink&&(0,l.jsxs)("a",{href:e.webViewLink,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"inline-flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400 hover:underline mt-1",children:[(0,l.jsx)(x.A,{className:"w-3 h-3"}),"Google Docs에서 열기"]})]})]})},e.id))}),0===P.length&&(0,l.jsx)("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"문서를 찾을 수 없습니다."})]})]})})]})}let z={overlay:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",modal:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl dark:shadow-slate-900/50 w-full max-w-4xl max-h-[90vh] overflow-hidden border border-slate-200 dark:border-slate-700",header:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",title:"text-2xl font-bold text-slate-900 dark:text-slate-100",closeButton:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors p-1 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",content:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] bg-white dark:bg-slate-900",formSection:"mb-6",sectionTitle:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",label:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2",inputGroup:"mb-4",genreGrid:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",genreButton:"p-2 text-sm border rounded-lg transition-colors",genreSelected:"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300",genreDefault:"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-slate-300 dark:hover:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-800",footer:"flex items-center justify-between p-6 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",secondaryButton:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",primaryButton:"px-6 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},$=[{id:"novel",name:"소설",icon:D.A},{id:"essay",name:"에세이",icon:S.A},{id:"blog",name:"블로그",icon:V.A},{id:"tech",name:"기술",icon:O.A},{id:"diary",name:"일기",icon:p.A},{id:"poem",name:"시",icon:_.A},{id:"script",name:"대본",icon:p.A},{id:"other",name:"기타",icon:o.A}];function K(e){let{isOpen:t,project:a,onClose:s,onUpdated:o}=e,[n,i]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)("novel"),[x,h]=(0,r.useState)(0),[p,g]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{a&&(i(a.title||""),d(a.description||""),m(a.genre||"novel"))},[a]),!t||!a)return null;let f=async()=>{if(n.trim()){v(!0);try{let e={title:n.trim(),description:c.trim(),genre:u,lastModified:new Date},t=await window.electronAPI.projects.update(a.id,e);if(!t.success)throw Error(t.error||"Failed to update project");o({id:a.id,title:e.title||n,description:e.description||c,genre:u,targetWords:x,deadline:p?new Date(p):void 0}),s()}catch(e){k.V.error("PROJECT_EDITOR_MODAL","Failed to update project",e),alert("프로젝트 수정 중 오류가 발생했습니다.")}finally{v(!1)}}};return(0,l.jsx)("div",{className:z.overlay,onClick:s,children:(0,l.jsxs)("div",{className:z.modal,onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:z.header,children:[(0,l.jsx)("h2",{className:z.title,children:"프로젝트 편집"}),(0,l.jsx)("button",{onClick:s,className:z.closeButton,"aria-label":"닫기",children:(0,l.jsx)(L.A,{className:"w-6 h-6"})})]}),(0,l.jsxs)("div",{className:z.content,children:[(0,l.jsxs)("div",{className:z.formSection,children:[(0,l.jsx)("h3",{className:z.sectionTitle,children:"기본 정보"}),(0,l.jsxs)("div",{className:z.inputGroup,children:[(0,l.jsx)("label",{className:z.label,htmlFor:"edit-title",children:"프로젝트 제목 *"}),(0,l.jsx)(R.p,{id:"edit-title",type:"text",value:n,onChange:e=>i(e.target.value),maxLength:100})]}),(0,l.jsxs)("div",{className:z.inputGroup,children:[(0,l.jsx)("label",{className:z.label,htmlFor:"edit-desc",children:"프로젝트 설명"}),(0,l.jsx)(y.T,{id:"edit-desc",value:c,onChange:e=>d(e.target.value),rows:3,maxLength:500})]}),(0,l.jsxs)("div",{className:z.inputGroup,children:[(0,l.jsx)("label",{className:z.label,children:"장르"}),(0,l.jsx)("div",{className:z.genreGrid,children:$.map(e=>{let t=e.icon;return(0,l.jsxs)("button",{className:"".concat(z.genreButton," ").concat(u===e.id?z.genreSelected:z.genreDefault),onClick:()=>m(e.id),children:[(0,l.jsx)(t,{className:"w-4 h-4 inline mr-1"}),e.name]},e.id)})})]})]}),(0,l.jsxs)("div",{className:z.formSection,children:[(0,l.jsx)("h3",{className:z.sectionTitle,children:"목표 설정"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:z.inputGroup,children:[(0,l.jsx)("label",{className:z.label,htmlFor:"edit-target",children:"목표 단어 수"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(R.p,{id:"edit-target",type:"number",value:x,onChange:e=>h(Number(e.target.value)||0),min:"0",step:"100"}),(0,l.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"단어"})]})]}),(0,l.jsxs)("div",{className:z.inputGroup,children:[(0,l.jsx)("label",{className:z.label,htmlFor:"edit-deadline",children:"완료 목표 날짜 (선택사항)"}),(0,l.jsx)(R.p,{id:"edit-deadline",type:"date",value:p,onChange:e=>g(e.target.value)})]})]}),x>0&&(0,l.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-blue-700 dark:text-blue-300",children:[(0,l.jsx)(I.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"font-medium",children:"목표 미리보기"})]})})]})]}),(0,l.jsxs)("div",{className:z.footer,children:[(0,l.jsx)("button",{onClick:s,className:z.secondaryButton,children:"취소"}),(0,l.jsx)(j.$,{onClick:f,disabled:!n.trim()||b,className:z.primaryButton,children:b?"저장 중...":"변경 사항 저장"})]})]})})}let q={container:"container mx-auto px-4 py-6 max-w-7xl",loading:"flex items-center justify-center min-h-96",loadingText:"text-lg text-slate-600 dark:text-slate-400",error:"flex flex-col items-center justify-center min-h-96 text-center",errorTitle:"text-xl font-semibold text-red-600 dark:text-red-400 mb-2",errorMessage:"text-slate-600 dark:text-slate-400 mb-4",retryButton:"mt-4"},W=[];function H(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),[a,o]=(0,r.useState)(W),[n,i]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{if("true"===t.get("create")){k.V.info("PROJECTS_PAGE","\uD83D\uDE80 Auto-opening project creator from URL parameter"),m(!0);let e=new URL(window.location.href);e.searchParams.delete("create"),window.history.replaceState({},"",e.pathname)}},[t]),(0,r.useEffect)(()=>{p()},[]),(0,r.useEffect)(()=>{let e=()=>{k.V.debug("PROJECTS_PAGE","Window focused - refreshing projects"),p()},t=()=>{"visible"===document.visibilityState&&(k.V.debug("PROJECTS_PAGE","Document visible - refreshing projects"),p())};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",t),()=>{window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",t)}},[]);let p=async()=>{try{i(!0),d(null);let e=await window.electronAPI.projects.getAll();if(!e.success)throw Error(e.error||"Projects API failed");let t=g(e.data||[]);o(t),k.V.info("PROJECTS_PAGE","✅ Loaded ".concat(t.length," projects successfully"))}catch(e){d(e instanceof Error?e.message:"프로젝트를 불러오는 중 오류가 발생했습니다."),k.V.error("PROJECTS_PAGE","❌ Failed to load projects",e),o(W)}finally{i(!1)}},g=e=>e.map(e=>({id:e.id||"",title:e.title||"제목 없음",description:e.description||"",status:e.status||"draft",progress:e.progress||0,createdAt:e.createdAt?new Date(e.createdAt):new Date,updatedAt:e.updatedAt?new Date(e.updatedAt):e.lastModified?new Date(e.lastModified):new Date,wordCount:e.wordCount||0,author:e.author||"사용자",genre:e.genre||"기타"})),b=async t=>{try{var a,l,r,s;if(k.V.info("PROJECTS_PAGE","\uD83D\uDE80 Creating new project",t),"import"===t.platform){k.V.info("PROJECTS_PAGE","\uD83D\uDCC1 Importing file for project creation");let t=await window.electronAPI.projects.importFile();if(t.success&&t.data){k.V.info("PROJECTS_PAGE","✅ Project imported successfully",{projectId:t.data.id}),e.push("/projects/".concat(t.data.id));return}throw Error(t.error||"Failed to import project")}if("google-docs"===t.platform){k.V.info("PROJECTS_PAGE","\uD83D\uDCDD Creating Google Docs project in Loop database");let a={originalDescription:t.description,googleDocId:t.googleDocId,googleDocUrl:t.googleDocUrl,isGoogleDocsProject:!0},l={title:t.title,description:"".concat(t.description,"\n\n[Google Docs 연동 정보: ").concat(JSON.stringify(a),"]"),genre:t.genre,content:t.content||"# Google Docs 연동 프로젝트\n\n이 프로젝트는 Google Docs와 연동되어 있습니다.\n\n원본 문서 링크: "+(t.googleDocUrl||""),progress:0,wordCount:t.content?t.content.length:0,status:"active",author:"사용자",platform:t.platform,updatedAt:new Date},o=await window.electronAPI.projects.create(l);if(!o.success)throw Error(o.error||"Failed to create Google Docs project");if(k.V.info("PROJECTS_PAGE","✅ Google Docs project created successfully in DB",{id:null==(r=o.data)?void 0:r.id,googleDocId:t.googleDocId,title:t.title}),await p(),null==(s=o.data)?void 0:s.id){k.V.info("PROJECTS_PAGE","\uD83D\uDE80 Navigating to new Google Docs project editor",{id:o.data.id}),e.push("/projects/".concat(o.data.id));return}}let o={title:t.title,description:t.description,genre:t.genre,content:t.content||"새 프로젝트를 시작해보세요...\n\n",progress:0,wordCount:0,status:"active",author:"사용자",platform:t.platform,updatedAt:new Date},n=await window.electronAPI.projects.create(o);if(!n.success)throw Error(n.error||"Failed to create project");if(k.V.info("PROJECTS_PAGE","✅ Project created successfully in DB",{id:null==(a=n.data)?void 0:a.id}),await p(),null==(l=n.data)?void 0:l.id){k.V.info("PROJECTS_PAGE","\uD83D\uDE80 Navigating to new project editor",{id:n.data.id}),e.push("/projects/".concat(n.data.id));return}}catch(t){let e=t instanceof Error?t.message:"프로젝트 생성 중 오류가 발생했습니다.";k.V.error("PROJECTS_PAGE","❌ Failed to create project",t),alert(e)}},v=async e=>{if(k.V.info("PROJECTS_PAGE","Delete project requested: ".concat(e.id),{title:e.title}),confirm('정말로 "'.concat(e.title,'" 프로젝트를 삭제하시겠습니까?')))try{let t=await window.electronAPI.projects.delete(e.id);if(t.success)o(t=>t.filter(t=>t.id!==e.id)),k.V.info("PROJECTS_PAGE","Project deleted: ".concat(e.id));else throw Error(t.error||"Failed to delete project")}catch(e){k.V.error("PROJECTS_PAGE","Failed to delete project",e),alert("삭제 중 오류가 발생했습니다.")}};return n?(0,l.jsx)("div",{className:q.container,children:(0,l.jsx)("div",{className:q.loading,children:(0,l.jsx)("div",{className:q.loadingText,children:"프로젝트를 불러오는 중..."})})}):c?(0,l.jsx)("div",{className:q.container,children:(0,l.jsxs)("div",{className:q.error,children:[(0,l.jsx)("h2",{className:q.errorTitle,children:"오류 발생"}),(0,l.jsx)("p",{className:q.errorMessage,children:c}),(0,l.jsx)("button",{onClick:()=>{k.V.info("PROJECTS_PAGE","Retry loading projects"),d(null),i(!0)},className:q.retryButton,type:"button",children:"다시 시도"})]})}):(0,l.jsxs)("div",{className:q.container,children:[(0,l.jsx)(T,{projects:a,onCreateProject:()=>{k.V.info("PROJECTS_PAGE","Opening project creator"),m(!0)},onViewProject:t=>{k.V.info("PROJECTS_PAGE","\uD83D\uDD0D View project: ".concat(t.id),{title:t.title}),e.push("/projects/new?open=".concat(encodeURIComponent(t.id)))},onEditProject:e=>{k.V.info("PROJECTS_PAGE","✏️ Edit project (modal): ".concat(e.id),{title:e.title}),h(e)},onShareProject:e=>{k.V.info("PROJECTS_PAGE","Share project: ".concat(e.id),{title:e.title}),alert("공유 기능은 준비 중입니다.")},onDeleteProject:v}),(0,l.jsx)(U,{isOpen:u,onClose:()=>m(!1),onCreate:b}),(0,l.jsx)(K,{isOpen:!!x,project:x?{id:x.id,title:x.title,description:x.description,genre:x.genre||"novel"}:null,onClose:()=>h(null),onUpdated:e=>{o(t=>t.map(t=>t.id===e.id?{...t,title:e.title,description:e.description,genre:e.genre,updatedAt:new Date}:t))}})]})}function Z(){return(0,l.jsx)(r.Suspense,{fallback:(0,l.jsx)("div",{className:q.loading,children:(0,l.jsx)("div",{className:q.loadingText,children:"프로젝트 로딩 중..."})}),children:(0,l.jsx)(H,{})})}},9277:(e,t,a)=>{Promise.resolve().then(a.bind(a,4758))}},e=>{var t=t=>e(e.s=t);e.O(0,[209,432,979,899,744,322,592,940,605,30,173,641,431,110,555,408,219,27,206,409,76,358],()=>t(9277)),_N_E=e.O()}]);