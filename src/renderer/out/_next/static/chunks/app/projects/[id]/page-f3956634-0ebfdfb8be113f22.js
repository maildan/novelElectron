(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{2939:(e,t,r)=>{"use strict";r.d(t,{FW:()=>i.A,Gy:()=>s.A,W7:()=>a.A,a4:()=>n.A,iU:()=>c.A,jl:()=>o.A,zW:()=>l.A});var s=r(2381),o=r(4102),a=r(5009),c=r(7955),n=r(8325),i=r(3869),l=r(7993)},2967:(e,t,r)=>{"use strict";r.d(t,{X:()=>o.A,h:()=>s.A});var s=r(5366),o=r(8317)},3858:(e,t,r)=>{Promise.resolve().then(r.bind(r,5044))},4001:(e,t,r)=>{"use strict";r.d(t,{FW:()=>o.A,W7:()=>s.A,X:()=>c.A,eM:()=>a.A});var s=r(5009),o=r(3869),a=r(2394),c=r(8317)},4328:(e,t,r)=>{"use strict";r.d(t,{X:()=>a.A,m:()=>o.A,o:()=>s.A});var s=r(6186),o=r(6083),a=r(8317)},4330:(e,t,r)=>{"use strict";r.d(t,{FW:()=>c.A,Gy:()=>s.A,W7:()=>o.A,We:()=>i.A,X:()=>l.A,eM:()=>n.A,g5:()=>a.A});var s=r(2381),o=r(5009),a=r(2784),c=r(3869),n=r(2394),i=r(4246),l=r(8317)},4916:(e,t,r)=>{"use strict";r.d(t,{AX:()=>n.A,Bx:()=>d.A,JG:()=>s.A,QR:()=>o.A,TB:()=>f.A,_H:()=>l.A,bd:()=>A.A,eM:()=>i.A,h1:()=>c.A,ni:()=>a.A,sU:()=>u.A});var s=r(2972),o=r(5922),a=r(3914),c=r(3794),n=r(3818),i=r(2394),l=r(2049),d=r(5205),u=r(3360),A=r(2163),f=r(3610)},5044:(e,t,r)=>{"use strict";r.d(t,{ProjectEditor:()=>R});var s=r(1659),o=r(9531),a=r(5521),c=r(9049),n=r(9634),i=r(2926),l=r(5605),d=r(9848),u=r(9344),A=r(7957),f=r(8907),h=r(9902),E=r(8007),g=r(2792),C=r(1286),v=r(6541);let b={container:"h-screen flex flex-col bg-white dark:bg-gray-900 transition-colors duration-200",main:"flex flex-1 overflow-hidden",editorContainer:"flex-1 flex flex-col h-full bg-white dark:bg-gray-900 transition-colors duration-200"},R=(0,o.memo)(function(e){let{projectId:t}=e,{isLoading:r,error:R,...T}=(0,C.B)(t),w=(0,v.F)(),[p,O]=(0,o.useState)("write"),[j,k]=(0,o.useState)(!1),[m,x]=(0,o.useState)(!1),[D,S]=(0,o.useState)(!1),[_,P]=(0,o.useState)(!1),y=(0,o.useRef)(null),[I,J]=(0,o.useState)(!1);(0,o.useCallback)(e=>{e&&(y.current=e),J(!0),g.V.info("PROJECT_EDITOR","Editor ready (fallback mode)")},[]);let V=(0,o.useCallback)(()=>window.history.back(),[]),F=(0,o.useCallback)(()=>k(e=>!e),[]),M=(0,o.useCallback)(()=>{x(e=>!e),g.V.info("PROJECT_EDITOR","AI sidebar ".concat(m?"closed":"opened"))},[m]),N=(0,o.useCallback)(()=>{P(!0),g.V.info("PROJECT_EDITOR","Share dialog opened")},[]),W=(0,o.useCallback)(()=>{S(!0),g.V.info("PROJECT_EDITOR","Delete confirmation dialog opened")},[]),L=(0,o.useCallback)(async()=>{try{g.V.info("PROJECT_EDITOR","Deleting project",{projectId:t});let e=await window.electronAPI.projects.delete(t);if(e.success)g.V.info("PROJECT_EDITOR","Project deleted successfully"),S(!1),window.history.back();else throw Error(e.error||"Failed to delete project")}catch(e){g.V.error("PROJECT_EDITOR","Failed to delete project",e)}},[t]),U=(0,o.useCallback)(async()=>{try{let e=T.content||"",t=T.title||"제목없음",r=new Blob([e],{type:"text/markdown;charset=utf-8"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download="".concat(t.replace(/[^a-zA-Z0-9가-힣\s]/g,"_"),".md"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s),g.V.info("PROJECT_EDITOR","Project exported as markdown",{title:t})}catch(e){g.V.error("PROJECT_EDITOR","Export failed",e)}},[T.content,T.title]),B=(0,o.useCallback)(e=>{g.V.info("PROJECT_EDITOR","View changed:",e),O(e)},[]);(0,o.useCallback)(e=>g.V.info("PROJECT_EDITOR","Toolbar action:",e),[]);let X=(0,o.useCallback)(e=>{let{key:t,ctrlKey:r,metaKey:s,shiftKey:o,altKey:a}=e,c=r||s;if(c&&"s"===t){e.preventDefault(),T.forceSave(),g.V.info("PROJECT_EDITOR","Save shortcut triggered");return}if(c&&"f"===t){e.preventDefault(),w.toggleFocusMode(),g.V.info("PROJECT_EDITOR","Focus mode shortcut triggered");return}if(c&&"b"===t){e.preventDefault(),k(e=>!e),g.V.info("PROJECT_EDITOR","Sidebar shortcut triggered");return}if(c&&"d"===t){e.preventDefault(),w.toggleDarkMode(),g.V.info("PROJECT_EDITOR","Dark mode shortcut triggered");return}if("Escape"===t){if(D||_)return;if(w.isFocusMode){e.preventDefault(),w.toggleFocusMode(),g.V.info("PROJECT_EDITOR","Focus mode disabled by ESC");return}let t=new CustomEvent("global:escape",{detail:{source:"ProjectEditor"}});window.dispatchEvent(t),e.preventDefault(),V(),g.V.info("PROJECT_EDITOR","Back shortcut triggered");return}if("F1"===t){e.preventDefault();let t=new CustomEvent("shortcut:help");window.dispatchEvent(t),g.V.info("PROJECT_EDITOR","Help shortcut triggered");return}},[T.forceSave,w.toggleFocusMode,w.toggleDarkMode,V]);return((0,o.useEffect)(()=>(window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)),[X]),(0,o.useEffect)(()=>{let e=()=>{T.forceSave(),g.V.info("PROJECT_EDITOR","Project save triggered from editor")};return window.addEventListener("project:save",e),()=>window.removeEventListener("project:save",e)},[T.forceSave]),r)?(0,s.jsx)("div",{className:"h-screen flex items-center justify-center bg-white dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"프로젝트를 불러오는 중..."})]})}):R?(0,s.jsxs)("div",{className:"h-screen flex items-center justify-center text-red-500",children:["오류: ",R]}):(0,s.jsxs)(a.z,{children:[(0,s.jsxs)("div",{className:b.container,children:[(0,s.jsx)(l.z,{title:T.title,onTitleChange:T.setTitle,onBack:V,sidebarCollapsed:j,onToggleSidebar:F,showRightSidebar:m,onToggleAISidebar:M,isFocusMode:w.isFocusMode,onToggleFocusMode:w.toggleFocusMode,onSave:T.forceSave,onShare:N,onDownload:U,onDelete:W}),(0,s.jsxs)("div",{className:b.main,children:[!j&&(0,s.jsx)(n.m,{currentView:p,onViewChange:B,structure:T.structure,characters:T.characters,stats:T.writerStats,collapsed:!1}),(0,s.jsxs)("div",{className:b.editorContainer,children:["write"===p&&(0,s.jsx)(A.L,{content:T.content,onChange:T.setContent,isFocusMode:w.isFocusMode}),"structure"===p&&(0,s.jsx)(f.l,{structure:T.structure,onStructureChange:T.setStructure}),"characters"===p&&(0,s.jsx)(h.E,{projectId:t,characters:T.characters,onCharactersChange:T.setCharacters}),"notes"===p&&(0,s.jsx)(E.d,{projectId:t,notes:T.notes||[],onNotesChange:T.setNotes})]}),(0,s.jsx)(i.H,{showRightSidebar:m,toggleRightSidebar:M,writerStats:T.writerStats,setWordGoal:T.setWordGoal,currentText:T.content,projectId:t})]})]}),(0,s.jsx)(c.S,{}),(0,s.jsx)(d.K,{isOpen:D,projectTitle:T.title,onConfirm:L,onCancel:()=>S(!1)}),(0,s.jsx)(u.G,{isOpen:_,projectTitle:T.title,projectId:t,onClose:()=>P(!1)})]})})},5479:(e,t,r)=>{"use strict";r.d(t,{J0:()=>s.useState,hb:()=>s.useCallback});var s=r(9531)},6106:(e,t,r)=>{"use strict";r.d(t,{FW:()=>i.A,Hs:()=>n.A,T5:()=>a.A,Vn:()=>l.A,c_:()=>s.A,kr:()=>o.A,sU:()=>d.A,vE:()=>c.A,zW:()=>u.A});var s=r(6241),o=r(533),a=r(7843),c=r(1110),n=r(1589),i=r(3869),l=r(8135),d=r(3360),u=r(7993)},6922:(e,t,r)=>{"use strict";r.d(t,{J0:()=>s.useState,Kr:()=>s.useMemo,hb:()=>s.useCallback,li:()=>s.useRef,vJ:()=>s.useEffect});var s=r(9531)},7601:(e,t,r)=>{"use strict";r.d(t,{hb:()=>s.useCallback,li:()=>s.useRef,vJ:()=>s.useEffect});var s=r(9531)},7973:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>o.A,Gk:()=>l.A,J2:()=>a.A,N_:()=>c.A,Pk:()=>i.A,a4:()=>n.A,yN:()=>s.A,z2:()=>d.A});var s=r(5816),o=r(322),a=r(5053),c=r(5833),n=r(8325),i=r(6909),l=r(4524),d=r(6845)},8180:(e,t,r)=>{"use strict";r.d(t,{Jl:()=>s.A,QR:()=>o.A,X:()=>i.A,_H:()=>n.A,f5:()=>a.A,gE:()=>c.A});var s=r(1297),o=r(5922),a=r(7897),c=r(3972),n=r(2049),i=r(8317)},9226:(e,t,r)=>{"use strict";r.d(t,{B8:()=>f.A,Cy:()=>c.A,Hs:()=>h.A,MD:()=>u.A,Pk:()=>E.A,SE:()=>o.A,Vw:()=>n.A,X:()=>C.A,ZU:()=>g.A,_:()=>i.A,_B:()=>d.A,fV:()=>l.A,g5:()=>A.A,hc:()=>s.A,yQ:()=>a.A});var s=r(5366),o=r(4181),a=r(1723),c=r(322),n=r(7357),i=r(6685),l=r(9494),d=r(5807),u=r(7212),A=r(2784),f=r(2341),h=r(1589),E=r(6909),g=r(9985),C=r(8317)},9832:(e,t,r)=>{"use strict";r.d(t,{FW:()=>c.A,Vw:()=>a.A,Xh:()=>s.A,iU:()=>o.A});var s=r(9161),o=r(7955),a=r(7357),c=r(3869)}}]);