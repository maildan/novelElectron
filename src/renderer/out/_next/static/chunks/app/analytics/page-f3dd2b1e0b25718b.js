(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{494:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(1659),s=a(9531),l=a(4282),i=a(1451),n=a(4769),o=a(6599),c=a(1291),d=a(6844),g=a(8220),u=a(3362),m=a(6640),h=a(2792);const x={container:"container mx-auto px-4 py-6 max-w-7xl space-y-6",pageTitle:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-6",kpiGrid:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",chartsGrid:"grid grid-cols-1 lg:grid-cols-3 gap-6",chartCard:"p-6",chartTitle:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",chartPlaceholder:"h-64 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center text-slate-500 dark:text-slate-400",progressGrid:"grid grid-cols-1 md:grid-cols-2 gap-6",progressItem:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",progressLabel:"font-medium text-slate-900 dark:text-slate-100",progressValue:"text-sm text-slate-600 dark:text-slate-400 ml-4",goalCard:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950 dark:to-purple-950",goalTitle:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",goalDescription:"text-slate-600 dark:text-slate-400 mb-4",goalProgress:"space-y-3",goalItem:"flex items-center justify-between",goalLabel:"text-sm font-medium text-slate-700 dark:text-slate-300",goalPercentage:"text-sm text-slate-500 dark:text-slate-400"},p={kpis:{dailyWords:0,totalWords:0,avgWpm:0,activeProjects:0,sessionTime:0,accuracy:0,weeklyGoal:0,improvementRate:0},weeklyData:[0,0,0,0,0,0,0],projectProgress:[],goals:[{label:"일일 목표 (3000자)",current:0,target:3e3},{label:"주간 목표 (20000자)",current:0,target:2e4},{label:"정확도 목표 (95%)",current:0,target:95},{label:"WPM 목표 (90)",current:0,target:90}]};function v(){const[e,t]=s.useState(p),[a,v]=s.useState(!0),[b,f]=s.useState(null);s.useEffect(()=>{h.V.info("ANALYTICS_PAGE","Analytics page loaded"),j()},[]);const j=async()=>{try{var e,a;v(!0),f(null);const r=await window.electronAPI.dashboard.getStats(),s=await window.electronAPI.keyboard.getRealtimeStats(),l=await window.electronAPI.keyboard.getStatus(),i=await window.electronAPI.dashboard.getRecentSessions();if(!r.success)throw Error("Dashboard stats failed: ".concat(r.error));if(!s.success)throw Error("Realtime stats failed: ".concat(s.error));if(!l.success)throw Error("Keyboard status failed: ".concat(l.error));if(!i.success)throw Error("Recent sessions failed: ".concat(i.error));const n=y(r.data,[],i.data||[]);s.data&&(n.kpis.avgWpm=s.data.currentWpm||0,n.kpis.accuracy=s.data.accuracy||0,n.kpis.sessionTime=(s.data.sessionTime||0)/3600),(null==(e=l.data)?void 0:e.isActive)&&l.data.sessionDuration&&(n.kpis.sessionTime=l.data.sessionDuration/3600),t(n),h.V.info("ANALYTICS","✅ Analytics data loaded successfully",{dailyWords:n.kpis.dailyWords,avgWpm:n.kpis.avgWpm,accuracy:n.kpis.accuracy,sessionsCount:(null==(a=i.data)?void 0:a.length)||0})}catch(e){h.V.error("ANALYTICS","❌ Failed to load analytics data",e),f("데이터 로딩 실패: ".concat(e.message)),t(p)}finally{v(!1)}},y=(e,t,a)=>{const r=a||[],s=N(r),l=w(t||[]);return{kpis:{dailyWords:(null==e?void 0:e.todayWords)||0,totalWords:(null==e?void 0:e.monthWords)||0,avgWpm:(null==e?void 0:e.avgWpm)||0,activeProjects:(null==e?void 0:e.activeProjects)||0,sessionTime:k(r),accuracy:(null==e?void 0:e.accuracy)||0,weeklyGoal:L(s),improvementRate:T(r)},weeklyData:s,projectProgress:l,goals:[{label:"일일 목표 (3000자)",current:(null==e?void 0:e.todayWords)||0,target:3e3},{label:"주간 목표 (20000자)",current:(null==e?void 0:e.weekWords)||0,target:2e4},{label:"정확도 목표 (95%)",current:(null==e?void 0:e.accuracy)||0,target:95},{label:"WPM 목표 (90)",current:(null==e?void 0:e.avgWpm)||0,target:90}]}},N=e=>{const t=Array(7).fill(0);return(null==e?void 0:e.length)&&e.forEach(e=>{if(e.createdAt){const a=new Date(e.createdAt).getDay();t[a]+=e.keyCount||0}}),t},w=e=>{if(!(null==e?void 0:e.length))return[];const t=["blue","green","purple","orange","red"];return e.slice(0,5).map((e,a)=>({name:e.title||"제목 없음",progress:e.progress||0,color:t[a%t.length]}))},k=e=>(null==e?void 0:e.length)?e.reduce((e,t)=>t.startTime&&t.endTime?e+(new Date(t.endTime).getTime()-new Date(t.startTime).getTime())/6e4:e,0)/60:0,L=e=>Math.min(e.reduce((e,t)=>e+t,0)/2e4*100,100),T=e=>{if(!(null==e?void 0:e.length)||e.length<2)return 0;const t=e.slice(0,Math.min(10,e.length)),a=e.slice(10,Math.min(20,e.length));if(!a.length)return 0;const r=t.reduce((e,t)=>e+(t.wpm||0),0)/t.length,s=a.reduce((e,t)=>e+(t.wpm||0),0)/a.length;return 0===s?0:(r-s)/s*100},A=e=>new Intl.NumberFormat("ko-KR").format(e),E=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.toFixed(t)};return a?(0,r.jsx)("div",{className:x.container,children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"분석 데이터를 불러오는 중..."})]})})}):b?(0,r.jsx)("div",{className:x.container,children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-96 text-center",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-red-600 dark:text-red-400 mb-2",children:"데이터 로딩 실패"}),(0,r.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:b}),(0,r.jsx)("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"다시 시도"})]})}):(0,r.jsxs)("div",{className:x.container,children:[(0,r.jsx)("h1",{className:x.pageTitle,children:"분석 및 통계"}),(0,r.jsxs)("div",{className:x.kpiGrid,children:[(0,r.jsx)(g.n,{title:"오늘 작성한 글자",value:A(e.kpis.dailyWords),icon:l.A,color:"blue",change:{value:12.5,type:"increase",period:"어제 대비"}}),(0,r.jsx)(g.n,{title:"총 작성한 글자",value:A(e.kpis.totalWords),icon:i.A,color:"green",change:{value:8.3,type:"increase",period:"이번 주"}}),(0,r.jsx)(g.n,{title:"평균 타자 속도",value:"".concat(E(e.kpis.avgWpm)," WPM"),icon:n.A,color:"purple",change:{value:4.2,type:"increase",period:"지난 주 대비"}}),(0,r.jsx)(g.n,{title:"활성 프로젝트",value:e.kpis.activeProjects,icon:o.A,color:"orange",change:{value:0,type:"neutral",period:"변화 없음"}})]}),(0,r.jsxs)("div",{className:x.chartsGrid,children:[(0,r.jsxs)(u.Z,{className:"".concat(x.chartCard," lg:col-span-2"),children:[(0,r.jsx)("h3",{className:x.chartTitle,children:"주간 작성량 추이"}),(0,r.jsx)("div",{className:x.chartPlaceholder,children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(c.A,{className:"w-12 h-12 mx-auto mb-2"}),(0,r.jsx)("p",{children:"차트 구현 예정"}),(0,r.jsxs)("p",{className:"text-xs mt-1",children:["이번 주 평균: ",A(e.weeklyData.reduce((e,t)=>e+t,0)/7),"자/일"]})]})})]}),(0,r.jsxs)(u.Z,{className:x.chartCard,children:[(0,r.jsx)("h3",{className:x.chartTitle,children:"프로젝트 진행률"}),(0,r.jsx)("div",{className:"space-y-4",children:e.projectProgress.map((e,t)=>(0,r.jsxs)("div",{className:x.progressItem,children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:x.progressLabel,children:e.name}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(m.z,{value:e.progress,color:e.color,size:"sm"})})]}),(0,r.jsxs)("div",{className:x.progressValue,children:[E(e.progress),"%"]})]},t))})]})]}),(0,r.jsxs)("div",{className:x.progressGrid,children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(g.n,{title:"세션 시간",value:"".concat(E(e.kpis.sessionTime),"h"),icon:d.A,color:"blue",change:{value:15.2,type:"increase",period:"어제 대비"}}),(0,r.jsx)(g.n,{title:"정확도",value:"".concat(E(e.kpis.accuracy),"%"),icon:o.A,color:"green",change:{value:2.1,type:"increase",period:"지난 주 대비"}})]}),(0,r.jsxs)(u.Z,{className:x.goalCard,children:[(0,r.jsx)("h3",{className:x.goalTitle,children:"목표 달성률"}),(0,r.jsxs)("p",{className:x.goalDescription,children:["이번 주 전체 목표 달성률: ",E(e.kpis.weeklyGoal),"%"]}),(0,r.jsx)("div",{className:x.goalProgress,children:e.goals.map((e,t)=>{const a=Math.min(e.current/e.target*100,100),s=a>=100;return(0,r.jsxs)("div",{className:x.goalItem,children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:x.goalLabel,children:e.label}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)(m.z,{value:a,color:s?"green":"blue",size:"sm"})})]}),(0,r.jsxs)("div",{className:x.goalPercentage,children:[E(a),"%"]})]},t)})})]})]})]})}},722:(e,t,a)=>{Promise.resolve().then(a.bind(a,494))},2245:(e,t,a)=>{"use strict";a.d(t,{Rf:()=>r.forwardRef});var r=a(9531)},2792:(e,t,a)=>{"use strict";a.d(t,{V:()=>i});var r=a(9197),s=function(e){return e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e}({});class l{setLogLevel(e){this.logLevel=e}log(e,t,a,l){if(e<this.logLevel)return;const i={level:e,component:t,message:a,data:l,timestamp:new Date};this.logs.push(i),this.logs.length>this.maxLogs&&this.logs.shift();const n=i.timestamp.toISOString(),o=s[e];"[".concat(n,"] ").concat(o," [").concat(t,"]"),r.env.VERBOSE_LOGGING,r.env.DEBUG,this.logLevel}debug(e,t,a){this.log(0,e,t,a)}info(e,t,a){this.log(1,e,t,a)}warn(e,t,a){this.log(2,e,t,a)}error(e,t,a){this.log(3,e,t,a)}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}getLogsByComponent(e){return this.logs.filter(t=>t.component===e)}getLogsByLevel(e){return this.logs.filter(t=>t.level>=e)}time(e){this.timers.set(e,performance.now()),this.debug("TIMER","Timer started: ".concat(e))}timeEnd(e){const t=this.timers.get(e);if(void 0===t)return void this.warn("TIMER","Timer not found: ".concat(e));const a=performance.now()-t;this.timers.delete(e),this.info("TIMER","Timer completed: ".concat(e),{duration:"".concat(a.toFixed(3),"ms")})}constructor(){var e;this.logLevel=0,this.logs=[],this.maxLogs=1e3,this.timers=new Map;const t=null==(e=r.env.LOG_LEVEL)?void 0:e.toLowerCase();"true"===r.env.DEBUG||"debug"===t?this.logLevel=0:"info"===t?this.logLevel=1:"warn"===t?this.logLevel=2:"error"===t?this.logLevel=3:this.logLevel=0}}const i=new l},3362:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(1659),s=a(2245),l=a(7423);const i={base:"rounded-lg transition-shadow duration-200",variants:{default:"bg-white border border-gray-200",elevated:"bg-white shadow-lg border-0",outlined:"bg-transparent border-2 border-gray-300"},padding:{sm:"p-4",md:"p-6",lg:"p-8"},hover:{default:"hover:shadow-sm",elevated:"hover:shadow-xl",outlined:"hover:border-gray-400"}},n=(0,s.Rf)((e,t)=>{let{variant:a="default",padding:s="md",hoverable:n=!1,className:o,children:c,onClick:d,role:g,"aria-label":u,...m}=e,h=(0,l.cn)(i.base,i.variants[a],i.padding[s],n&&i.hover[a],d&&"cursor-pointer",o);return(0,r.jsx)("div",{ref:t,className:h,onClick:d,role:g,"aria-label":u,tabIndex:d?0:void 0,onKeyDown:d?e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),d())}:void 0,...m,children:c})});n.displayName="Card"},6640:(e,t,a)=>{"use strict";a.d(t,{z:()=>i});var r=a(1659),s=a(7423);const l={container:"w-full bg-gray-200 rounded-full overflow-hidden",bar:"h-full transition-all duration-500 ease-out rounded-full",colors:{blue:"bg-blue-600",green:"bg-green-600",purple:"bg-purple-600",orange:"bg-orange-600",red:"bg-red-600"},sizes:{sm:"h-2",md:"h-3",lg:"h-4"},animated:"bg-gradient-to-r bg-[length:200%_100%] animate-shimmer",label:"text-sm font-medium text-gray-700 mb-2"};function i(e){let{value:t,color:a="blue",size:i="md",showLabel:n=!1,label:o,animated:c=!1,className:d,"aria-label":g}=e,u=Math.max(0,Math.min(100,t)),m=(0,s.cn)(l.container,l.sizes[i],d),h=(0,s.cn)(l.bar,l.colors[a],c&&l.animated),x=o||"".concat(u,"%");return(0,r.jsxs)("div",{className:"w-full",children:[n&&(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:l.label,children:x}),(0,r.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[u,"%"]})]}),(0,r.jsx)("div",{className:m,role:"progressbar","aria-valuenow":u,"aria-valuemin":0,"aria-valuemax":100,"aria-label":g||"Progress: ".concat(u,"%"),children:(0,r.jsx)("div",{className:h,style:{width:"".concat(u,"%")},"aria-hidden":"true"})})]})}},7423:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(4719),s=a(7171);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},7705:(e,t,a)=>{"use strict";a.d(t,{Rf:()=>r.forwardRef,n:()=>r.createElement});var r=a(9531)},8220:(e,t,a)=>{"use strict";a.d(t,{n:()=>n});var r=a(1659),s=a(3362),l=a(7423);const i={container:"p-6 transition-all duration-200",header:"flex items-center justify-between mb-4",iconContainer:"w-10 h-10 rounded-lg flex items-center justify-center",iconColors:{blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",red:"bg-red-100 text-red-600"},value:"text-2xl font-bold text-gray-900 mb-1",label:"text-sm text-gray-600 mb-2",change:"text-sm font-medium flex items-center gap-1",changeColors:{increase:"text-green-600",decrease:"text-red-600",neutral:"text-gray-500"}};function n(e){let{title:t,value:a,icon:n,change:o,color:c="blue",className:d,onClick:g}=e,u=!!g,m=(0,l.cn)(i.container,u&&"cursor-pointer hover:shadow-md",d),h=e=>"number"==typeof e?e.toLocaleString():e;return(0,r.jsxs)(s.Z,{variant:"default",padding:"sm",className:m,onClick:g,hoverable:u,role:u?"button":void 0,"aria-label":u?"".concat(t," 상세 보기"):void 0,children:[(0,r.jsxs)("div",{className:i.header,children:[(0,r.jsx)("div",{className:(0,l.cn)(i.iconContainer,i.iconColors[c]),children:(0,r.jsx)(n,{className:"w-5 h-5","aria-hidden":"true"})}),o&&(0,r.jsxs)("div",{className:(0,l.cn)(i.change,i.changeColors[o.type]),children:[(0,r.jsx)("span",{children:(e=>{const t=e>0?"+":"";return"".concat(t).concat(e,"%")})(o.value)}),o.period&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["(",o.period,")"]})]})]}),(0,r.jsx)("div",{className:i.value,"aria-label":"값: ".concat(h(a)),children:h(a)}),(0,r.jsx)("div",{className:i.label,children:t})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[96,358],()=>t(722)),_N_E=e.O()}]);