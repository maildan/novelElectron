# ğŸ”¥ Loop Electron ì•„í‚¤í…ì²˜ ì„¤ê³„ì„œ - ê¸°ê°€ì°¨ë“œ Edition

## ğŸ—ï¸ **ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Loop Desktop App                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Renderer Process (Next.js 15 + React 19)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   Dashboard     â”‚ â”‚   Analytics     â”‚ â”‚   Settings      â”‚â”‚
â”‚  â”‚   (Real-time)   â”‚ â”‚   (Charts)      â”‚ â”‚   (Config)      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Preload Script (contextBridge + IPC)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  electronAPI: {                                        â”‚â”‚
â”‚  â”‚    onKeyboard, onMouse, onWindow,                      â”‚â”‚
â”‚  â”‚    getStats, saveData, getSettings                     â”‚â”‚
â”‚  â”‚  }                                                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Main Process (Node.js + Native Modules)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  uiohook-napi   â”‚ â”‚   active-win    â”‚ â”‚  Prisma + DB    â”‚â”‚
â”‚  â”‚  (Global Keys)  â”‚ â”‚  (App Context)  â”‚ â”‚  (SQLite)       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ **í•µì‹¬ êµ¬ì„±ìš”ì†Œ**

### **1. Main Process (Electron ë©”ì¸)**
```typescript
// src/main/index.ts
- BrowserWindow ìƒì„± (contextIsolation: true)
- uiohook-napi ì „ì—­ í‚¤ë³´ë“œ ë¦¬ìŠ¤ë„ˆ
- active-win í™œì„± ì•± ê°ì§€
- Prisma + SQLite ë°ì´í„° ê´€ë¦¬
- IPC ì±„ë„ ê´€ë¦¬
```

### **2. Preload Script (ë³´ì•ˆ ë¸Œë¦¿ì§€)**
```typescript
// src/preload/index.ts
- contextBridge.exposeInMainWorld()
- Type-safe IPC ì¸í„°í˜ì´ìŠ¤
- ë³´ì•ˆ ìƒŒë“œë°•ìŠ¤ ìœ ì§€
```

### **3. Renderer Process (Next.js UI)**
```typescript
// src/renderer/app/
- App Router êµ¬ì¡°
- Real-time ë°ì´í„° ì‹œê°í™”
- Tailwind CSS ìŠ¤íƒ€ì¼ë§
- TypeScript ì „ì²´ ì ìš©
```

---

## ğŸ—‚ï¸ **í”„ë¡œì íŠ¸ êµ¬ì¡°**

```
loop/
â”œâ”€â”€ package.json                 # ì˜ì¡´ì„± ê´€ë¦¬
â”œâ”€â”€ tsconfig.json               # TypeScript ì„¤ì •
â”œâ”€â”€ next.config.js              # Next.js ì„¤ì •
â”œâ”€â”€ tailwind.config.js          # Tailwind ì„¤ì •
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma           # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                   # Electron ë©”ì¸ í”„ë¡œì„¸ìŠ¤
â”‚   â”‚   â”œâ”€â”€ index.ts           # ì•± ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ window.ts          # ìœˆë„ìš° ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ keyboard.ts        # í‚¤ë³´ë“œ ë¦¬ìŠ¤ë„ˆ
â”‚   â”‚   â”œâ”€â”€ database.ts        # DB ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ ipc/               # IPC í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ preload/               # Preload ìŠ¤í¬ë¦½íŠ¸
â”‚   â”‚   â”œâ”€â”€ index.ts           # ë©”ì¸ preload
â”‚   â”‚   â””â”€â”€ types.ts           # íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ renderer/              # Next.js UI
â”‚   â”‚   â”œâ”€â”€ app/               # App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx     # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx       # í™ˆí˜ì´ì§€
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/     # ëŒ€ì‹œë³´ë“œ
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics/     # ë¶„ì„ í˜ì´ì§€
â”‚   â”‚   â”‚   â””â”€â”€ settings/      # ì„¤ì • í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ components/        # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ lib/              # ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ shared/               # ê³µí†µ íƒ€ì…/ìœ í‹¸
â”œâ”€â”€ docs/                     # ë¬¸ì„œ
â””â”€â”€ dist/                     # ë¹Œë“œ ì¶œë ¥
```

---

## ğŸ” **ë³´ì•ˆ ì„¤ê³„**

### **Context Isolation**
```typescript
// Main Process
webPreferences: {
  contextIsolation: true,        // âœ… í•„ìˆ˜
  nodeIntegration: false,        // âœ… í•„ìˆ˜
  preload: path.join(__dirname, 'preload.js')
}
```

### **Safe IPC Communication**
```typescript
// Preload
contextBridge.exposeInMainWorld('electronAPI', {
  // âœ… í—ˆìš©ëœ í•¨ìˆ˜ë§Œ ë…¸ì¶œ
  onKeyboard: (callback) => ipcRenderer.on('keyboard', callback),
  getStats: () => ipcRenderer.invoke('get-stats'),
  // âŒ ì§ì ‘ ipcRenderer ë…¸ì¶œ ê¸ˆì§€
})
```

---

## ğŸ“Š **ë°ì´í„° íë¦„**

### **í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ì²˜ë¦¬**
```
1. uiohook-napi â†’ Main Process
2. Main Process â†’ Prisma â†’ SQLite
3. Main Process â†’ IPC â†’ Renderer
4. Renderer â†’ React State â†’ UI Update
```

### **ì‚¬ìš©ì ì•¡ì…˜ ì²˜ë¦¬**
```
1. UI Interaction â†’ Renderer
2. Renderer â†’ electronAPI â†’ Preload
3. Preload â†’ IPC â†’ Main Process
4. Main Process â†’ Database/Logic
```

---

## ğŸš€ **ê°œë°œ ìŠ¤ì¼€ì¤„ (6ì¼)**

### **Day 1: í”„ë¡œì íŠ¸ ì…‹ì—…**
- [x] í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±
- [x] ì˜ì¡´ì„± ì„¤ì¹˜
- [ ] TypeScript ì„¤ì •
- [ ] Electron ê¸°ë³¸ ìœˆë„ìš°

### **Day 2: ì½”ì–´ ì‹œìŠ¤í…œ**
- [ ] uiohook-napi í†µí•©
- [ ] Prisma ìŠ¤í‚¤ë§ˆ ì„¤ê³„
- [ ] IPC ì±„ë„ êµ¬í˜„

### **Day 3: Preload & Security**
- [ ] contextBridge êµ¬í˜„
- [ ] Type-safe IPC
- [ ] ë³´ì•ˆ í…ŒìŠ¤íŠ¸

### **Day 4: UI ê°œë°œ**
- [ ] Next.js ë¼ìš°í„° ì„¤ì •
- [ ] ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
- [ ] Real-time ë°ì´í„° ì—°ë™

### **Day 5: ê¸°ëŠ¥ ì™„ì„±**
- [ ] ë¶„ì„ ì•Œê³ ë¦¬ì¦˜
- [ ] ì„¤ì • ê´€ë¦¬
- [ ] ì—ëŸ¬ í•¸ë“¤ë§

### **Day 6: ìµœì í™” & ë°°í¬**
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ë¹Œë“œ ì„¤ì •
- [ ] í…ŒìŠ¤íŠ¸ & ë°°í¬

---

## ğŸ¯ **í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ**

### **Frontend**
- **Next.js 15**: App Router + Server Components
- **React 19**: ìµœì‹  í›… + ì„±ëŠ¥ ìµœì í™”
- **Tailwind CSS**: ìœ í‹¸ë¦¬í‹° í¼ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ë§
- **TypeScript**: ì „ì²´ íƒ€ì… ì•ˆì •ì„±

### **Backend**
- **Electron 36**: ë©”ì¸ í”„ë¡œì„¸ìŠ¤ + ë³´ì•ˆ
- **uiohook-napi**: ì „ì—­ í‚¤ë³´ë“œ ëª¨ë‹ˆí„°ë§
- **active-win**: í™œì„± ìœˆë„ìš° ê°ì§€
- **Prisma**: ORM + íƒ€ì… ì•ˆì „ ì¿¼ë¦¬

### **Database**
- **SQLite**: ë¡œì»¬ ê³ ì„±ëŠ¥ DB
- **Prisma Schema**: íƒ€ì… ì•ˆì „ ëª¨ë¸ë§

---

**ê²°ë¡ **: **ë³´ì•ˆ ìš°ì„ ** ì•„í‚¤í…ì²˜ë¡œ **ì „ì—­ ëª¨ë‹ˆí„°ë§ + ì‹¤ì‹œê°„ UI**ë¥¼ 6ì¼ ë‚´ êµ¬í˜„ ê°€ëŠ¥.
